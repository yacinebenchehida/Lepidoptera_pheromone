<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>msaR</title>
<style type="text/css">@layer htmltools {
.html-fill-container {
display: flex;
flex-direction: column;

min-height: 0;
min-width: 0;
}
.html-fill-container > .html-fill-item {

flex: 1 1 auto;
min-height: 0;
min-width: 0;
}
.html-fill-container > :not(.html-fill-item) {

flex: 0 0 auto;
}
}
</style>
<script>(function() {
  // If window.HTMLWidgets is already defined, then use it; otherwise create a
  // new object. This allows preceding code to set options that affect the
  // initialization process (though none currently exist).
  window.HTMLWidgets = window.HTMLWidgets || {};

  // See if we're running in a viewer pane. If not, we're in a web browser.
  var viewerMode = window.HTMLWidgets.viewerMode =
      /\bviewer_pane=1\b/.test(window.location);

  // See if we're running in Shiny mode. If not, it's a static document.
  // Note that static widgets can appear in both Shiny and static modes, but
  // obviously, Shiny widgets can only appear in Shiny apps/documents.
  var shinyMode = window.HTMLWidgets.shinyMode =
      typeof(window.Shiny) !== "undefined" && !!window.Shiny.outputBindings;

  // We can't count on jQuery being available, so we implement our own
  // version if necessary.
  function querySelectorAll(scope, selector) {
    if (typeof(jQuery) !== "undefined" && scope instanceof jQuery) {
      return scope.find(selector);
    }
    if (scope.querySelectorAll) {
      return scope.querySelectorAll(selector);
    }
  }

  function asArray(value) {
    if (value === null)
      return [];
    if ($.isArray(value))
      return value;
    return [value];
  }

  // Implement jQuery's extend
  function extend(target /*, ... */) {
    if (arguments.length == 1) {
      return target;
    }
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var prop in source) {
        if (source.hasOwnProperty(prop)) {
          target[prop] = source[prop];
        }
      }
    }
    return target;
  }

  // IE8 doesn't support Array.forEach.
  function forEach(values, callback, thisArg) {
    if (values.forEach) {
      values.forEach(callback, thisArg);
    } else {
      for (var i = 0; i < values.length; i++) {
        callback.call(thisArg, values[i], i, values);
      }
    }
  }

  // Replaces the specified method with the return value of funcSource.
  //
  // Note that funcSource should not BE the new method, it should be a function
  // that RETURNS the new method. funcSource receives a single argument that is
  // the overridden method, it can be called from the new method. The overridden
  // method can be called like a regular function, it has the target permanently
  // bound to it so "this" will work correctly.
  function overrideMethod(target, methodName, funcSource) {
    var superFunc = target[methodName] || function() {};
    var superFuncBound = function() {
      return superFunc.apply(target, arguments);
    };
    target[methodName] = funcSource(superFuncBound);
  }

  // Add a method to delegator that, when invoked, calls
  // delegatee.methodName. If there is no such method on
  // the delegatee, but there was one on delegator before
  // delegateMethod was called, then the original version
  // is invoked instead.
  // For example:
  //
  // var a = {
  //   method1: function() { console.log('a1'); }
  //   method2: function() { console.log('a2'); }
  // };
  // var b = {
  //   method1: function() { console.log('b1'); }
  // };
  // delegateMethod(a, b, "method1");
  // delegateMethod(a, b, "method2");
  // a.method1();
  // a.method2();
  //
  // The output would be "b1", "a2".
  function delegateMethod(delegator, delegatee, methodName) {
    var inherited = delegator[methodName];
    delegator[methodName] = function() {
      var target = delegatee;
      var method = delegatee[methodName];

      // The method doesn't exist on the delegatee. Instead,
      // call the method on the delegator, if it exists.
      if (!method) {
        target = delegator;
        method = inherited;
      }

      if (method) {
        return method.apply(target, arguments);
      }
    };
  }

  // Implement a vague facsimilie of jQuery's data method
  function elementData(el, name, value) {
    if (arguments.length == 2) {
      return el["htmlwidget_data_" + name];
    } else if (arguments.length == 3) {
      el["htmlwidget_data_" + name] = value;
      return el;
    } else {
      throw new Error("Wrong number of arguments for elementData: " +
        arguments.length);
    }
  }

  // http://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex
  function escapeRegExp(str) {
    return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
  }

  function hasClass(el, className) {
    var re = new RegExp("\\b" + escapeRegExp(className) + "\\b");
    return re.test(el.className);
  }

  // elements - array (or array-like object) of HTML elements
  // className - class name to test for
  // include - if true, only return elements with given className;
  //   if false, only return elements *without* given className
  function filterByClass(elements, className, include) {
    var results = [];
    for (var i = 0; i < elements.length; i++) {
      if (hasClass(elements[i], className) == include)
        results.push(elements[i]);
    }
    return results;
  }

  function on(obj, eventName, func) {
    if (obj.addEventListener) {
      obj.addEventListener(eventName, func, false);
    } else if (obj.attachEvent) {
      obj.attachEvent(eventName, func);
    }
  }

  function off(obj, eventName, func) {
    if (obj.removeEventListener)
      obj.removeEventListener(eventName, func, false);
    else if (obj.detachEvent) {
      obj.detachEvent(eventName, func);
    }
  }

  // Translate array of values to top/right/bottom/left, as usual with
  // the "padding" CSS property
  // https://developer.mozilla.org/en-US/docs/Web/CSS/padding
  function unpackPadding(value) {
    if (typeof(value) === "number")
      value = [value];
    if (value.length === 1) {
      return {top: value[0], right: value[0], bottom: value[0], left: value[0]};
    }
    if (value.length === 2) {
      return {top: value[0], right: value[1], bottom: value[0], left: value[1]};
    }
    if (value.length === 3) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[1]};
    }
    if (value.length === 4) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[3]};
    }
  }

  // Convert an unpacked padding object to a CSS value
  function paddingToCss(paddingObj) {
    return paddingObj.top + "px " + paddingObj.right + "px " + paddingObj.bottom + "px " + paddingObj.left + "px";
  }

  // Makes a number suitable for CSS
  function px(x) {
    if (typeof(x) === "number")
      return x + "px";
    else
      return x;
  }

  // Retrieves runtime widget sizing information for an element.
  // The return value is either null, or an object with fill, padding,
  // defaultWidth, defaultHeight fields.
  function sizingPolicy(el) {
    var sizingEl = document.querySelector("script[data-for='" + el.id + "'][type='application/htmlwidget-sizing']");
    if (!sizingEl)
      return null;
    var sp = JSON.parse(sizingEl.textContent || sizingEl.text || "{}");
    if (viewerMode) {
      return sp.viewer;
    } else {
      return sp.browser;
    }
  }

  // @param tasks Array of strings (or falsy value, in which case no-op).
  //   Each element must be a valid JavaScript expression that yields a
  //   function. Or, can be an array of objects with "code" and "data"
  //   properties; in this case, the "code" property should be a string
  //   of JS that's an expr that yields a function, and "data" should be
  //   an object that will be added as an additional argument when that
  //   function is called.
  // @param target The object that will be "this" for each function
  //   execution.
  // @param args Array of arguments to be passed to the functions. (The
  //   same arguments will be passed to all functions.)
  function evalAndRun(tasks, target, args) {
    if (tasks) {
      forEach(tasks, function(task) {
        var theseArgs = args;
        if (typeof(task) === "object") {
          theseArgs = theseArgs.concat([task.data]);
          task = task.code;
        }
        var taskFunc = tryEval(task);
        if (typeof(taskFunc) !== "function") {
          throw new Error("Task must be a function! Source:\n" + task);
        }
        taskFunc.apply(target, theseArgs);
      });
    }
  }

  // Attempt eval() both with and without enclosing in parentheses.
  // Note that enclosing coerces a function declaration into
  // an expression that eval() can parse
  // (otherwise, a SyntaxError is thrown)
  function tryEval(code) {
    var result = null;
    try {
      result = eval("(" + code + ")");
    } catch(error) {
      if (!(error instanceof SyntaxError)) {
        throw error;
      }
      try {
        result = eval(code);
      } catch(e) {
        if (e instanceof SyntaxError) {
          throw error;
        } else {
          throw e;
        }
      }
    }
    return result;
  }

  function initSizing(el) {
    var sizing = sizingPolicy(el);
    if (!sizing)
      return;

    var cel = document.getElementById("htmlwidget_container");
    if (!cel)
      return;

    if (typeof(sizing.padding) !== "undefined") {
      document.body.style.margin = "0";
      document.body.style.padding = paddingToCss(unpackPadding(sizing.padding));
    }

    if (sizing.fill) {
      document.body.style.overflow = "hidden";
      document.body.style.width = "100%";
      document.body.style.height = "100%";
      document.documentElement.style.width = "100%";
      document.documentElement.style.height = "100%";
      cel.style.position = "absolute";
      var pad = unpackPadding(sizing.padding);
      cel.style.top = pad.top + "px";
      cel.style.right = pad.right + "px";
      cel.style.bottom = pad.bottom + "px";
      cel.style.left = pad.left + "px";
      el.style.width = "100%";
      el.style.height = "100%";

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };

    } else {
      el.style.width = px(sizing.width);
      el.style.height = px(sizing.height);

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };
    }
  }

  // Default implementations for methods
  var defaults = {
    find: function(scope) {
      return querySelectorAll(scope, "." + this.name);
    },
    renderError: function(el, err) {
      var $el = $(el);

      this.clearError(el);

      // Add all these error classes, as Shiny does
      var errClass = "shiny-output-error";
      if (err.type !== null) {
        // use the classes of the error condition as CSS class names
        errClass = errClass + " " + $.map(asArray(err.type), function(type) {
          return errClass + "-" + type;
        }).join(" ");
      }
      errClass = errClass + " htmlwidgets-error";

      // Is el inline or block? If inline or inline-block, just display:none it
      // and add an inline error.
      var display = $el.css("display");
      $el.data("restore-display-mode", display);

      if (display === "inline" || display === "inline-block") {
        $el.hide();
        if (err.message !== "") {
          var errorSpan = $("<span>").addClass(errClass);
          errorSpan.text(err.message);
          $el.after(errorSpan);
        }
      } else if (display === "block") {
        // If block, add an error just after the el, set visibility:none on the
        // el, and position the error to be on top of the el.
        // Mark it with a unique ID and CSS class so we can remove it later.
        $el.css("visibility", "hidden");
        if (err.message !== "") {
          var errorDiv = $("<div>").addClass(errClass).css("position", "absolute")
            .css("top", el.offsetTop)
            .css("left", el.offsetLeft)
            // setting width can push out the page size, forcing otherwise
            // unnecessary scrollbars to appear and making it impossible for
            // the element to shrink; so use max-width instead
            .css("maxWidth", el.offsetWidth)
            .css("height", el.offsetHeight);
          errorDiv.text(err.message);
          $el.after(errorDiv);

          // Really dumb way to keep the size/position of the error in sync with
          // the parent element as the window is resized or whatever.
          var intId = setInterval(function() {
            if (!errorDiv[0].parentElement) {
              clearInterval(intId);
              return;
            }
            errorDiv
              .css("top", el.offsetTop)
              .css("left", el.offsetLeft)
              .css("maxWidth", el.offsetWidth)
              .css("height", el.offsetHeight);
          }, 500);
        }
      }
    },
    clearError: function(el) {
      var $el = $(el);
      var display = $el.data("restore-display-mode");
      $el.data("restore-display-mode", null);

      if (display === "inline" || display === "inline-block") {
        if (display)
          $el.css("display", display);
        $(el.nextSibling).filter(".htmlwidgets-error").remove();
      } else if (display === "block"){
        $el.css("visibility", "inherit");
        $(el.nextSibling).filter(".htmlwidgets-error").remove();
      }
    },
    sizing: {}
  };

  // Called by widget bindings to register a new type of widget. The definition
  // object can contain the following properties:
  // - name (required) - A string indicating the binding name, which will be
  //   used by default as the CSS classname to look for.
  // - initialize (optional) - A function(el) that will be called once per
  //   widget element; if a value is returned, it will be passed as the third
  //   value to renderValue.
  // - renderValue (required) - A function(el, data, initValue) that will be
  //   called with data. Static contexts will cause this to be called once per
  //   element; Shiny apps will cause this to be called multiple times per
  //   element, as the data changes.
  window.HTMLWidgets.widget = function(definition) {
    if (!definition.name) {
      throw new Error("Widget must have a name");
    }
    if (!definition.type) {
      throw new Error("Widget must have a type");
    }
    // Currently we only support output widgets
    if (definition.type !== "output") {
      throw new Error("Unrecognized widget type '" + definition.type + "'");
    }
    // TODO: Verify that .name is a valid CSS classname

    // Support new-style instance-bound definitions. Old-style class-bound
    // definitions have one widget "object" per widget per type/class of
    // widget; the renderValue and resize methods on such widget objects
    // take el and instance arguments, because the widget object can't
    // store them. New-style instance-bound definitions have one widget
    // object per widget instance; the definition that's passed in doesn't
    // provide renderValue or resize methods at all, just the single method
    //   factory(el, width, height)
    // which returns an object that has renderValue(x) and resize(w, h).
    // This enables a far more natural programming style for the widget
    // author, who can store per-instance state using either OO-style
    // instance fields or functional-style closure variables (I guess this
    // is in contrast to what can only be called C-style pseudo-OO which is
    // what we required before).
    if (definition.factory) {
      definition = createLegacyDefinitionAdapter(definition);
    }

    if (!definition.renderValue) {
      throw new Error("Widget must have a renderValue function");
    }

    // For static rendering (non-Shiny), use a simple widget registration
    // scheme. We also use this scheme for Shiny apps/documents that also
    // contain static widgets.
    window.HTMLWidgets.widgets = window.HTMLWidgets.widgets || [];
    // Merge defaults into the definition; don't mutate the original definition.
    var staticBinding = extend({}, defaults, definition);
    overrideMethod(staticBinding, "find", function(superfunc) {
      return function(scope) {
        var results = superfunc(scope);
        // Filter out Shiny outputs, we only want the static kind
        return filterByClass(results, "html-widget-output", false);
      };
    });
    window.HTMLWidgets.widgets.push(staticBinding);

    if (shinyMode) {
      // Shiny is running. Register the definition with an output binding.
      // The definition itself will not be the output binding, instead
      // we will make an output binding object that delegates to the
      // definition. This is because we foolishly used the same method
      // name (renderValue) for htmlwidgets definition and Shiny bindings
      // but they actually have quite different semantics (the Shiny
      // bindings receive data that includes lots of metadata that it
      // strips off before calling htmlwidgets renderValue). We can't
      // just ignore the difference because in some widgets it's helpful
      // to call this.renderValue() from inside of resize(), and if
      // we're not delegating, then that call will go to the Shiny
      // version instead of the htmlwidgets version.

      // Merge defaults with definition, without mutating either.
      var bindingDef = extend({}, defaults, definition);

      // This object will be our actual Shiny binding.
      var shinyBinding = new Shiny.OutputBinding();

      // With a few exceptions, we'll want to simply use the bindingDef's
      // version of methods if they are available, otherwise fall back to
      // Shiny's defaults. NOTE: If Shiny's output bindings gain additional
      // methods in the future, and we want them to be overrideable by
      // HTMLWidget binding definitions, then we'll need to add them to this
      // list.
      delegateMethod(shinyBinding, bindingDef, "getId");
      delegateMethod(shinyBinding, bindingDef, "onValueChange");
      delegateMethod(shinyBinding, bindingDef, "onValueError");
      delegateMethod(shinyBinding, bindingDef, "renderError");
      delegateMethod(shinyBinding, bindingDef, "clearError");
      delegateMethod(shinyBinding, bindingDef, "showProgress");

      // The find, renderValue, and resize are handled differently, because we
      // want to actually decorate the behavior of the bindingDef methods.

      shinyBinding.find = function(scope) {
        var results = bindingDef.find(scope);

        // Only return elements that are Shiny outputs, not static ones
        var dynamicResults = results.filter(".html-widget-output");

        // It's possible that whatever caused Shiny to think there might be
        // new dynamic outputs, also caused there to be new static outputs.
        // Since there might be lots of different htmlwidgets bindings, we
        // schedule execution for later--no need to staticRender multiple
        // times.
        if (results.length !== dynamicResults.length)
          scheduleStaticRender();

        return dynamicResults;
      };

      // Wrap renderValue to handle initialization, which unfortunately isn't
      // supported natively by Shiny at the time of this writing.

      shinyBinding.renderValue = function(el, data) {
        Shiny.renderDependencies(data.deps);
        // Resolve strings marked as javascript literals to objects
        if (!(data.evals instanceof Array)) data.evals = [data.evals];
        for (var i = 0; data.evals && i < data.evals.length; i++) {
          window.HTMLWidgets.evaluateStringMember(data.x, data.evals[i]);
        }
        if (!bindingDef.renderOnNullValue) {
          if (data.x === null) {
            el.style.visibility = "hidden";
            return;
          } else {
            el.style.visibility = "inherit";
          }
        }
        if (!elementData(el, "initialized")) {
          initSizing(el);

          elementData(el, "initialized", true);
          if (bindingDef.initialize) {
            var rect = el.getBoundingClientRect();
            var result = bindingDef.initialize(el, rect.width, rect.height);
            elementData(el, "init_result", result);
          }
        }
        bindingDef.renderValue(el, data.x, elementData(el, "init_result"));
        evalAndRun(data.jsHooks.render, elementData(el, "init_result"), [el, data.x]);
      };

      // Only override resize if bindingDef implements it
      if (bindingDef.resize) {
        shinyBinding.resize = function(el, width, height) {
          // Shiny can call resize before initialize/renderValue have been
          // called, which doesn't make sense for widgets.
          if (elementData(el, "initialized")) {
            bindingDef.resize(el, width, height, elementData(el, "init_result"));
          }
        };
      }

      Shiny.outputBindings.register(shinyBinding, bindingDef.name);
    }
  };

  var scheduleStaticRenderTimerId = null;
  function scheduleStaticRender() {
    if (!scheduleStaticRenderTimerId) {
      scheduleStaticRenderTimerId = setTimeout(function() {
        scheduleStaticRenderTimerId = null;
        window.HTMLWidgets.staticRender();
      }, 1);
    }
  }

  // Render static widgets after the document finishes loading
  // Statically render all elements that are of this widget's class
  window.HTMLWidgets.staticRender = function() {
    var bindings = window.HTMLWidgets.widgets || [];
    forEach(bindings, function(binding) {
      var matches = binding.find(document.documentElement);
      forEach(matches, function(el) {
        var sizeObj = initSizing(el, binding);

        var getSize = function(el) {
          if (sizeObj) {
            return {w: sizeObj.getWidth(), h: sizeObj.getHeight()}
          } else {
            var rect = el.getBoundingClientRect();
            return {w: rect.width, h: rect.height}
          }
        };

        if (hasClass(el, "html-widget-static-bound"))
          return;
        el.className = el.className + " html-widget-static-bound";

        var initResult;
        if (binding.initialize) {
          var size = getSize(el);
          initResult = binding.initialize(el, size.w, size.h);
          elementData(el, "init_result", initResult);
        }

        if (binding.resize) {
          var lastSize = getSize(el);
          var resizeHandler = function(e) {
            var size = getSize(el);
            if (size.w === 0 && size.h === 0)
              return;
            if (size.w === lastSize.w && size.h === lastSize.h)
              return;
            lastSize = size;
            binding.resize(el, size.w, size.h, initResult);
          };

          on(window, "resize", resizeHandler);

          // This is needed for cases where we're running in a Shiny
          // app, but the widget itself is not a Shiny output, but
          // rather a simple static widget. One example of this is
          // an rmarkdown document that has runtime:shiny and widget
          // that isn't in a render function. Shiny only knows to
          // call resize handlers for Shiny outputs, not for static
          // widgets, so we do it ourselves.
          if (window.jQuery) {
            window.jQuery(document).on(
              "shown.htmlwidgets shown.bs.tab.htmlwidgets shown.bs.collapse.htmlwidgets",
              resizeHandler
            );
            window.jQuery(document).on(
              "hidden.htmlwidgets hidden.bs.tab.htmlwidgets hidden.bs.collapse.htmlwidgets",
              resizeHandler
            );
          }

          // This is needed for the specific case of ioslides, which
          // flips slides between display:none and display:block.
          // Ideally we would not have to have ioslide-specific code
          // here, but rather have ioslides raise a generic event,
          // but the rmarkdown package just went to CRAN so the
          // window to getting that fixed may be long.
          if (window.addEventListener) {
            // It's OK to limit this to window.addEventListener
            // browsers because ioslides itself only supports
            // such browsers.
            on(document, "slideenter", resizeHandler);
            on(document, "slideleave", resizeHandler);
          }
        }

        var scriptData = document.querySelector("script[data-for='" + el.id + "'][type='application/json']");
        if (scriptData) {
          var data = JSON.parse(scriptData.textContent || scriptData.text);
          // Resolve strings marked as javascript literals to objects
          if (!(data.evals instanceof Array)) data.evals = [data.evals];
          for (var k = 0; data.evals && k < data.evals.length; k++) {
            window.HTMLWidgets.evaluateStringMember(data.x, data.evals[k]);
          }
          binding.renderValue(el, data.x, initResult);
          evalAndRun(data.jsHooks.render, initResult, [el, data.x]);
        }
      });
    });

    invokePostRenderHandlers();
  }


  function has_jQuery3() {
    if (!window.jQuery) {
      return false;
    }
    var $version = window.jQuery.fn.jquery;
    var $major_version = parseInt($version.split(".")[0]);
    return $major_version >= 3;
  }

  /*
  / Shiny 1.4 bumped jQuery from 1.x to 3.x which means jQuery's
  / on-ready handler (i.e., $(fn)) is now asyncronous (i.e., it now
  / really means $(setTimeout(fn)).
  / https://jquery.com/upgrade-guide/3.0/#breaking-change-document-ready-handlers-are-now-asynchronous
  /
  / Since Shiny uses $() to schedule initShiny, shiny>=1.4 calls initShiny
  / one tick later than it did before, which means staticRender() is
  / called renderValue() earlier than (advanced) widget authors might be expecting.
  / https://github.com/rstudio/shiny/issues/2630
  /
  / For a concrete example, leaflet has some methods (e.g., updateBounds)
  / which reference Shiny methods registered in initShiny (e.g., setInputValue).
  / Since leaflet is privy to this life-cycle, it knows to use setTimeout() to
  / delay execution of those methods (until Shiny methods are ready)
  / https://github.com/rstudio/leaflet/blob/18ec981/javascript/src/index.js#L266-L268
  /
  / Ideally widget authors wouldn't need to use this setTimeout() hack that
  / leaflet uses to call Shiny methods on a staticRender(). In the long run,
  / the logic initShiny should be broken up so that method registration happens
  / right away, but binding happens later.
  */
  function maybeStaticRenderLater() {
    if (shinyMode && has_jQuery3()) {
      window.jQuery(window.HTMLWidgets.staticRender);
    } else {
      window.HTMLWidgets.staticRender();
    }
  }

  if (document.addEventListener) {
    document.addEventListener("DOMContentLoaded", function() {
      document.removeEventListener("DOMContentLoaded", arguments.callee, false);
      maybeStaticRenderLater();
    }, false);
  } else if (document.attachEvent) {
    document.attachEvent("onreadystatechange", function() {
      if (document.readyState === "complete") {
        document.detachEvent("onreadystatechange", arguments.callee);
        maybeStaticRenderLater();
      }
    });
  }


  window.HTMLWidgets.getAttachmentUrl = function(depname, key) {
    // If no key, default to the first item
    if (typeof(key) === "undefined")
      key = 1;

    var link = document.getElementById(depname + "-" + key + "-attachment");
    if (!link) {
      throw new Error("Attachment " + depname + "/" + key + " not found in document");
    }
    return link.getAttribute("href");
  };

  window.HTMLWidgets.dataframeToD3 = function(df) {
    var names = [];
    var length;
    for (var name in df) {
        if (df.hasOwnProperty(name))
            names.push(name);
        if (typeof(df[name]) !== "object" || typeof(df[name].length) === "undefined") {
            throw new Error("All fields must be arrays");
        } else if (typeof(length) !== "undefined" && length !== df[name].length) {
            throw new Error("All fields must be arrays of the same length");
        }
        length = df[name].length;
    }
    var results = [];
    var item;
    for (var row = 0; row < length; row++) {
        item = {};
        for (var col = 0; col < names.length; col++) {
            item[names[col]] = df[names[col]][row];
        }
        results.push(item);
    }
    return results;
  };

  window.HTMLWidgets.transposeArray2D = function(array) {
      if (array.length === 0) return array;
      var newArray = array[0].map(function(col, i) {
          return array.map(function(row) {
              return row[i]
          })
      });
      return newArray;
  };
  // Split value at splitChar, but allow splitChar to be escaped
  // using escapeChar. Any other characters escaped by escapeChar
  // will be included as usual (including escapeChar itself).
  function splitWithEscape(value, splitChar, escapeChar) {
    var results = [];
    var escapeMode = false;
    var currentResult = "";
    for (var pos = 0; pos < value.length; pos++) {
      if (!escapeMode) {
        if (value[pos] === splitChar) {
          results.push(currentResult);
          currentResult = "";
        } else if (value[pos] === escapeChar) {
          escapeMode = true;
        } else {
          currentResult += value[pos];
        }
      } else {
        currentResult += value[pos];
        escapeMode = false;
      }
    }
    if (currentResult !== "") {
      results.push(currentResult);
    }
    return results;
  }
  // Function authored by Yihui/JJ Allaire
  window.HTMLWidgets.evaluateStringMember = function(o, member) {
    var parts = splitWithEscape(member, '.', '\\');
    for (var i = 0, l = parts.length; i < l; i++) {
      var part = parts[i];
      // part may be a character or 'numeric' member name
      if (o !== null && typeof o === "object" && part in o) {
        if (i == (l - 1)) { // if we are at the end of the line then evalulate
          if (typeof o[part] === "string")
            o[part] = tryEval(o[part]);
        } else { // otherwise continue to next embedded object
          o = o[part];
        }
      }
    }
  };

  // Retrieve the HTMLWidget instance (i.e. the return value of an
  // HTMLWidget binding's initialize() or factory() function)
  // associated with an element, or null if none.
  window.HTMLWidgets.getInstance = function(el) {
    return elementData(el, "init_result");
  };

  // Finds the first element in the scope that matches the selector,
  // and returns the HTMLWidget instance (i.e. the return value of
  // an HTMLWidget binding's initialize() or factory() function)
  // associated with that element, if any. If no element matches the
  // selector, or the first matching element has no HTMLWidget
  // instance associated with it, then null is returned.
  //
  // The scope argument is optional, and defaults to window.document.
  window.HTMLWidgets.find = function(scope, selector) {
    if (arguments.length == 1) {
      selector = scope;
      scope = document;
    }

    var el = scope.querySelector(selector);
    if (el === null) {
      return null;
    } else {
      return window.HTMLWidgets.getInstance(el);
    }
  };

  // Finds all elements in the scope that match the selector, and
  // returns the HTMLWidget instances (i.e. the return values of
  // an HTMLWidget binding's initialize() or factory() function)
  // associated with the elements, in an array. If elements that
  // match the selector don't have an associated HTMLWidget
  // instance, the returned array will contain nulls.
  //
  // The scope argument is optional, and defaults to window.document.
  window.HTMLWidgets.findAll = function(scope, selector) {
    if (arguments.length == 1) {
      selector = scope;
      scope = document;
    }

    var nodes = scope.querySelectorAll(selector);
    var results = [];
    for (var i = 0; i < nodes.length; i++) {
      results.push(window.HTMLWidgets.getInstance(nodes[i]));
    }
    return results;
  };

  var postRenderHandlers = [];
  function invokePostRenderHandlers() {
    while (postRenderHandlers.length) {
      var handler = postRenderHandlers.shift();
      if (handler) {
        handler();
      }
    }
  }

  // Register the given callback function to be invoked after the
  // next time static widgets are rendered.
  window.HTMLWidgets.addPostRenderHandler = function(callback) {
    postRenderHandlers.push(callback);
  };

  // Takes a new-style instance-bound definition, and returns an
  // old-style class-bound definition. This saves us from having
  // to rewrite all the logic in this file to accomodate both
  // types of definitions.
  function createLegacyDefinitionAdapter(defn) {
    var result = {
      name: defn.name,
      type: defn.type,
      initialize: function(el, width, height) {
        return defn.factory(el, width, height);
      },
      renderValue: function(el, x, instance) {
        return instance.renderValue(x);
      },
      resize: function(el, width, height, instance) {
        return instance.resize(width, height);
      }
    };

    if (defn.find)
      result.find = defn.find;
    if (defn.renderError)
      result.renderError = defn.renderError;
    if (defn.clearError)
      result.clearError = defn.clearError;

    return result;
  }
})();
</script>
<style type="text/css">
.biojs_msa_div {
}
.biojs_msa_stage {
cursor: default;
line-height: normal; font-family: Helvetica;
}
.biojs_msa_seqblock {
cursor: move;
}
.biojs_msa_layer{
display: block;
white-space: nowrap;
}
.biojs_msa_labels {
color:black;
display: inline-block;
white-space: nowrap;
cursor: pointer;
vertical-align:middle;
overflow: hidden;
text-overflow: clip;

text-align: left;
}
.biojs_msa_header {
white-space: nowrap;
text-align: left;
}
.biojs_msa_labelrow:before {
content: '';
display: inline-block;
width: 0;
height: 100%;
vertical-align: middle;
}
.biojs_msa_labelrow{
height: 100%;
}
.biojs_msa_labelblock::-webkit-scrollbar, .biojs_msa_rheader::-webkit-scrollbar{
// FIX scrollbars on Mac
-webkit-appearance: none;
width: 7px;
height: 7px;
}
.biojs_msa_labelblock::-webkit-scrollbar-thumb, .biojs_msa_rheader::-webkit-scrollbar-thumb{
border-radius: 4px;
background-color: rgba(0,0,0,.5);
box-shadow: 0 0 1px rgba(255,255,255,.5);
}


.biojs_msa_marker {
color: #999;
white-space: nowrap;
}
.biojs_msa_marker .msa-col-header {
cursor: pointer;
cursor: pointer;
text-align: center;
}
.biojs_msa_marker .msa-col-header:hover {
color: #f00;
}


.smenubar .smenubar_alink {
background: #3498db;
background-image: -webkit-linear-gradient(top, #3498db, #2980b9);
background-image: -moz-linear-gradient(top, #3498db, #2980b9);
background-image: -ms-linear-gradient(top, #3498db, #2980b9);
background-image: -o-linear-gradient(top, #3498db, #2980b9);
background-image: linear-gradient(to bottom, #3498db, #2980b9);
-webkit-border-radius: 28;
-moz-border-radius: 28;
border-radius: 28px;
font-family: Arial;
color: #ffffff;
padding: 3px 10px 3px 10px;
margin-left: 10px;
text-decoration: none;
}
.smenubar {
display: inline-block;
}
.smenubar .smenubar_alink:hover {
cursor: pointer;
}

.smenu-dropdown {
position: absolute;
z-index: 9999999;
display: none;
}
.smenu-dropdown .smenu-dropdown-menu,
.smenu-dropdown .smenu-dropdown-panel {
min-width: 160px;
max-width: 360px;
list-style: none;
background: #FFF;
border: solid 1px #DDD;
border: solid 1px rgba(0, 0, 0, .2);
border-radius: 6px;
box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
overflow: visible;
padding: 4px 0;
margin: 0;
}
.smenu-dropdown .smenu-dropdown-panel {
padding: 10px;
}
.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-menu,
.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-panel {
max-height: 358px;
overflow: auto;
}
.smenu-dropdown .smenu-dropdown-menu LI {
list-style: none;
padding: 0 0;
margin: 0;
line-height: 18px;
}
.smenu-dropdown .smenu-dropdown-menu LI,
.smenu-dropdown .smenu-dropdown-menu LABEL {
display: block;
color: #555;
text-decoration: none;
line-height: 18px;
padding: 3px 15px;
white-space: nowrap;
}
.smenu-dropdown .smenu-dropdown-menu LI:hover,
.smenu-dropdown .smenu-dropdown-menu LABEL:hover {
background-color: #08C;
color: #FFF;
cursor: pointer;
}
.smenu-dropdown .smenu-dropdown-menu .smenu-dropdown-divider {
font-size: 1px;
border-top: solid 1px #E5E5E5;
padding: 0;
margin: 5px 0;
}

.biojs_msa_div {
position: relative;
}
.biojs_msa_scale {
position: absolute;
bottom: 0;
right: 0;
background-color: #fff;
box-shadow: 0 2px 3px #999;
border-radius: 3px;
margin: 5px 0 0 auto;
padding: 5px;
text-align: center;
}
.biojs_msa_scale .msa-btngroup {
margin: 5px auto 0;
}
.biojs_msa_scale [type="range"] {
cursor: pointer;
}
.biojs_msa_scale .msa-scale-minimised {
}
.biojs_msa_scale .msa-scale-minimised {
}
.biojs_msa_scale .msa-btn-close {
text-align: right;
font-size: 0.8em;
padding: 2px;
}
.biojs_msa_scale .msa-btn-open {
background-color: #fff;
}
.biojs_msa_scale .msa-hide {
display: none;
}
.msa-btn {
cursor: pointer;
font-size: 1.1em;
display: inline-block;
padding: 2px 8px;
margin-bottom: 0;
border: 1px solid transparent;
border-radius: 4px;
box-sizing: border-box;
}
.msa-btn:hover {
background-color: #ddd;
}
</style>
<script>!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var i=n(103),o=r(i);n(144);var s=o.default;for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);window&&(window.msa=s),t.exports=s},function(t,e,n){"use strict";t.exports.Model=n(42),t.exports.Collection=n(55),t.exports.Events=n(11),t.exports.extend=n(15)},function(t,e,n){"use strict";var r=n(10),i=n(11),o=n(15),s=n(5),a=function(t){this.cid=r.uniqueId("view"),t||(t={}),r.extend(this,r.pick(t,l)),this._ensureElement(),this.initialize.apply(this,arguments)},u=/^(\S+)\s*(.*)$/,l=["model","collection","el","id","attributes","className","tagName","events"];r.extend(a.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof s?t:s(t),this.el=this.$el[0]},delegateEvents:function(t){if(!t&&!(t=r.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(r.isFunction(n)||(n=this[t[e]]),n){var i=e.match(u);this.delegate(i[1],i[2],r.bind(n,this))}}return this},delegate:function(t,e,n){this.$el.on(t+".delegateEvents"+this.cid,e,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){this.$el.off(t+".delegateEvents"+this.cid,e,n)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var t=r.extend({},r.result(this,"attributes"));this.id&&(t.id=r.result(this,"id")),this.className&&(t.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),a.extend=o,t.exports=a},function(t,e,n){var r;(function(t,i){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function s(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function u(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function l(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function h(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function f(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function d(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function g(t,e){return!!(null==t?0:t.length)&&z(t,e,0)>-1}function p(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function m(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function v(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function _(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function y(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function b(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t){return t.split("")}function w(t){return t.match(Ue)||[]}function S(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function k(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function z(t,e,n){return e===e?J(t,e,n):k(t,M,n)}function C(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function M(t){return t!==t}function j(t,e){var n=null==t?0:t.length;return n?L(t,e)/n:Pt}function E(t){return function(e){return null==e?ot:e[t]}}function O(t){return function(e){return null==t?ot:t[e]}}function T(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function A(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function L(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==ot&&(n=n===ot?o:n+o)}return n}function R(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function q(t,e){return m(e,function(e){return[e,t[e]]})}function N(t){return function(e){return t(e)}}function I(t,e){return m(e,function(e){return t[e]})}function P(t,e){return t.has(e)}function W(t,e){for(var n=-1,r=t.length;++n<r&&z(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length;n--&&z(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function H(t){return"\\"+rr[t]}function D(t,e){return null==t?ot:t[e]}function U(t){return Xn.test(t)}function V(t){return Zn.test(t)}function $(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function X(t,e){return function(n){return t(e(n))}}function Z(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==ft||(t[n]=ft,o[i++]=n)}return o}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function J(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Q(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function tt(t){return U(t)?nt(t):br(t)}function et(t){return U(t)?rt(t):x(t)}function nt(t){for(var e=$n.lastIndex=0;$n.test(t);)++e;return e}function rt(t){return t.match($n)||[]}function it(t){return t.match(Gn)||[]}var ot,st="4.17.4",at=200,ut="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",lt="Expected a function",ct="__lodash_hash_undefined__",ht=500,ft="__lodash_placeholder__",dt=1,gt=2,pt=4,mt=1,vt=2,_t=1,yt=2,bt=4,xt=8,wt=16,St=32,kt=64,zt=128,Ct=256,Mt=512,jt=30,Et="...",Ot=800,Tt=16,At=1,Lt=2,Rt=3,qt=1/0,Nt=9007199254740991,It=1.7976931348623157e308,Pt=NaN,Wt=4294967295,Ft=Wt-1,Bt=Wt>>>1,Ht=[["ary",zt],["bind",_t],["bindKey",yt],["curry",xt],["curryRight",wt],["flip",Mt],["partial",St],["partialRight",kt],["rearg",Ct]],Dt="[object Arguments]",Ut="[object Array]",Vt="[object AsyncFunction]",$t="[object Boolean]",Gt="[object Date]",Xt="[object DOMException]",Zt="[object Error]",Kt="[object Function]",Yt="[object GeneratorFunction]",Jt="[object Map]",Qt="[object Number]",te="[object Null]",ee="[object Object]",ne="[object Promise]",re="[object Proxy]",ie="[object RegExp]",oe="[object Set]",se="[object String]",ae="[object Symbol]",ue="[object Undefined]",le="[object WeakMap]",ce="[object WeakSet]",he="[object ArrayBuffer]",fe="[object DataView]",de="[object Float32Array]",ge="[object Float64Array]",pe="[object Int8Array]",me="[object Int16Array]",ve="[object Int32Array]",_e="[object Uint8Array]",ye="[object Uint8ClampedArray]",be="[object Uint16Array]",xe="[object Uint32Array]",we=/\b__p \+= '';/g,Se=/\b(__p \+=) '' \+/g,ke=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ze=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,Me=RegExp(ze.source),je=RegExp(Ce.source),Ee=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Re=/^\./,qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,Ie=RegExp(Ne.source),Pe=/^\s+|\s+$/g,We=/^\s+/,Fe=/\s+$/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,De=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/\\(\\)?/g,$e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,Xe=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,Ye=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,Qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,en=/['\n\r\u2028\u2029\\]/g,nn="\\ud800-\\udfff",rn="\\u0300-\\u036f",on="\\ufe20-\\ufe2f",sn="\\u20d0-\\u20ff",an=rn+on+sn,un="\\u2700-\\u27bf",ln="a-z\\xdf-\\xf6\\xf8-\\xff",cn="\\xac\\xb1\\xd7\\xf7",hn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fn="\\u2000-\\u206f",dn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gn="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",mn=cn+hn+fn+dn,vn="['’]",_n="["+nn+"]",yn="["+mn+"]",bn="["+an+"]",xn="\\d+",wn="["+un+"]",Sn="["+ln+"]",kn="[^"+nn+mn+xn+un+ln+gn+"]",zn="\\ud83c[\\udffb-\\udfff]",Cn="(?:"+bn+"|"+zn+")",Mn="[^"+nn+"]",jn="(?:\\ud83c[\\udde6-\\uddff]){2}",En="[\\ud800-\\udbff][\\udc00-\\udfff]",On="["+gn+"]",Tn="\\u200d",An="(?:"+Sn+"|"+kn+")",Ln="(?:"+On+"|"+kn+")",Rn="(?:"+vn+"(?:d|ll|m|re|s|t|ve))?",qn="(?:"+vn+"(?:D|LL|M|RE|S|T|VE))?",Nn=Cn+"?",In="["+pn+"]?",Pn="(?:"+Tn+"(?:"+[Mn,jn,En].join("|")+")"+In+Nn+")*",Wn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Fn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Bn=In+Nn+Pn,Hn="(?:"+[wn,jn,En].join("|")+")"+Bn,Dn="(?:"+[Mn+bn+"?",bn,jn,En,_n].join("|")+")",Un=RegExp(vn,"g"),Vn=RegExp(bn,"g"),$n=RegExp(zn+"(?="+zn+")|"+Dn+Bn,"g"),Gn=RegExp([On+"?"+Sn+"+"+Rn+"(?="+[yn,On,"$"].join("|")+")",Ln+"+"+qn+"(?="+[yn,On+An,"$"].join("|")+")",On+"?"+An+"+"+Rn,On+"+"+qn,Fn,Wn,xn,Hn].join("|"),"g"),Xn=RegExp("["+Tn+nn+an+pn+"]"),Zn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yn=-1,Jn={};Jn[de]=Jn[ge]=Jn[pe]=Jn[me]=Jn[ve]=Jn[_e]=Jn[ye]=Jn[be]=Jn[xe]=!0,Jn[Dt]=Jn[Ut]=Jn[he]=Jn[$t]=Jn[fe]=Jn[Gt]=Jn[Zt]=Jn[Kt]=Jn[Jt]=Jn[Qt]=Jn[ee]=Jn[ie]=Jn[oe]=Jn[se]=Jn[le]=!1;var Qn={};Qn[Dt]=Qn[Ut]=Qn[he]=Qn[fe]=Qn[$t]=Qn[Gt]=Qn[de]=Qn[ge]=Qn[pe]=Qn[me]=Qn[ve]=Qn[Jt]=Qn[Qt]=Qn[ee]=Qn[ie]=Qn[oe]=Qn[se]=Qn[ae]=Qn[_e]=Qn[ye]=Qn[be]=Qn[xe]=!0,Qn[Zt]=Qn[Kt]=Qn[le]=!1;var tr={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ir=parseFloat,or=parseInt,sr="object"==("undefined"==typeof t?"undefined":o(t))&&t&&t.Object===Object&&t,ar="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,ur=sr||ar||Function("return this")(),lr="object"==o(e)&&e&&!e.nodeType&&e,cr=lr&&"object"==o(i)&&i&&!i.nodeType&&i,hr=cr&&cr.exports===lr,fr=hr&&sr.process,dr=function(){try{return fr&&fr.binding&&fr.binding("util")}catch(t){}}(),gr=dr&&dr.isArrayBuffer,pr=dr&&dr.isDate,mr=dr&&dr.isMap,vr=dr&&dr.isRegExp,_r=dr&&dr.isSet,yr=dr&&dr.isTypedArray,br=E("length"),xr=O(tr),wr=O(er),Sr=O(nr),kr=function t(e){function n(t){if(cu(t)&&!wf(t)&&!(t instanceof x)){if(t instanceof i)return t;if(xc.call(t,"__wrapped__"))return as(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=ot}function x(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wt,this.__views__=[]}function O(){var t=new x(this.__wrapped__);return t.__actions__=Bi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Bi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Bi(this.__views__),t}function J(){if(this.__filtered__){var t=new x(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function nt(){var t=this.__wrapped__.value(),e=this.__dir__,n=wf(t),r=e<0,i=n?t.length:0,o=To(0,i,this.__views__),s=o.start,a=o.end,u=a-s,l=r?a:s-1,c=this.__iteratees__,h=c.length,f=0,d=Yc(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return wi(t,this.__actions__);var g=[];t:for(;u--&&f<d;){l+=e;for(var p=-1,m=t[l];++p<h;){var v=c[p],_=v.iteratee,y=v.type,b=_(m);if(y==Lt)m=b;else if(!b){if(y==At)continue t;break t}}g[f++]=m}return g}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ue(){this.__data__=ah?ah(null):{},this.size=0}function nn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function rn(t){var e=this.__data__;if(ah){var n=e[t];return n===ct?ot:n}return xc.call(e,t)?e[t]:ot}function on(t){var e=this.__data__;return ah?e[t]!==ot:xc.call(e,t)}function sn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ah&&e===ot?ct:e,this}function an(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function un(){this.__data__=[],this.size=0}function ln(t){var e=this.__data__,n=Rn(e,t);return!(n<0||(n==e.length-1?e.pop():qc.call(e,n,1),--this.size,0))}function cn(t){var e=this.__data__,n=Rn(e,t);return n<0?ot:e[n][1]}function hn(t){return Rn(this.__data__,t)>-1}function fn(t,e){var n=this.__data__,r=Rn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function dn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function gn(){this.size=0,this.__data__={hash:new rt,map:new(rh||an),string:new rt}}function pn(t){var e=Mo(this,t).delete(t);return this.size-=e?1:0,e}function mn(t){return Mo(this,t).get(t)}function vn(t){return Mo(this,t).has(t)}function _n(t,e){var n=Mo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new dn;++e<n;)this.add(t[e])}function bn(t){return this.__data__.set(t,ct),this}function xn(t){return this.__data__.has(t)}function wn(t){var e=this.__data__=new an(t);this.size=e.size}function Sn(){this.__data__=new an,this.size=0}function kn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function zn(t){return this.__data__.get(t)}function Cn(t){return this.__data__.has(t)}function Mn(t,e){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!rh||r.length<at-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new dn(r)}return n.set(t,e),this.size=n.size,this}function jn(t,e){var n=wf(t),r=!n&&xf(t),i=!n&&!r&&kf(t),o=!n&&!r&&!i&&Ef(t),s=n||r||i||o,a=s?R(t.length,gc):[],u=a.length;for(var l in t)!e&&!xc.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Wo(l,u))||a.push(l);return a}function En(t){var e=t.length;return e?t[ri(0,e-1)]:ot}function On(t,e){return rs(Bi(t),Fn(e,0,t.length))}function Tn(t){return rs(Bi(t))}function An(t,e,n){(n===ot||Ka(t[e],n))&&(n!==ot||e in t)||Pn(t,e,n)}function Ln(t,e,n){var r=t[e];xc.call(t,e)&&Ka(r,n)&&(n!==ot||e in t)||Pn(t,e,n)}function Rn(t,e){for(var n=t.length;n--;)if(Ka(t[n][0],e))return n;return-1}function qn(t,e,n,r){return yh(t,function(t,i,o){e(r,t,n(t),o)}),r}function Nn(t,e){return t&&Hi(e,Vu(e),t)}function In(t,e){return t&&Hi(e,$u(e),t)}function Pn(t,e,n){"__proto__"==e&&Wc?Wc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Wn(t,e){for(var n=-1,r=e.length,i=ac(r),o=null==t;++n<r;)i[n]=o?ot:Hu(t,e[n]);return i}function Fn(t,e,n){return t===t&&(n!==ot&&(t=t<=n?t:n),e!==ot&&(t=t>=e?t:e)),t}function Bn(t,e,n,r,i,o){var s,a=e&dt,u=e&gt,l=e&pt;if(n&&(s=i?n(t,r,i,o):n(t)),s!==ot)return s;if(!lu(t))return t;var h=wf(t);if(h){if(s=Ro(t),!a)return Bi(t,s)}else{var f=Th(t),d=f==Kt||f==Yt;if(kf(t))return Ei(t,a);if(f==ee||f==Dt||d&&!i){if(s=u||d?{}:qo(t),!a)return u?Ui(t,In(s,t)):Di(t,Nn(s,t))}else{if(!Qn[f])return i?t:{};s=No(t,f,Bn,a)}}o||(o=new wn);var g=o.get(t);if(g)return g;o.set(t,s);var p=l?u?So:wo:u?$u:Vu,m=h?ot:p(t);return c(m||t,function(r,i){m&&(i=r,r=t[i]),Ln(s,i,Bn(r,e,n,i,t,o))}),s}function Hn(t){var e=Vu(t);return function(n){return Dn(n,t,e)}}function Dn(t,e,n){var r=n.length;if(null==t)return!r;for(t=fc(t);r--;){var i=n[r],o=e[i],s=t[i];if(s===ot&&!(i in t)||!o(s))return!1}return!0}function $n(t,e,n){if("function"!=typeof t)throw new pc(lt);return Rh(function(){t.apply(ot,n)},e)}function Gn(t,e,n,r){var i=-1,o=g,s=!0,a=t.length,u=[],l=e.length;if(!a)return u;n&&(e=m(e,N(n))),r?(o=p,s=!1):e.length>=at&&(o=P,s=!1,e=new yn(e));t:for(;++i<a;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,s&&h===h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}function Xn(t,e){var n=!0;return yh(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Zn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(a===ot?s===s&&!xu(s):n(s,a)))var a=s,u=o}return u}function tr(t,e,n,r){var i=t.length;for(n=Mu(n),n<0&&(n=-n>i?0:i+n),r=r===ot||r>i?i:Mu(r),r<0&&(r+=i),r=n>r?0:ju(r);n<r;)t[n++]=e;return t}function er(t,e){var n=[];return yh(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function nr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=Po),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?nr(a,e-1,n,r,i):v(i,a):r||(i[i.length]=a)}return i}function rr(t,e){return t&&xh(t,e,Vu)}function sr(t,e){return t&&wh(t,e,Vu)}function ar(t,e){return d(e,function(e){return su(t[e])})}function lr(t,e){e=Mi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[is(e[n++])];return n&&n==r?t:ot}function cr(t,e,n){var r=e(t);return wf(t)?r:v(r,n(t))}function fr(t){return null==t?t===ot?ue:te:Pc&&Pc in fc(t)?Oo(t):Yo(t)}function dr(t,e){return t>e}function br(t,e){return null!=t&&xc.call(t,e)}function kr(t,e){return null!=t&&e in fc(t)}function Cr(t,e,n){return t>=Yc(e,n)&&t<Kc(e,n)}function Mr(t,e,n){for(var r=n?p:g,i=t[0].length,o=t.length,s=o,a=ac(o),u=1/0,l=[];s--;){var c=t[s];s&&e&&(c=m(c,N(e))),u=Yc(c.length,u),a[s]=!n&&(e||i>=120&&c.length>=120)?new yn(s&&c):ot}c=t[0];var h=-1,f=a[0];t:for(;++h<i&&l.length<u;){var d=c[h],v=e?e(d):d;if(d=n||0!==d?d:0,!(f?P(f,v):r(l,v,n))){for(s=o;--s;){var _=a[s];if(!(_?P(_,v):r(t[s],v,n)))continue t}f&&f.push(v),l.push(d)}}return l}function jr(t,e,n,r){return rr(t,function(t,i,o){e(r,n(t),i,o)}),r}function Er(t,e,n){e=Mi(e,t),t=Qo(t,e);var r=null==t?t:t[is(Cs(e))];return null==r?ot:u(r,t,n)}function Or(t){return cu(t)&&fr(t)==Dt}function Tr(t){return cu(t)&&fr(t)==he}function Ar(t){return cu(t)&&fr(t)==Gt}function Lr(t,e,n,r,i){return t===e||(null==t||null==e||!cu(t)&&!cu(e)?t!==t&&e!==e:Rr(t,e,n,r,Lr,i))}function Rr(t,e,n,r,i,o){var s=wf(t),a=wf(e),u=s?Ut:Th(t),l=a?Ut:Th(e);u=u==Dt?ee:u,l=l==Dt?ee:l;var c=u==ee,h=l==ee,f=u==l;if(f&&kf(t)){if(!kf(e))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new wn),s||Ef(t)?_o(t,e,n,r,i,o):yo(t,e,u,n,r,i,o);if(!(n&mt)){var d=c&&xc.call(t,"__wrapped__"),g=h&&xc.call(e,"__wrapped__");if(d||g){var p=d?t.value():t,m=g?e.value():e;return o||(o=new wn),i(p,m,n,r,o)}}return!!f&&(o||(o=new wn),bo(t,e,n,r,i,o))}function qr(t){return cu(t)&&Th(t)==Jt}function Nr(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=fc(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var u=a[0],l=t[u],c=a[1];if(s&&a[2]){if(l===ot&&!(u in t))return!1}else{var h=new wn;if(r)var f=r(l,c,u,t,e,h);if(!(f===ot?Lr(c,l,mt|vt,r,h):f))return!1}}return!0}function Ir(t){return!(!lu(t)||Uo(t))&&(su(t)?Mc:Ke).test(os(t))}function Pr(t){return cu(t)&&fr(t)==ie}function Wr(t){return cu(t)&&Th(t)==oe}function Fr(t){return cu(t)&&uu(t.length)&&!!Jn[fr(t)]}function Br(t){return"function"==typeof t?t:null==t?ql:"object"==("undefined"==typeof t?"undefined":o(t))?wf(t)?Gr(t[0],t[1]):$r(t):Dl(t)}function Hr(t){if(!Vo(t))return Zc(t);var e=[];for(var n in fc(t))xc.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Dr(t){if(!lu(t))return Ko(t);var e=Vo(t),n=[];for(var r in t)("constructor"!=r||!e&&xc.call(t,r))&&n.push(r);return n}function Ur(t,e){return t<e}function Vr(t,e){var n=-1,r=Ya(t)?ac(t.length):[];return yh(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function $r(t){var e=jo(t);return 1==e.length&&e[0][2]?Go(e[0][0],e[0][1]):function(n){return n===t||Nr(n,t,e)}}function Gr(t,e){return Bo(t)&&$o(e)?Go(is(t),e):function(n){var r=Hu(n,t);return r===ot&&r===e?Uu(n,t):Lr(e,r,mt|vt)}}function Xr(t,e,n,r,i){t!==e&&xh(e,function(o,s){if(lu(o))i||(i=new wn),Zr(t,e,s,n,Xr,r,i);else{var a=r?r(t[s],o,s+"",t,e,i):ot;a===ot&&(a=o),An(t,s,a)}},$u)}function Zr(t,e,n,r,i,o,s){var a=t[n],u=e[n],l=s.get(u);if(l)return void An(t,n,l);var c=o?o(a,u,n+"",t,e,s):ot,h=c===ot;if(h){var f=wf(u),d=!f&&kf(u),g=!f&&!d&&Ef(u);c=u,f||d||g?wf(a)?c=a:Ja(a)?c=Bi(a):d?(h=!1,c=Ei(u,!0)):g?(h=!1,c=Ni(u,!0)):c=[]:_u(u)||xf(u)?(c=a,xf(a)?c=Ou(a):(!lu(a)||r&&su(a))&&(c=qo(u))):h=!1}h&&(s.set(u,c),i(c,u,r,o,s),s.delete(u)),An(t,n,c)}function Kr(t,e){var n=t.length;if(n)return e+=e<0?n:0,Wo(e,n)?t[e]:ot}function Yr(t,e,n){var r=-1;return e=m(e.length?e:[ql],N(Co())),A(Vr(t,function(t,n,i){return{criteria:m(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return Pi(t,e,n)})}function Jr(t,e){return Qr(t,e,function(e,n){return Uu(t,n)})}function Qr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=lr(t,s);n(a,s)&&li(o,Mi(s,t),a)}return o}function ti(t){return function(e){return lr(e,t)}}function ei(t,e,n,r){var i=r?C:z,o=-1,s=e.length,a=t;for(t===e&&(e=Bi(e)),n&&(a=m(t,N(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(a,c,u,r))>-1;)a!==t&&qc.call(a,u,1),qc.call(t,u,1);return t}function ni(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Wo(i)?qc.call(t,i,1):yi(t,i)}}return t}function ri(t,e){return t+Uc(th()*(e-t+1))}function ii(t,e,n,r){for(var i=-1,o=Kc(Dc((e-t)/(n||1)),0),s=ac(o);o--;)s[r?o:++i]=t,t+=n;return s}function oi(t,e){var n="";if(!t||e<1||e>Nt)return n;do e%2&&(n+=t),e=Uc(e/2),e&&(t+=t);while(e);return n}function si(t,e){return qh(Jo(t,e,ql),t+"")}function ai(t){return En(il(t))}function ui(t,e){var n=il(t);return rs(n,Fn(e,0,n.length))}function li(t,e,n,r){if(!lu(t))return t;e=Mi(e,t);for(var i=-1,o=e.length,s=o-1,a=t;null!=a&&++i<o;){var u=is(e[i]),l=n;if(i!=s){var c=a[u];l=r?r(c,u,a):ot,l===ot&&(l=lu(c)?c:Wo(e[i+1])?[]:{})}Ln(a,u,l),a=a[u]}return t}function ci(t){return rs(il(t))}function hi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=ac(i);++r<i;)o[r]=t[r+e];return o}function fi(t,e){var n;return yh(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function di(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Bt){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!xu(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return gi(t,e,ql,n)}function gi(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,s=e!==e,a=null===e,u=xu(e),l=e===ot;i<o;){var c=Uc((i+o)/2),h=n(t[c]),f=h!==ot,d=null===h,g=h===h,p=xu(h);if(s)var m=r||g;else m=l?g&&(r||f):a?g&&f&&(r||!d):u?g&&f&&!d&&(r||!p):!d&&!p&&(r?h<=e:h<e);m?i=c+1:o=c}return Yc(o,Ft)}function pi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Ka(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function mi(t){return"number"==typeof t?t:xu(t)?Pt:+t}function vi(t){if("string"==typeof t)return t;if(wf(t))return m(t,vi)+"";if(xu(t))return vh?vh.call(t):"";var e=t+"";return"0"==e&&1/t==-qt?"-0":e}function _i(t,e,n){var r=-1,i=g,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=p;else if(o>=at){var l=e?null:Mh(t);if(l)return K(l);s=!1,i=P,u=new yn}else u=e?[]:a;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(c)}else i(u,h,n)||(u!==a&&u.push(h),a.push(c))}return a}function yi(t,e){return e=Mi(e,t),t=Qo(t,e),null==t||delete t[is(Cs(e))]}function bi(t,e,n,r){return li(t,e,n(lr(t,e)),r)}function xi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?hi(t,r?0:o,r?o+1:i):hi(t,r?o+1:0,r?i:o)}function wi(t,e){var n=t;return n instanceof x&&(n=n.value()),_(e,function(t,e){return e.func.apply(e.thisArg,v([t],e.args))},n)}function Si(t,e,n){var r=t.length;if(r<2)return r?_i(t[0]):[];for(var i=-1,o=ac(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=Gn(o[i]||s,t[a],e,n));return _i(nr(o,1),e,n)}function ki(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:ot;n(s,t[r],a)}return s}function zi(t){return Ja(t)?t:[]}function Ci(t){return"function"==typeof t?t:ql}function Mi(t,e){return wf(t)?t:Bo(t,e)?[t]:Nh(Au(t))}function ji(t,e,n){var r=t.length;return n=n===ot?r:n,!e&&n>=r?t:hi(t,e,n)}function Ei(t,e){if(e)return t.slice();var n=t.length,r=Tc?Tc(n):new t.constructor(n);return t.copy(r),r}function Oi(t){var e=new t.constructor(t.byteLength);return new Oc(e).set(new Oc(t)),e}function Ti(t,e){var n=e?Oi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ai(t,e,n){return _(e?n(G(t),dt):G(t),s,new t.constructor)}function Li(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e}function Ri(t,e,n){return _(e?n(K(t),dt):K(t),a,new t.constructor)}function qi(t){return mh?fc(mh.call(t)):{}}function Ni(t,e){var n=e?Oi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ii(t,e){if(t!==e){var n=t!==ot,r=null===t,i=t===t,o=xu(t),s=e!==ot,a=null===e,u=e===e,l=xu(e);if(!a&&!l&&!o&&t>e||o&&s&&u&&!a&&!l||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}function Pi(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Ii(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}function Wi(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,u=e.length,l=Kc(o-s,0),c=ac(u+l),h=!r;++a<u;)c[a]=e[a];for(;++i<s;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[a++]=t[i++];return c}function Fi(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,u=-1,l=e.length,c=Kc(o-a,0),h=ac(c+l),f=!r;++i<c;)h[i]=t[i];for(var d=i;++u<l;)h[d+u]=e[u];for(;++s<a;)(f||i<o)&&(h[d+n[s]]=t[i++]);return h}function Bi(t,e){var n=-1,r=t.length;for(e||(e=ac(r));++n<r;)e[n]=t[n];return e}function Hi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):ot;u===ot&&(u=t[a]),i?Pn(n,a,u):Ln(n,a,u)}return n}function Di(t,e){return Hi(t,Eh(t),e)}function Ui(t,e){return Hi(t,Oh(t),e)}function Vi(t,e){return function(n,r){var i=wf(n)?l:qn,o=e?e():{};return i(n,t,Co(r,2),o)}}function $i(t){return si(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:ot,s=i>2?n[2]:ot;for(o=t.length>3&&"function"==typeof o?(i--,o):ot,s&&Fo(n[0],n[1],s)&&(o=i<3?ot:o,i=1),e=fc(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}function Gi(t,e){return function(n,r){if(null==n)return n;if(!Ya(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=fc(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}function Xi(t){return function(e,n,r){for(var i=-1,o=fc(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(n(o[u],u,o)===!1)break}return e}}function Zi(t,e,n){function r(){return(this&&this!==ur&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&_t,o=Ji(t);return r}function Ki(t){return function(e){e=Au(e);var n=U(e)?et(e):ot,r=n?n[0]:e.charAt(0),i=n?ji(n,1).join(""):e.slice(1);return r[t]()+i}}function Yi(t){return function(e){return _(Ol(cl(e).replace(Un,"")),t,"")}}function Ji(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=_h(t.prototype),r=t.apply(n,e);return lu(r)?r:n}}function Qi(t,e,n){function r(){for(var o=arguments.length,s=ac(o),a=o,l=zo(r);a--;)s[a]=arguments[a];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:Z(s,l);return o-=c.length,o<n?co(t,e,no,r.placeholder,ot,s,c,ot,ot,n-o):u(this&&this!==ur&&this instanceof r?i:t,this,s)}var i=Ji(t);return r}function to(t){return function(e,n,r){var i=fc(e);if(!Ya(e)){var o=Co(n,3);e=Vu(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:ot}}function eo(t){return xo(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new pc(lt);if(o&&!a&&"wrapper"==ko(s))var a=new i([],!0)}for(r=a?r:n;++r<n;){s=e[r];var u=ko(s),l="wrapper"==u?jh(s):ot;a=l&&Do(l[0])&&l[1]==(zt|xt|St|Ct)&&!l[4].length&&1==l[9]?a[ko(l[0])].apply(a,l[3]):1==s.length&&Do(s)?a[u]():a.thru(s)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&wf(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function no(t,e,n,r,i,o,s,a,u,l){function c(){for(var v=arguments.length,_=ac(v),y=v;y--;)_[y]=arguments[y];if(g)var b=zo(c),x=B(_,b);if(r&&(_=Wi(_,r,i,g)),o&&(_=Fi(_,o,s,g)),v-=x,g&&v<l){var w=Z(_,b);return co(t,e,no,c.placeholder,n,_,w,a,u,l-v)}var S=f?n:this,k=d?S[t]:t;return v=_.length,a?_=ts(_,a):p&&v>1&&_.reverse(),h&&u<v&&(_.length=u),this&&this!==ur&&this instanceof c&&(k=m||Ji(k)),k.apply(S,_)}var h=e&zt,f=e&_t,d=e&yt,g=e&(xt|wt),p=e&Mt,m=d?ot:Ji(t);return c}function ro(t,e){return function(n,r){return jr(n,t,e(r),{})}}function io(t,e){return function(n,r){var i;if(n===ot&&r===ot)return e;if(n!==ot&&(i=n),r!==ot){if(i===ot)return r;"string"==typeof n||"string"==typeof r?(n=vi(n),r=vi(r)):(n=mi(n),r=mi(r)),i=t(n,r)}return i}}function oo(t){return xo(function(e){return e=m(e,N(Co())),si(function(n){var r=this;return t(e,function(t){return u(t,r,n)})})})}function so(t,e){e=e===ot?" ":vi(e);var n=e.length;if(n<2)return n?oi(e,t):e;var r=oi(e,Dc(t/tt(e)));return U(e)?ji(et(r),0,t).join(""):r.slice(0,t)}function ao(t,e,n,r){function i(){for(var e=-1,a=arguments.length,l=-1,c=r.length,h=ac(c+a),f=this&&this!==ur&&this instanceof i?s:t;++l<c;)h[l]=r[l];for(;a--;)h[l++]=arguments[++e];return u(f,o?n:this,h)}var o=e&_t,s=Ji(t);return i}function uo(t){return function(e,n,r){return r&&"number"!=typeof r&&Fo(e,n,r)&&(n=r=ot),e=Cu(e),n===ot?(n=e,e=0):n=Cu(n),r=r===ot?e<n?1:-1:Cu(r),ii(e,n,r,t)}}function lo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Eu(e),n=Eu(n)),t(e,n)}}function co(t,e,n,r,i,o,s,a,u,l){var c=e&xt,h=c?s:ot,f=c?ot:s,d=c?o:ot,g=c?ot:o;e|=c?St:kt,e&=~(c?kt:St),e&bt||(e&=~(_t|yt));var p=[t,e,i,d,h,g,f,a,u,l],m=n.apply(ot,p);
return Do(t)&&Lh(m,p),m.placeholder=r,es(m,t,e)}function ho(t){var e=hc[t];return function(t,n){if(t=Eu(t),n=null==n?0:Yc(Mu(n),292)){var r=(Au(t)+"e").split("e");return r=(Au(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function fo(t){return function(e){var n=Th(e);return n==Jt?G(e):n==oe?Y(e):q(e,t(e))}}function go(t,e,n,r,i,o,s,a){var u=e&yt;if(!u&&"function"!=typeof t)throw new pc(lt);var l=r?r.length:0;if(l||(e&=~(St|kt),r=i=ot),s=s===ot?s:Kc(Mu(s),0),a=a===ot?a:Mu(a),l-=i?i.length:0,e&kt){var c=r,h=i;r=i=ot}var f=u?ot:jh(t),d=[t,e,n,r,i,c,h,o,s,a];if(f&&Zo(d,f),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],a=d[9]=d[9]===ot?u?0:t.length:Kc(d[9]-l,0),!a&&e&(xt|wt)&&(e&=~(xt|wt)),e&&e!=_t)g=e==xt||e==wt?Qi(t,e,a):e!=St&&e!=(_t|St)||i.length?no.apply(ot,d):ao(t,e,n,r);else var g=Zi(t,e,n);return es((f?Sh:Lh)(g,d),t,e)}function po(t,e,n,r){return t===ot||Ka(t,_c[n])&&!xc.call(r,n)?e:t}function mo(t,e,n,r,i,o){return lu(t)&&lu(e)&&(o.set(e,t),Xr(t,e,ot,mo,o),o.delete(e)),t}function vo(t){return _u(t)?ot:t}function _o(t,e,n,r,i,o){var s=n&mt,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,h=!0,f=n&vt?new yn:ot;for(o.set(t,e),o.set(e,t);++c<a;){var d=t[c],g=e[c];if(r)var p=s?r(g,d,c,e,t,o):r(d,g,c,t,e,o);if(p!==ot){if(p)continue;h=!1;break}if(f){if(!b(e,function(t,e){if(!P(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){h=!1;break}}else if(d!==g&&!i(d,g,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function yo(t,e,n,r,i,o,s){switch(n){case fe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case he:return!(t.byteLength!=e.byteLength||!o(new Oc(t),new Oc(e)));case $t:case Gt:case Qt:return Ka(+t,+e);case Zt:return t.name==e.name&&t.message==e.message;case ie:case se:return t==e+"";case Jt:var a=G;case oe:var u=r&mt;if(a||(a=K),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;r|=vt,s.set(t,e);var c=_o(a(t),a(e),r,i,o,s);return s.delete(t),c;case ae:if(mh)return mh.call(t)==mh.call(e)}return!1}function bo(t,e,n,r,i,o){var s=n&mt,a=wo(t),u=a.length;if(u!=wo(e).length&&!s)return!1;for(var l=u;l--;){var c=a[l];if(!(s?c in e:xc.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++l<u;){c=a[l];var g=t[c],p=e[c];if(r)var m=s?r(p,g,c,e,t,o):r(g,p,c,t,e,o);if(!(m===ot?g===p||i(g,p,n,r,o):m)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var v=t.constructor,_=e.constructor;v!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(f=!1)}return o.delete(t),o.delete(e),f}function xo(t){return qh(Jo(t,ot,_s),t+"")}function wo(t){return cr(t,Vu,Eh)}function So(t){return cr(t,$u,Oh)}function ko(t){for(var e=t.name+"",n=lh[e],r=xc.call(lh,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function zo(t){return(xc.call(n,"placeholder")?n:t).placeholder}function Co(){var t=n.iteratee||Nl;return t=t===Nl?Br:t,arguments.length?t(arguments[0],arguments[1]):t}function Mo(t,e){var n=t.__data__;return Ho(e)?n["string"==typeof e?"string":"hash"]:n.map}function jo(t){for(var e=Vu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$o(i)]}return e}function Eo(t,e){var n=D(t,e);return Ir(n)?n:ot}function Oo(t){var e=xc.call(t,Pc),n=t[Pc];try{t[Pc]=ot;var r=!0}catch(t){}var i=kc.call(t);return r&&(e?t[Pc]=n:delete t[Pc]),i}function To(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Yc(e,t+s);break;case"takeRight":t=Kc(t,e-s)}}return{start:t,end:e}}function Ao(t){var e=t.match(He);return e?e[1].split(De):[]}function Lo(t,e,n){e=Mi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=is(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&uu(i)&&Wo(s,i)&&(wf(t)||xf(t)))}function Ro(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&xc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function qo(t){return"function"!=typeof t.constructor||Vo(t)?{}:_h(Ac(t))}function No(t,e,n,r){var i=t.constructor;switch(e){case he:return Oi(t);case $t:case Gt:return new i(+t);case fe:return Ti(t,r);case de:case ge:case pe:case me:case ve:case _e:case ye:case be:case xe:return Ni(t,r);case Jt:return Ai(t,r,n);case Qt:case se:return new i(t);case ie:return Li(t);case oe:return Ri(t,r,n);case ae:return qi(t)}}function Io(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Be,"{\n/* [wrapped with "+e+"] */\n")}function Po(t){return wf(t)||xf(t)||!!(Nc&&t&&t[Nc])}function Wo(t,e){return e=null==e?Nt:e,!!e&&("number"==typeof t||Je.test(t))&&t>-1&&t%1==0&&t<e}function Fo(t,e,n){if(!lu(n))return!1;var r="undefined"==typeof e?"undefined":o(e);return!!("number"==r?Ya(n)&&Wo(e,n.length):"string"==r&&e in n)&&Ka(n[e],t)}function Bo(t,e){if(wf(t))return!1;var n="undefined"==typeof t?"undefined":o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!xu(t))||Le.test(t)||!Ae.test(t)||null!=e&&t in fc(e)}function Ho(t){var e="undefined"==typeof t?"undefined":o(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Do(t){var e=ko(t),r=n[e];if("function"!=typeof r||!(e in x.prototype))return!1;if(t===r)return!0;var i=jh(r);return!!i&&t===i[0]}function Uo(t){return!!Sc&&Sc in t}function Vo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_c)}function $o(t){return t===t&&!lu(t)}function Go(t,e){return function(n){return null!=n&&n[t]===e&&(e!==ot||t in fc(n))}}function Xo(t){var e=Na(t,function(t){return n.size===ht&&n.clear(),t}),n=e.cache;return e}function Zo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(_t|yt|zt),s=r==zt&&n==xt||r==zt&&n==Ct&&t[7].length<=e[8]||r==(zt|Ct)&&e[7].length<=e[8]&&n==xt;if(!o&&!s)return t;r&_t&&(t[2]=e[2],i|=n&_t?0:bt);var a=e[3];if(a){var u=t[3];t[3]=u?Wi(u,a,e[4]):a,t[4]=u?Z(t[3],ft):e[4]}return a=e[5],a&&(u=t[5],t[5]=u?Fi(u,a,e[6]):a,t[6]=u?Z(t[5],ft):e[6]),a=e[7],a&&(t[7]=a),r&zt&&(t[8]=null==t[8]?e[8]:Yc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Ko(t){var e=[];if(null!=t)for(var n in fc(t))e.push(n);return e}function Yo(t){return kc.call(t)}function Jo(t,e,n){return e=Kc(e===ot?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Kc(r.length-e,0),s=ac(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=ac(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),u(t,this,a)}}function Qo(t,e){return e.length<2?t:lr(t,hi(e,0,-1))}function ts(t,e){for(var n=t.length,r=Yc(e.length,n),i=Bi(t);r--;){var o=e[r];t[r]=Wo(o,n)?i[o]:ot}return t}function es(t,e,n){var r=e+"";return qh(t,Io(r,ss(Ao(r),n)))}function ns(t){var e=0,n=0;return function(){var r=Jc(),i=Tt-(r-n);if(n=r,i>0){if(++e>=Ot)return arguments[0]}else e=0;return t.apply(ot,arguments)}}function rs(t,e){var n=-1,r=t.length,i=r-1;for(e=e===ot?r:e;++n<e;){var o=ri(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}function is(t){if("string"==typeof t||xu(t))return t;var e=t+"";return"0"==e&&1/t==-qt?"-0":e}function os(t){if(null!=t){try{return bc.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ss(t,e){return c(Ht,function(n){var r="_."+n[0];e&n[1]&&!g(t,r)&&t.push(r)}),t.sort()}function as(t){if(t instanceof x)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Bi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function us(t,e,n){e=(n?Fo(t,e,n):e===ot)?1:Kc(Mu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,s=ac(Dc(r/e));i<r;)s[o++]=hi(t,i,i+=e);return s}function ls(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function cs(){var t=arguments.length;if(!t)return[];for(var e=ac(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return v(wf(n)?Bi(n):[n],nr(e,1))}function hs(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===ot?1:Mu(e),hi(t,e<0?0:e,r)):[]}function fs(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===ot?1:Mu(e),e=r-e,hi(t,0,e<0?0:e)):[]}function ds(t,e){return t&&t.length?xi(t,Co(e,3),!0,!0):[]}function gs(t,e){return t&&t.length?xi(t,Co(e,3),!0):[]}function ps(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Fo(t,e,n)&&(n=0,r=i),tr(t,e,n,r)):[]}function ms(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Mu(n);return i<0&&(i=Kc(r+i,0)),k(t,Co(e,3),i)}function vs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==ot&&(i=Mu(n),i=n<0?Kc(r+i,0):Yc(i,r-1)),k(t,Co(e,3),i,!0)}function _s(t){return(null==t?0:t.length)?nr(t,1):[]}function ys(t){return(null==t?0:t.length)?nr(t,qt):[]}function bs(t,e){return(null==t?0:t.length)?(e=e===ot?1:Mu(e),nr(t,e)):[]}function xs(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ws(t){return t&&t.length?t[0]:ot}function Ss(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Mu(n);return i<0&&(i=Kc(r+i,0)),z(t,e,i)}function ks(t){return(null==t?0:t.length)?hi(t,0,-1):[]}function zs(t,e){return null==t?"":Xc.call(t,e)}function Cs(t){var e=null==t?0:t.length;return e?t[e-1]:ot}function Ms(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==ot&&(i=Mu(n),i=i<0?Kc(r+i,0):Yc(i,r-1)),e===e?Q(t,e,i):k(t,M,i,!0)}function js(t,e){return t&&t.length?Kr(t,Mu(e)):ot}function Es(t,e){return t&&t.length&&e&&e.length?ei(t,e):t}function Os(t,e,n){return t&&t.length&&e&&e.length?ei(t,e,Co(n,2)):t}function Ts(t,e,n){return t&&t.length&&e&&e.length?ei(t,e,ot,n):t}function As(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Co(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return ni(t,i),n}function Ls(t){return null==t?t:eh.call(t)}function Rs(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Fo(t,e,n)?(e=0,n=r):(e=null==e?0:Mu(e),n=n===ot?r:Mu(n)),hi(t,e,n)):[]}function qs(t,e){return di(t,e)}function Ns(t,e,n){return gi(t,e,Co(n,2))}function Is(t,e){var n=null==t?0:t.length;if(n){var r=di(t,e);if(r<n&&Ka(t[r],e))return r}return-1}function Ps(t,e){return di(t,e,!0)}function Ws(t,e,n){return gi(t,e,Co(n,2),!0)}function Fs(t,e){if(null==t?0:t.length){var n=di(t,e,!0)-1;if(Ka(t[n],e))return n}return-1}function Bs(t){return t&&t.length?pi(t):[]}function Hs(t,e){return t&&t.length?pi(t,Co(e,2)):[]}function Ds(t){var e=null==t?0:t.length;return e?hi(t,1,e):[]}function Us(t,e,n){return t&&t.length?(e=n||e===ot?1:Mu(e),hi(t,0,e<0?0:e)):[]}function Vs(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===ot?1:Mu(e),e=r-e,hi(t,e<0?0:e,r)):[]}function $s(t,e){return t&&t.length?xi(t,Co(e,3),!1,!0):[]}function Gs(t,e){return t&&t.length?xi(t,Co(e,3)):[]}function Xs(t){return t&&t.length?_i(t):[]}function Zs(t,e){return t&&t.length?_i(t,Co(e,2)):[]}function Ks(t,e){return e="function"==typeof e?e:ot,t&&t.length?_i(t,ot,e):[]}function Ys(t){if(!t||!t.length)return[];var e=0;return t=d(t,function(t){if(Ja(t))return e=Kc(t.length,e),!0}),R(e,function(e){return m(t,E(e))})}function Js(t,e){if(!t||!t.length)return[];var n=Ys(t);return null==e?n:m(n,function(t){return u(e,ot,t)})}function Qs(t,e){return ki(t||[],e||[],Ln)}function ta(t,e){return ki(t||[],e||[],li)}function ea(t){var e=n(t);return e.__chain__=!0,e}function na(t,e){return e(t),t}function ra(t,e){return e(t)}function ia(){return ea(this)}function oa(){return new i(this.value(),this.__chain__)}function sa(){this.__values__===ot&&(this.__values__=zu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?ot:this.__values__[this.__index__++]}}function aa(){return this}function ua(t){for(var e,n=this;n instanceof r;){var i=as(n);i.__index__=0,i.__values__=ot,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function la(){var t=this.__wrapped__;if(t instanceof x){var e=t;return this.__actions__.length&&(e=new x(this)),e=e.reverse(),e.__actions__.push({func:ra,args:[Ls],thisArg:ot}),new i(e,this.__chain__)}return this.thru(Ls)}function ca(){return wi(this.__wrapped__,this.__actions__)}function ha(t,e,n){var r=wf(t)?f:Xn;return n&&Fo(t,e,n)&&(e=ot),r(t,Co(e,3))}function fa(t,e){return(wf(t)?d:er)(t,Co(e,3))}function da(t,e){return nr(ya(t,e),1)}function ga(t,e){return nr(ya(t,e),qt)}function pa(t,e,n){return n=n===ot?1:Mu(n),nr(ya(t,e),n)}function ma(t,e){return(wf(t)?c:yh)(t,Co(e,3))}function va(t,e){return(wf(t)?h:bh)(t,Co(e,3))}function _a(t,e,n,r){t=Ya(t)?t:il(t),n=n&&!r?Mu(n):0;var i=t.length;return n<0&&(n=Kc(i+n,0)),bu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&z(t,e,n)>-1}function ya(t,e){return(wf(t)?m:Vr)(t,Co(e,3))}function ba(t,e,n,r){return null==t?[]:(wf(e)||(e=null==e?[]:[e]),n=r?ot:n,wf(n)||(n=null==n?[]:[n]),Yr(t,e,n))}function xa(t,e,n){var r=wf(t)?_:T,i=arguments.length<3;return r(t,Co(e,4),n,i,yh)}function wa(t,e,n){var r=wf(t)?y:T,i=arguments.length<3;return r(t,Co(e,4),n,i,bh)}function Sa(t,e){return(wf(t)?d:er)(t,Ia(Co(e,3)))}function ka(t){return(wf(t)?En:ai)(t)}function za(t,e,n){return e=(n?Fo(t,e,n):e===ot)?1:Mu(e),(wf(t)?On:ui)(t,e)}function Ca(t){return(wf(t)?Tn:ci)(t)}function Ma(t){if(null==t)return 0;if(Ya(t))return bu(t)?tt(t):t.length;var e=Th(t);return e==Jt||e==oe?t.size:Hr(t).length}function ja(t,e,n){var r=wf(t)?b:fi;return n&&Fo(t,e,n)&&(e=ot),r(t,Co(e,3))}function Ea(t,e){if("function"!=typeof e)throw new pc(lt);return t=Mu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Oa(t,e,n){return e=n?ot:e,e=t&&null==e?t.length:e,go(t,zt,ot,ot,ot,ot,e)}function Ta(t,e){var n;if("function"!=typeof e)throw new pc(lt);return t=Mu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=ot),n}}function Aa(t,e,n){e=n?ot:e;var r=go(t,xt,ot,ot,ot,ot,ot,e);return r.placeholder=Aa.placeholder,r}function La(t,e,n){e=n?ot:e;var r=go(t,wt,ot,ot,ot,ot,ot,e);return r.placeholder=La.placeholder,r}function Ra(t,e,n){function r(e){var n=f,r=d;return f=d=ot,_=e,p=t.apply(r,n)}function i(t){return _=t,m=Rh(a,e),y?r(t):p}function o(t){var n=t-v,r=t-_,i=e-n;return b?Yc(i,g-r):i}function s(t){var n=t-v,r=t-_;return v===ot||n>=e||n<0||b&&r>=g}function a(){var t=cf();return s(t)?u(t):void(m=Rh(a,o(t)))}function u(t){return m=ot,x&&f?r(t):(f=d=ot,p)}function l(){m!==ot&&Ch(m),_=0,f=v=d=m=ot}function c(){return m===ot?p:u(cf())}function h(){var t=cf(),n=s(t);if(f=arguments,d=this,v=t,n){if(m===ot)return i(v);if(b)return m=Rh(a,e),r(v)}return m===ot&&(m=Rh(a,e)),p}var f,d,g,p,m,v,_=0,y=!1,b=!1,x=!0;if("function"!=typeof t)throw new pc(lt);return e=Eu(e)||0,lu(n)&&(y=!!n.leading,b="maxWait"in n,g=b?Kc(Eu(n.maxWait)||0,e):g,x="trailing"in n?!!n.trailing:x),h.cancel=l,h.flush=c,h}function qa(t){return go(t,Mt)}function Na(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new pc(lt);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Na.Cache||dn),n}function Ia(t){if("function"!=typeof t)throw new pc(lt);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Pa(t){return Ta(2,t)}function Wa(t,e){if("function"!=typeof t)throw new pc(lt);return e=e===ot?e:Mu(e),si(t,e)}function Fa(t,e){if("function"!=typeof t)throw new pc(lt);return e=null==e?0:Kc(Mu(e),0),si(function(n){var r=n[e],i=ji(n,0,e);return r&&v(i,r),u(t,this,i)})}function Ba(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new pc(lt);return lu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ra(t,e,{leading:r,maxWait:e,trailing:i})}function Ha(t){return Oa(t,1)}function Da(t,e){return mf(Ci(e),t)}function Ua(){if(!arguments.length)return[];var t=arguments[0];return wf(t)?t:[t]}function Va(t){return Bn(t,pt)}function $a(t,e){return e="function"==typeof e?e:ot,Bn(t,pt,e)}function Ga(t){return Bn(t,dt|pt)}function Xa(t,e){return e="function"==typeof e?e:ot,Bn(t,dt|pt,e)}function Za(t,e){return null==e||Dn(t,e,Vu(e))}function Ka(t,e){return t===e||t!==t&&e!==e}function Ya(t){return null!=t&&uu(t.length)&&!su(t)}function Ja(t){return cu(t)&&Ya(t)}function Qa(t){return t===!0||t===!1||cu(t)&&fr(t)==$t}function tu(t){return cu(t)&&1===t.nodeType&&!_u(t)}function eu(t){if(null==t)return!0;if(Ya(t)&&(wf(t)||"string"==typeof t||"function"==typeof t.splice||kf(t)||Ef(t)||xf(t)))return!t.length;var e=Th(t);if(e==Jt||e==oe)return!t.size;if(Vo(t))return!Hr(t).length;for(var n in t)if(xc.call(t,n))return!1;return!0}function nu(t,e){return Lr(t,e)}function ru(t,e,n){n="function"==typeof n?n:ot;var r=n?n(t,e):ot;return r===ot?Lr(t,e,ot,n):!!r}function iu(t){if(!cu(t))return!1;var e=fr(t);return e==Zt||e==Xt||"string"==typeof t.message&&"string"==typeof t.name&&!_u(t)}function ou(t){return"number"==typeof t&&Gc(t)}function su(t){if(!lu(t))return!1;var e=fr(t);return e==Kt||e==Yt||e==Vt||e==re}function au(t){return"number"==typeof t&&t==Mu(t)}function uu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Nt}function lu(t){var e="undefined"==typeof t?"undefined":o(t);return null!=t&&("object"==e||"function"==e)}function cu(t){return null!=t&&"object"==("undefined"==typeof t?"undefined":o(t))}function hu(t,e){return t===e||Nr(t,e,jo(e))}function fu(t,e,n){return n="function"==typeof n?n:ot,Nr(t,e,jo(e),n)}function du(t){return vu(t)&&t!=+t}function gu(t){if(Ah(t))throw new lc(ut);return Ir(t)}function pu(t){return null===t}function mu(t){return null==t}function vu(t){return"number"==typeof t||cu(t)&&fr(t)==Qt}function _u(t){if(!cu(t)||fr(t)!=ee)return!1;var e=Ac(t);if(null===e)return!0;var n=xc.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&bc.call(n)==zc}function yu(t){return au(t)&&t>=-Nt&&t<=Nt}function bu(t){return"string"==typeof t||!wf(t)&&cu(t)&&fr(t)==se}function xu(t){return"symbol"==("undefined"==typeof t?"undefined":o(t))||cu(t)&&fr(t)==ae}function wu(t){return t===ot}function Su(t){return cu(t)&&Th(t)==le}function ku(t){return cu(t)&&fr(t)==ce}function zu(t){if(!t)return[];if(Ya(t))return bu(t)?et(t):Bi(t);if(Ic&&t[Ic])return $(t[Ic]());var e=Th(t);return(e==Jt?G:e==oe?K:il)(t)}function Cu(t){return t?(t=Eu(t),t===qt||t===-qt?(t<0?-1:1)*It:t===t?t:0):0===t?t:0}function Mu(t){var e=Cu(t),n=e%1;return e===e?n?e-n:e:0}function ju(t){return t?Fn(Mu(t),0,Wt):0}function Eu(t){if("number"==typeof t)return t;if(xu(t))return Pt;if(lu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=lu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Pe,"");var n=Ze.test(t);return n||Ye.test(t)?or(t.slice(2),n?2:8):Xe.test(t)?Pt:+t}function Ou(t){return Hi(t,$u(t))}function Tu(t){return t?Fn(Mu(t),-Nt,Nt):0===t?t:0}function Au(t){return null==t?"":vi(t)}function Lu(t,e){var n=_h(t);return null==e?n:Nn(n,e)}function Ru(t,e){return S(t,Co(e,3),rr)}function qu(t,e){return S(t,Co(e,3),sr)}function Nu(t,e){return null==t?t:xh(t,Co(e,3),$u)}function Iu(t,e){return null==t?t:wh(t,Co(e,3),$u)}function Pu(t,e){return t&&rr(t,Co(e,3))}function Wu(t,e){return t&&sr(t,Co(e,3))}function Fu(t){return null==t?[]:ar(t,Vu(t))}function Bu(t){return null==t?[]:ar(t,$u(t))}function Hu(t,e,n){var r=null==t?ot:lr(t,e);return r===ot?n:r}function Du(t,e){return null!=t&&Lo(t,e,br)}function Uu(t,e){return null!=t&&Lo(t,e,kr)}function Vu(t){return Ya(t)?jn(t):Hr(t)}function $u(t){return Ya(t)?jn(t,!0):Dr(t)}function Gu(t,e){var n={};return e=Co(e,3),rr(t,function(t,r,i){Pn(n,e(t,r,i),t)}),n}function Xu(t,e){var n={};return e=Co(e,3),rr(t,function(t,r,i){Pn(n,r,e(t,r,i))}),n}function Zu(t,e){return Ku(t,Ia(Co(e)))}function Ku(t,e){if(null==t)return{};var n=m(So(t),function(t){return[t]});return e=Co(e),Qr(t,n,function(t,n){return e(t,n[0])})}function Yu(t,e,n){e=Mi(e,t);var r=-1,i=e.length;for(i||(i=1,t=ot);++r<i;){var o=null==t?ot:t[is(e[r])];o===ot&&(r=i,o=n),t=su(o)?o.call(t):o}return t}function Ju(t,e,n){return null==t?t:li(t,e,n)}function Qu(t,e,n,r){return r="function"==typeof r?r:ot,null==t?t:li(t,e,n,r)}function tl(t,e,n){var r=wf(t),i=r||kf(t)||Ef(t);if(e=Co(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:lu(t)&&su(o)?_h(Ac(t)):{}}return(i?c:rr)(t,function(t,r,i){return e(n,t,r,i)}),n}function el(t,e){return null==t||yi(t,e)}function nl(t,e,n){return null==t?t:bi(t,e,Ci(n))}function rl(t,e,n,r){return r="function"==typeof r?r:ot,null==t?t:bi(t,e,Ci(n),r)}function il(t){return null==t?[]:I(t,Vu(t))}function ol(t){return null==t?[]:I(t,$u(t))}function sl(t,e,n){return n===ot&&(n=e,e=ot),n!==ot&&(n=Eu(n),n=n===n?n:0),e!==ot&&(e=Eu(e),e=e===e?e:0),Fn(Eu(t),e,n)}function al(t,e,n){return e=Cu(e),n===ot?(n=e,e=0):n=Cu(n),t=Eu(t),Cr(t,e,n)}function ul(t,e,n){if(n&&"boolean"!=typeof n&&Fo(t,e,n)&&(e=n=ot),n===ot&&("boolean"==typeof e?(n=e,e=ot):"boolean"==typeof t&&(n=t,t=ot)),t===ot&&e===ot?(t=0,e=1):(t=Cu(t),e===ot?(e=t,t=0):e=Cu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=th();return Yc(t+i*(e-t+ir("1e-"+((i+"").length-1))),e)}return ri(t,e)}function ll(t){return ed(Au(t).toLowerCase())}function cl(t){return t=Au(t),t&&t.replace(Qe,xr).replace(Vn,"")}function hl(t,e,n){t=Au(t),e=vi(e);var r=t.length;n=n===ot?r:Fn(Mu(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function fl(t){return t=Au(t),t&&je.test(t)?t.replace(Ce,wr):t}function dl(t){return t=Au(t),t&&Ie.test(t)?t.replace(Ne,"\\$&"):t}function gl(t,e,n){t=Au(t),e=Mu(e);var r=e?tt(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return so(Uc(i),n)+t+so(Dc(i),n)}function pl(t,e,n){t=Au(t),e=Mu(e);var r=e?tt(t):0;return e&&r<e?t+so(e-r,n):t}function ml(t,e,n){t=Au(t),e=Mu(e);var r=e?tt(t):0;return e&&r<e?so(e-r,n)+t:t}function vl(t,e,n){return n||null==e?e=0:e&&(e=+e),Qc(Au(t).replace(We,""),e||0)}function _l(t,e,n){return e=(n?Fo(t,e,n):e===ot)?1:Mu(e),oi(Au(t),e)}function yl(){var t=arguments,e=Au(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function bl(t,e,n){return n&&"number"!=typeof n&&Fo(t,e,n)&&(e=n=ot),(n=n===ot?Wt:n>>>0)?(t=Au(t),t&&("string"==typeof e||null!=e&&!Mf(e))&&(e=vi(e),!e&&U(t))?ji(et(t),0,n):t.split(e,n)):[]}function xl(t,e,n){return t=Au(t),n=null==n?0:Fn(Mu(n),0,t.length),e=vi(e),t.slice(n,n+e.length)==e}function wl(t,e,r){var i=n.templateSettings;r&&Fo(t,e,r)&&(e=ot),t=Au(t),e=Rf({},e,i,po);var o,s,a=Rf({},e.imports,i.imports,po),u=Vu(a),l=I(a,u),c=0,h=e.interpolate||tn,f="__p += '",d=dc((e.escape||tn).source+"|"+h.source+"|"+(h===Te?$e:tn).source+"|"+(e.evaluate||tn).source+"|$","g"),g="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Yn+"]")+"\n";t.replace(d,function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(c,u).replace(en,H),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),f+="';\n";var p=e.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(we,""):f).replace(Se,"$1").replace(ke,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=nd(function(){return cc(u,g+"return "+f).apply(ot,l)});if(m.source=f,iu(m))throw m;return m}function Sl(t){return Au(t).toLowerCase()}function kl(t){return Au(t).toUpperCase()}function zl(t,e,n){if(t=Au(t),t&&(n||e===ot))return t.replace(Pe,"");if(!t||!(e=vi(e)))return t;var r=et(t),i=et(e);return ji(r,W(r,i),F(r,i)+1).join("")}function Cl(t,e,n){if(t=Au(t),t&&(n||e===ot))return t.replace(Fe,"");if(!t||!(e=vi(e)))return t;var r=et(t);return ji(r,0,F(r,et(e))+1).join("")}function Ml(t,e,n){if(t=Au(t),t&&(n||e===ot))return t.replace(We,"");if(!t||!(e=vi(e)))return t;var r=et(t);return ji(r,W(r,et(e))).join("")}function jl(t,e){var n=jt,r=Et;if(lu(e)){var i="separator"in e?e.separator:i;n="length"in e?Mu(e.length):n,r="omission"in e?vi(e.omission):r}t=Au(t);var o=t.length;if(U(t)){var s=et(t);o=s.length}if(n>=o)return t;var a=n-tt(r);if(a<1)return r;var u=s?ji(s,0,a).join(""):t.slice(0,a);if(i===ot)return u+r;if(s&&(a+=u.length-a),Mf(i)){if(t.slice(a).search(i)){var l,c=u;for(i.global||(i=dc(i.source,Au(Ge.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,h===ot?a:h)}}else if(t.indexOf(vi(i),a)!=a){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function El(t){return t=Au(t),t&&Me.test(t)?t.replace(ze,Sr):t}function Ol(t,e,n){return t=Au(t),e=n?ot:e,e===ot?V(t)?it(t):w(t):t.match(e)||[]}function Tl(t){var e=null==t?0:t.length,n=Co();return t=e?m(t,function(t){if("function"!=typeof t[1])throw new pc(lt);return[n(t[0]),t[1]]}):[],si(function(n){for(var r=-1;++r<e;){var i=t[r];if(u(i[0],this,n))return u(i[1],this,n)}})}function Al(t){return Hn(Bn(t,dt))}function Ll(t){return function(){return t}}function Rl(t,e){return null==t||t!==t?e:t}function ql(t){return t}function Nl(t){return Br("function"==typeof t?t:Bn(t,dt))}function Il(t){return $r(Bn(t,dt))}function Pl(t,e){return Gr(t,Bn(e,dt))}function Wl(t,e,n){var r=Vu(e),i=ar(e,r);null!=n||lu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=ar(e,Vu(e)));var o=!(lu(n)&&"chain"in n&&!n.chain),s=su(t);return c(i,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Bi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,v([this.value()],arguments))})}),t}function Fl(){return ur._===this&&(ur._=Cc),this}function Bl(){}function Hl(t){return t=Mu(t),si(function(e){return Kr(e,t)})}function Dl(t){return Bo(t)?E(is(t)):ti(t)}function Ul(t){return function(e){return null==t?ot:lr(t,e)}}function Vl(){return[]}function $l(){return!1}function Gl(){return{}}function Xl(){return""}function Zl(){return!0}function Kl(t,e){if(t=Mu(t),t<1||t>Nt)return[];var n=Wt,r=Yc(t,Wt);e=Co(e),t-=Wt;for(var i=R(r,e);++n<t;)e(n);return i}function Yl(t){return wf(t)?m(t,is):xu(t)?[t]:Bi(Nh(Au(t)))}function Jl(t){var e=++wc;return Au(t)+e}function Ql(t){return t&&t.length?Zn(t,ql,dr):ot}function tc(t,e){return t&&t.length?Zn(t,Co(e,2),dr):ot}function ec(t){return j(t,ql)}function nc(t,e){return j(t,Co(e,2))}function rc(t){return t&&t.length?Zn(t,ql,Ur):ot}function ic(t,e){return t&&t.length?Zn(t,Co(e,2),Ur):ot}function oc(t){return t&&t.length?L(t,ql):0}function sc(t,e){return t&&t.length?L(t,Co(e,2)):0}e=null==e?ur:zr.defaults(ur.Object(),e,zr.pick(ur,Kn));var ac=e.Array,uc=e.Date,lc=e.Error,cc=e.Function,hc=e.Math,fc=e.Object,dc=e.RegExp,gc=e.String,pc=e.TypeError,mc=ac.prototype,vc=cc.prototype,_c=fc.prototype,yc=e["__core-js_shared__"],bc=vc.toString,xc=_c.hasOwnProperty,wc=0,Sc=function(){var t=/[^.]+$/.exec(yc&&yc.keys&&yc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),kc=_c.toString,zc=bc.call(fc),Cc=ur._,Mc=dc("^"+bc.call(xc).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jc=hr?e.Buffer:ot,Ec=e.Symbol,Oc=e.Uint8Array,Tc=jc?jc.allocUnsafe:ot,Ac=X(fc.getPrototypeOf,fc),Lc=fc.create,Rc=_c.propertyIsEnumerable,qc=mc.splice,Nc=Ec?Ec.isConcatSpreadable:ot,Ic=Ec?Ec.iterator:ot,Pc=Ec?Ec.toStringTag:ot,Wc=function(){try{var t=Eo(fc,"defineProperty");return t({},"",{}),t}catch(t){}}(),Fc=e.clearTimeout!==ur.clearTimeout&&e.clearTimeout,Bc=uc&&uc.now!==ur.Date.now&&uc.now,Hc=e.setTimeout!==ur.setTimeout&&e.setTimeout,Dc=hc.ceil,Uc=hc.floor,Vc=fc.getOwnPropertySymbols,$c=jc?jc.isBuffer:ot,Gc=e.isFinite,Xc=mc.join,Zc=X(fc.keys,fc),Kc=hc.max,Yc=hc.min,Jc=uc.now,Qc=e.parseInt,th=hc.random,eh=mc.reverse,nh=Eo(e,"DataView"),rh=Eo(e,"Map"),ih=Eo(e,"Promise"),oh=Eo(e,"Set"),sh=Eo(e,"WeakMap"),ah=Eo(fc,"create"),uh=sh&&new sh,lh={},ch=os(nh),hh=os(rh),fh=os(ih),dh=os(oh),gh=os(sh),ph=Ec?Ec.prototype:ot,mh=ph?ph.valueOf:ot,vh=ph?ph.toString:ot,_h=function(){function t(){}return function(e){if(!lu(e))return{};if(Lc)return Lc(e);t.prototype=e;var n=new t;return t.prototype=ot,n}}();n.templateSettings={escape:Ee,evaluate:Oe,interpolate:Te,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=_h(r.prototype),i.prototype.constructor=i,x.prototype=_h(r.prototype),x.prototype.constructor=x,rt.prototype.clear=Ue,rt.prototype.delete=nn,rt.prototype.get=rn,rt.prototype.has=on,rt.prototype.set=sn,an.prototype.clear=un,an.prototype.delete=ln,an.prototype.get=cn,an.prototype.has=hn,an.prototype.set=fn,dn.prototype.clear=gn,dn.prototype.delete=pn,dn.prototype.get=mn,dn.prototype.has=vn,dn.prototype.set=_n,yn.prototype.add=yn.prototype.push=bn,yn.prototype.has=xn,wn.prototype.clear=Sn,wn.prototype.delete=kn,wn.prototype.get=zn,wn.prototype.has=Cn,wn.prototype.set=Mn;var yh=Gi(rr),bh=Gi(sr,!0),xh=Xi(),wh=Xi(!0),Sh=uh?function(t,e){return uh.set(t,e),t}:ql,kh=Wc?function(t,e){return Wc(t,"toString",{configurable:!0,enumerable:!1,value:Ll(e),writable:!0})}:ql,zh=si,Ch=Fc||function(t){return ur.clearTimeout(t)},Mh=oh&&1/K(new oh([,-0]))[1]==qt?function(t){return new oh(t)}:Bl,jh=uh?function(t){return uh.get(t)}:Bl,Eh=Vc?function(t){return null==t?[]:(t=fc(t),d(Vc(t),function(e){return Rc.call(t,e)}))}:Vl,Oh=Vc?function(t){for(var e=[];t;)v(e,Eh(t)),t=Ac(t);return e}:Vl,Th=fr;(nh&&Th(new nh(new ArrayBuffer(1)))!=fe||rh&&Th(new rh)!=Jt||ih&&Th(ih.resolve())!=ne||oh&&Th(new oh)!=oe||sh&&Th(new sh)!=le)&&(Th=function(t){var e=fr(t),n=e==ee?t.constructor:ot,r=n?os(n):"";if(r)switch(r){case ch:return fe;case hh:return Jt;case fh:return ne;case dh:return oe;case gh:return le}return e});var Ah=yc?su:$l,Lh=ns(Sh),Rh=Hc||function(t,e){return ur.setTimeout(t,e)},qh=ns(kh),Nh=Xo(function(t){var e=[];return Re.test(t)&&e.push(""),t.replace(qe,function(t,n,r,i){e.push(r?i.replace(Ve,"$1"):n||t)}),e}),Ih=si(function(t,e){return Ja(t)?Gn(t,nr(e,1,Ja,!0)):[]}),Ph=si(function(t,e){var n=Cs(e);return Ja(n)&&(n=ot),Ja(t)?Gn(t,nr(e,1,Ja,!0),Co(n,2)):[]}),Wh=si(function(t,e){var n=Cs(e);return Ja(n)&&(n=ot),Ja(t)?Gn(t,nr(e,1,Ja,!0),ot,n):[]}),Fh=si(function(t){var e=m(t,zi);return e.length&&e[0]===t[0]?Mr(e):[]}),Bh=si(function(t){var e=Cs(t),n=m(t,zi);return e===Cs(n)?e=ot:n.pop(),n.length&&n[0]===t[0]?Mr(n,Co(e,2)):[]}),Hh=si(function(t){var e=Cs(t),n=m(t,zi);return e="function"==typeof e?e:ot,e&&n.pop(),n.length&&n[0]===t[0]?Mr(n,ot,e):[]}),Dh=si(Es),Uh=xo(function(t,e){var n=null==t?0:t.length,r=Wn(t,e);return ni(t,m(e,function(t){return Wo(t,n)?+t:t}).sort(Ii)),r}),Vh=si(function(t){return _i(nr(t,1,Ja,!0))}),$h=si(function(t){var e=Cs(t);return Ja(e)&&(e=ot),_i(nr(t,1,Ja,!0),Co(e,2))}),Gh=si(function(t){var e=Cs(t);return e="function"==typeof e?e:ot,_i(nr(t,1,Ja,!0),ot,e)}),Xh=si(function(t,e){return Ja(t)?Gn(t,e):[]}),Zh=si(function(t){return Si(d(t,Ja))}),Kh=si(function(t){var e=Cs(t);return Ja(e)&&(e=ot),Si(d(t,Ja),Co(e,2))}),Yh=si(function(t){var e=Cs(t);return e="function"==typeof e?e:ot,Si(d(t,Ja),ot,e)}),Jh=si(Ys),Qh=si(function(t){var e=t.length,n=e>1?t[e-1]:ot;return n="function"==typeof n?(t.pop(),n):ot,Js(t,n)}),tf=xo(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return Wn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof x&&Wo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:ra,args:[o],thisArg:ot}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(ot),t})):this.thru(o)}),ef=Vi(function(t,e,n){xc.call(t,n)?++t[n]:Pn(t,n,1)}),nf=to(ms),rf=to(vs),of=Vi(function(t,e,n){xc.call(t,n)?t[n].push(e):Pn(t,n,[e])}),sf=si(function(t,e,n){var r=-1,i="function"==typeof e,o=Ya(t)?ac(t.length):[];return yh(t,function(t){o[++r]=i?u(e,t,n):Er(t,e,n)}),o}),af=Vi(function(t,e,n){Pn(t,n,e)}),uf=Vi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),lf=si(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Fo(t,e[0],e[1])?e=[]:n>2&&Fo(e[0],e[1],e[2])&&(e=[e[0]]),Yr(t,nr(e,1),[])}),cf=Bc||function(){return ur.Date.now()},hf=si(function(t,e,n){var r=_t;if(n.length){var i=Z(n,zo(hf));r|=St}return go(t,r,e,n,i)}),ff=si(function(t,e,n){var r=_t|yt;if(n.length){var i=Z(n,zo(ff));r|=St}return go(e,r,t,n,i)}),df=si(function(t,e){return $n(t,1,e)}),gf=si(function(t,e,n){return $n(t,Eu(e)||0,n)});Na.Cache=dn;var pf=zh(function(t,e){e=1==e.length&&wf(e[0])?m(e[0],N(Co())):m(nr(e,1),N(Co()));
var n=e.length;return si(function(r){for(var i=-1,o=Yc(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return u(t,this,r)})}),mf=si(function(t,e){return go(t,St,ot,e,Z(e,zo(mf)))}),vf=si(function(t,e){return go(t,kt,ot,e,Z(e,zo(vf)))}),_f=xo(function(t,e){return go(t,Ct,ot,ot,ot,e)}),yf=lo(dr),bf=lo(function(t,e){return t>=e}),xf=Or(function(){return arguments}())?Or:function(t){return cu(t)&&xc.call(t,"callee")&&!Rc.call(t,"callee")},wf=ac.isArray,Sf=gr?N(gr):Tr,kf=$c||$l,zf=pr?N(pr):Ar,Cf=mr?N(mr):qr,Mf=vr?N(vr):Pr,jf=_r?N(_r):Wr,Ef=yr?N(yr):Fr,Of=lo(Ur),Tf=lo(function(t,e){return t<=e}),Af=$i(function(t,e){if(Vo(e)||Ya(e))return void Hi(e,Vu(e),t);for(var n in e)xc.call(e,n)&&Ln(t,n,e[n])}),Lf=$i(function(t,e){Hi(e,$u(e),t)}),Rf=$i(function(t,e,n,r){Hi(e,$u(e),t,r)}),qf=$i(function(t,e,n,r){Hi(e,Vu(e),t,r)}),Nf=xo(Wn),If=si(function(t){return t.push(ot,po),u(Rf,ot,t)}),Pf=si(function(t){return t.push(ot,mo),u(Df,ot,t)}),Wf=ro(function(t,e,n){t[e]=n},Ll(ql)),Ff=ro(function(t,e,n){xc.call(t,e)?t[e].push(n):t[e]=[n]},Co),Bf=si(Er),Hf=$i(function(t,e,n){Xr(t,e,n)}),Df=$i(function(t,e,n,r){Xr(t,e,n,r)}),Uf=xo(function(t,e){var n={};if(null==t)return n;var r=!1;e=m(e,function(e){return e=Mi(e,t),r||(r=e.length>1),e}),Hi(t,So(t),n),r&&(n=Bn(n,dt|gt|pt,vo));for(var i=e.length;i--;)yi(n,e[i]);return n}),Vf=xo(function(t,e){return null==t?{}:Jr(t,e)}),$f=fo(Vu),Gf=fo($u),Xf=Yi(function(t,e,n){return e=e.toLowerCase(),t+(n?ll(e):e)}),Zf=Yi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Kf=Yi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Yf=Ki("toLowerCase"),Jf=Yi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Qf=Yi(function(t,e,n){return t+(n?" ":"")+ed(e)}),td=Yi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ed=Ki("toUpperCase"),nd=si(function(t,e){try{return u(t,ot,e)}catch(t){return iu(t)?t:new lc(t)}}),rd=xo(function(t,e){return c(e,function(e){e=is(e),Pn(t,e,hf(t[e],t))}),t}),id=eo(),od=eo(!0),sd=si(function(t,e){return function(n){return Er(n,t,e)}}),ad=si(function(t,e){return function(n){return Er(t,n,e)}}),ud=oo(m),ld=oo(f),cd=oo(b),hd=uo(),fd=uo(!0),dd=io(function(t,e){return t+e},0),gd=ho("ceil"),pd=io(function(t,e){return t/e},1),md=ho("floor"),vd=io(function(t,e){return t*e},1),_d=ho("round"),yd=io(function(t,e){return t-e},0);return n.after=Ea,n.ary=Oa,n.assign=Af,n.assignIn=Lf,n.assignInWith=Rf,n.assignWith=qf,n.at=Nf,n.before=Ta,n.bind=hf,n.bindAll=rd,n.bindKey=ff,n.castArray=Ua,n.chain=ea,n.chunk=us,n.compact=ls,n.concat=cs,n.cond=Tl,n.conforms=Al,n.constant=Ll,n.countBy=ef,n.create=Lu,n.curry=Aa,n.curryRight=La,n.debounce=Ra,n.defaults=If,n.defaultsDeep=Pf,n.defer=df,n.delay=gf,n.difference=Ih,n.differenceBy=Ph,n.differenceWith=Wh,n.drop=hs,n.dropRight=fs,n.dropRightWhile=ds,n.dropWhile=gs,n.fill=ps,n.filter=fa,n.flatMap=da,n.flatMapDeep=ga,n.flatMapDepth=pa,n.flatten=_s,n.flattenDeep=ys,n.flattenDepth=bs,n.flip=qa,n.flow=id,n.flowRight=od,n.fromPairs=xs,n.functions=Fu,n.functionsIn=Bu,n.groupBy=of,n.initial=ks,n.intersection=Fh,n.intersectionBy=Bh,n.intersectionWith=Hh,n.invert=Wf,n.invertBy=Ff,n.invokeMap=sf,n.iteratee=Nl,n.keyBy=af,n.keys=Vu,n.keysIn=$u,n.map=ya,n.mapKeys=Gu,n.mapValues=Xu,n.matches=Il,n.matchesProperty=Pl,n.memoize=Na,n.merge=Hf,n.mergeWith=Df,n.method=sd,n.methodOf=ad,n.mixin=Wl,n.negate=Ia,n.nthArg=Hl,n.omit=Uf,n.omitBy=Zu,n.once=Pa,n.orderBy=ba,n.over=ud,n.overArgs=pf,n.overEvery=ld,n.overSome=cd,n.partial=mf,n.partialRight=vf,n.partition=uf,n.pick=Vf,n.pickBy=Ku,n.property=Dl,n.propertyOf=Ul,n.pull=Dh,n.pullAll=Es,n.pullAllBy=Os,n.pullAllWith=Ts,n.pullAt=Uh,n.range=hd,n.rangeRight=fd,n.rearg=_f,n.reject=Sa,n.remove=As,n.rest=Wa,n.reverse=Ls,n.sampleSize=za,n.set=Ju,n.setWith=Qu,n.shuffle=Ca,n.slice=Rs,n.sortBy=lf,n.sortedUniq=Bs,n.sortedUniqBy=Hs,n.split=bl,n.spread=Fa,n.tail=Ds,n.take=Us,n.takeRight=Vs,n.takeRightWhile=$s,n.takeWhile=Gs,n.tap=na,n.throttle=Ba,n.thru=ra,n.toArray=zu,n.toPairs=$f,n.toPairsIn=Gf,n.toPath=Yl,n.toPlainObject=Ou,n.transform=tl,n.unary=Ha,n.union=Vh,n.unionBy=$h,n.unionWith=Gh,n.uniq=Xs,n.uniqBy=Zs,n.uniqWith=Ks,n.unset=el,n.unzip=Ys,n.unzipWith=Js,n.update=nl,n.updateWith=rl,n.values=il,n.valuesIn=ol,n.without=Xh,n.words=Ol,n.wrap=Da,n.xor=Zh,n.xorBy=Kh,n.xorWith=Yh,n.zip=Jh,n.zipObject=Qs,n.zipObjectDeep=ta,n.zipWith=Qh,n.entries=$f,n.entriesIn=Gf,n.extend=Lf,n.extendWith=Rf,Wl(n,n),n.add=dd,n.attempt=nd,n.camelCase=Xf,n.capitalize=ll,n.ceil=gd,n.clamp=sl,n.clone=Va,n.cloneDeep=Ga,n.cloneDeepWith=Xa,n.cloneWith=$a,n.conformsTo=Za,n.deburr=cl,n.defaultTo=Rl,n.divide=pd,n.endsWith=hl,n.eq=Ka,n.escape=fl,n.escapeRegExp=dl,n.every=ha,n.find=nf,n.findIndex=ms,n.findKey=Ru,n.findLast=rf,n.findLastIndex=vs,n.findLastKey=qu,n.floor=md,n.forEach=ma,n.forEachRight=va,n.forIn=Nu,n.forInRight=Iu,n.forOwn=Pu,n.forOwnRight=Wu,n.get=Hu,n.gt=yf,n.gte=bf,n.has=Du,n.hasIn=Uu,n.head=ws,n.identity=ql,n.includes=_a,n.indexOf=Ss,n.inRange=al,n.invoke=Bf,n.isArguments=xf,n.isArray=wf,n.isArrayBuffer=Sf,n.isArrayLike=Ya,n.isArrayLikeObject=Ja,n.isBoolean=Qa,n.isBuffer=kf,n.isDate=zf,n.isElement=tu,n.isEmpty=eu,n.isEqual=nu,n.isEqualWith=ru,n.isError=iu,n.isFinite=ou,n.isFunction=su,n.isInteger=au,n.isLength=uu,n.isMap=Cf,n.isMatch=hu,n.isMatchWith=fu,n.isNaN=du,n.isNative=gu,n.isNil=mu,n.isNull=pu,n.isNumber=vu,n.isObject=lu,n.isObjectLike=cu,n.isPlainObject=_u,n.isRegExp=Mf,n.isSafeInteger=yu,n.isSet=jf,n.isString=bu,n.isSymbol=xu,n.isTypedArray=Ef,n.isUndefined=wu,n.isWeakMap=Su,n.isWeakSet=ku,n.join=zs,n.kebabCase=Zf,n.last=Cs,n.lastIndexOf=Ms,n.lowerCase=Kf,n.lowerFirst=Yf,n.lt=Of,n.lte=Tf,n.max=Ql,n.maxBy=tc,n.mean=ec,n.meanBy=nc,n.min=rc,n.minBy=ic,n.stubArray=Vl,n.stubFalse=$l,n.stubObject=Gl,n.stubString=Xl,n.stubTrue=Zl,n.multiply=vd,n.nth=js,n.noConflict=Fl,n.noop=Bl,n.now=cf,n.pad=gl,n.padEnd=pl,n.padStart=ml,n.parseInt=vl,n.random=ul,n.reduce=xa,n.reduceRight=wa,n.repeat=_l,n.replace=yl,n.result=Yu,n.round=_d,n.runInContext=t,n.sample=ka,n.size=Ma,n.snakeCase=Jf,n.some=ja,n.sortedIndex=qs,n.sortedIndexBy=Ns,n.sortedIndexOf=Is,n.sortedLastIndex=Ps,n.sortedLastIndexBy=Ws,n.sortedLastIndexOf=Fs,n.startCase=Qf,n.startsWith=xl,n.subtract=yd,n.sum=oc,n.sumBy=sc,n.template=wl,n.times=Kl,n.toFinite=Cu,n.toInteger=Mu,n.toLength=ju,n.toLower=Sl,n.toNumber=Eu,n.toSafeInteger=Tu,n.toString=Au,n.toUpper=kl,n.trim=zl,n.trimEnd=Cl,n.trimStart=Ml,n.truncate=jl,n.unescape=El,n.uniqueId=Jl,n.upperCase=td,n.upperFirst=ed,n.each=ma,n.eachRight=va,n.first=ws,Wl(n,function(){var t={};return rr(n,function(e,r){xc.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION=st,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),c(["drop","take"],function(t,e){x.prototype[t]=function(n){n=n===ot?1:Kc(Mu(n),0);var r=this.__filtered__&&!e?new x(this):this.clone();return r.__filtered__?r.__takeCount__=Yc(n,r.__takeCount__):r.__views__.push({size:Yc(n,Wt),type:t+(r.__dir__<0?"Right":"")}),r},x.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==At||n==Rt;x.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Co(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),c(["head","last"],function(t,e){var n="take"+(e?"Right":"");x.prototype[t]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");x.prototype[t]=function(){return this.__filtered__?new x(this):this[n](1)}}),x.prototype.compact=function(){return this.filter(ql)},x.prototype.find=function(t){return this.filter(t).head()},x.prototype.findLast=function(t){return this.reverse().find(t)},x.prototype.invokeMap=si(function(t,e){return"function"==typeof t?new x(this):this.map(function(n){return Er(n,t,e)})}),x.prototype.reject=function(t){return this.filter(Ia(Co(t)))},x.prototype.slice=function(t,e){t=Mu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new x(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==ot&&(e=Mu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},x.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},x.prototype.toArray=function(){return this.take(Wt)},rr(x.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),s=n[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);s&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,l=e instanceof x,c=u[0],h=l||wf(e),f=function(t){var e=s.apply(n,v([t],u));return o&&d?e[0]:e};h&&r&&"function"==typeof c&&1!=c.length&&(l=h=!1);var d=this.__chain__,g=!!this.__actions__.length,p=a&&!d,m=l&&!g;if(!a&&h){e=m?e:new x(this);var _=t.apply(e,u);return _.__actions__.push({func:ra,args:[f],thisArg:ot}),new i(_,d)}return p&&m?t.apply(this,u):(_=this.thru(f),p?o?_.value()[0]:_.value():_)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var e=mc[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(wf(n)?n:[],t)}return this[r](function(n){return e.apply(wf(n)?n:[],t)})}}),rr(x.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";(lh[i]||(lh[i]=[])).push({name:e,func:r})}}),lh[no(ot,yt).name]=[{name:"wrapper",func:ot}],x.prototype.clone=O,x.prototype.reverse=J,x.prototype.value=nt,n.prototype.at=tf,n.prototype.chain=ia,n.prototype.commit=oa,n.prototype.next=sa,n.prototype.plant=ua,n.prototype.reverse=la,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ca,n.prototype.first=n.prototype.head,Ic&&(n.prototype[Ic]=aa),n},zr=kr();"object"==o(n(53))&&n(53)?(ur._=zr,r=function(){return zr}.call(e,n,e,i),!(r!==ot&&(i.exports=r))):cr?((cr.exports=zr)._=zr,lr._=zr):ur._=zr}).call(void 0)}).call(e,function(){return this}(),n(23)(t))},function(t,e,n){"use strict";function r(t){var e=t.parentNode,n=t.nextSibling;return e.removeChild(t),function(){n?e.insertBefore(t,n):e.appendChild(t)}}var i,o=n(10),s=n(2),a=function(t){for(var e;e=t.lastChild;)t.removeChild(e)};t.exports=i=s.extend({renderSubviews:function(){var t=this.el,e=void 0!=t.parentNode;if(e)var n=r(t);a(t);for(var i,s,u=document.createDocumentFragment(),l=this._views(),c=o.sortBy(l,function(t){return t.ordering}),h=0;h<c.length;h++)i=c[h],i.render(),s=i.el,null!=s&&u.appendChild(s);return t.appendChild(u),e&&n(),t},addView:function(t,e){var n=this._views();if(null==e)throw"Invalid plugin. ";return null==e.ordering&&(e.ordering=t),n[t]=e},removeViews:function(){var t,e,n=this._views();for(e in n)t=n[e],t.undelegateEvents(),t.unbind(),null!=t.removeViews&&t.removeViews(),t.remove();return this.views={}},removeView:function(t){var e=this._views();return e[t].remove(),delete e[t]},getView:function(t){return this._views()[t]},remove:function(){return this.removeViews(),s.prototype.remove.apply(this)},_views:function(){return null==this.views&&(this.views={}),this.views}})},function(t,e,n){var r;(function(t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*!
	 * jBone v1.2.0 - 2016-04-13 - Library for DOM manipulation
	 *
	 * http://jbone.js.org
	 *
	 * Copyright 2016 Alexey Kupriyanenko
	 * Released under the MIT license.
	 */
!function(o){function s(t){var e=t.length,n="undefined"==typeof t?"undefined":i(t);return!y(n)&&t!==o&&(!(1!==t.nodeType||!e)||b(n)||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t,e){var n,r;this.originalEvent=t,r=function(t,e){"preventDefault"===t?this[t]=function(){return this.defaultPrevented=!0,e[t]()}:"stopImmediatePropagation"===t?this[t]=function(){return this.immediatePropagationStopped=!0,e[t]()}:y(e[t])?this[t]=function(){return e[t]()}:this[t]=e[t]};for(n in t)(t[n]||"function"==typeof t[n])&&r.call(this,n,t);x.extend(this,e,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var u,l=o.$,c=o.jBone,h=/^<(\w+)\s*\/?>$/,f=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=[].slice,g=[].splice,p=Object.keys,m=document,v=function(t){return"string"==typeof t},_=function(t){return t instanceof Object},y=function(t){return"[object Function]"==={}.toString.call(t)},b=function(t){return Array.isArray(t)},x=function(t,e){return new u.init(t,e)};x.noConflict=function(){return o.$=l,o.jBone=c,x},u=x.fn=x.prototype={init:function(t,e){var n,r,i,o;if(!t)return this;if(v(t)){if(r=h.exec(t))return this[0]=m.createElement(r[1]),this.length=1,_(e)&&this.attr(e),this;if((r=f.exec(t))&&r[1]){for(o=m.createDocumentFragment(),i=m.createElement("div"),i.innerHTML=t;i.lastChild;)o.appendChild(i.firstChild);return n=d.call(o.childNodes),x.merge(this,n)}if(x.isElement(e))return x(e).find(t);try{return n=m.querySelectorAll(t),x.merge(this,n)}catch(t){return this}}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?t():t instanceof x?t:x.makeArray(t,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},u.constructor=x,u.init.prototype=u,x.setId=function(t){var e=t.jid;t===o?e="window":void 0===t.jid&&(t.jid=e=++x._cache.jid),x._cache.events[e]||(x._cache.events[e]={})},x.getData=function(t){t=t instanceof x?t[0]:t;var e=t===o?"window":t.jid;return{jid:e,events:x._cache.events[e]}},x.isElement=function(t){return t&&t instanceof x||t instanceof HTMLElement||v(t)},x._cache={events:{},jid:0},u.pushStack=function(t){return x.merge(this.constructor(),t)},x.merge=function(t,e){for(var n=e.length,r=t.length,i=0;i<n;)t[r++]=e[i++];return t.length=r,t},x.contains=function(t,e){return t.contains(e)},x.extend=function(t){var e;return g.call(arguments,1).forEach(function(n){if(e=t,n)for(var r in n)e[r]=n[r]}),t},x.makeArray=function(t,e){var n=e||[];return null!==t&&(s(t)?x.merge(n,v(t)?[t]:t):n.push(t)),n},x.unique=function(t){if(null==t)return[];for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}return e},x.Event=function(t,e){var n,r;return t.type&&!e&&(e=t,t=t.type),n=t.split(".").splice(1).join("."),r=t.split(".")[0],t=m.createEvent("Event"),t.initEvent(r,!0,!0),x.extend(t,{namespace:n,isDefaultPrevented:function(){return t.defaultPrevented}},e)},x.event={add:function(t,e,n,r,i){x.setId(t);var o,s,a,u=function(e){x.event.dispatch.call(t,e)},l=x.getData(t).events;for(e=e.split(" "),s=e.length;s--;)a=e[s],o=a.split(".")[0],l[o]=l[o]||[],l[o].length?u=l[o][0].fn:t.addEventListener&&t.addEventListener(o,u,!1),l[o].push({namespace:a.split(".").splice(1).join("."),fn:u,selector:i,data:r,originfn:n})},remove:function(t,e,n,r){var i,o,s=function(t,e,r,i,o){var s;(n&&o.originfn===n||!n)&&(s=o.fn),t[e][r].fn===s&&(t[e].splice(r,1),t[e].length||i.removeEventListener(e,s))},a=x.getData(t).events;if(a)return!e&&a?p(a).forEach(function(e){for(o=a[e],i=o.length;i--;)s(a,e,i,t,o[i])}):void e.split(" ").forEach(function(e){var n,u=e.split(".")[0],l=e.split(".").splice(1).join(".");if(a[u])for(o=a[u],i=o.length;i--;)n=o[i],(!l||l&&n.namespace===l)&&(!r||r&&n.selector===r)&&s(a,u,i,t,n);else l&&p(a).forEach(function(e){for(o=a[e],i=o.length;i--;)n=o[i],n.namespace.split(".")[0]===l.split(".")[0]&&s(a,e,i,t,n)})})},trigger:function(t,e){var n=[];v(e)?n=e.split(" ").map(function(t){return x.Event(t)}):(e=e instanceof Event?e:x.Event(e),n=[e]),n.forEach(function(e){e.type&&t.dispatchEvent&&t.dispatchEvent(e)})},dispatch:function(t){for(var e,n,r,i,o,s=0,u=0,l=this,c=x.getData(l).events[t.type],h=c.length,f=[],d=[];s<h;s++)f.push(c[s]);for(s=0,h=f.length;s<h&&~c.indexOf(f[s])&&(!i||!i.isImmediatePropagationStopped());s++)if(n=null,o={},r=f[s],r.data&&(o.data=r.data),r.selector){if(~(d=x(l).find(r.selector)).indexOf(t.target)&&(n=t.target)||l!==t.target&&l.contains(t.target)){if(!n)for(e=d.length,u=0;u<e;u++)d[u]&&d[u].contains(t.target)&&(n=d[u]);if(!n)continue;o.currentTarget=n,i=new a(t,o),t.namespace&&t.namespace!==r.namespace||r.originfn.call(n,i)}}else i=new a(t,o),t.namespace&&t.namespace!==r.namespace||r.originfn.call(l,i)}},u.on=function(t,e,n,r){var i=this.length,o=0;if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),!r)return this;for(;o<i;o++)x.event.add(this[o],t,r,n,e);return this},u.one=function(t){var e,n=arguments,r=0,i=this.length,o=d.call(n,1,n.length-1),s=d.call(n,-1)[0];for(e=function(e){var n=x(e);t.split(" ").forEach(function(t){var r=function r(i){n.off(t,r),s.call(e,i)};n.on.apply(n,[t].concat(o,r))})};r<i;r++)e(this[r]);return this},u.trigger=function(t){var e=0,n=this.length;if(!t)return this;for(;e<n;e++)x.event.trigger(this[e],t);return this},u.off=function(t,e,n){var r=0,i=this.length;for(y(e)&&(n=e,e=void 0);r<i;r++)x.event.remove(this[r],t,n,e);return this},u.find=function(t){for(var e=[],n=0,r=this.length,i=function(n){y(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(t),function(t){e.push(t)})};n<r;n++)i(this[n]);return x(e)},u.get=function(t){return null!=t?t<0?this[t+this.length]:this[t]:d.call(this)},u.eq=function(t){return x(this[t])},u.parent=function(){for(var t,e=[],n=0,r=this.length;n<r;n++)!~e.indexOf(t=this[n].parentElement)&&t&&e.push(t);return x(e)},u.toArray=function(){return d.call(this)},u.is=function(){var t=arguments;return this.some(function(e){return e.tagName.toLowerCase()===t[0]})},u.has=function(){var t=arguments;return this.some(function(e){return e.querySelectorAll(t[0]).length})},u.add=function(t,e){return this.pushStack(x.unique(x.merge(this.get(),x(t,e))))},u.attr=function(t,e){var n,r=arguments,i=0,o=this.length;if(v(t)&&1===r.length)return this[0]&&this[0].getAttribute(t);for(2===r.length?n=function(n){n.setAttribute(t,e)}:_(t)&&(n=function(e){p(t).forEach(function(n){e.setAttribute(n,t[n])})});i<o;i++)n(this[i]);return this},u.removeAttr=function(t){for(var e=0,n=this.length;e<n;e++)this[e].removeAttribute(t);return this},u.val=function(t){var e=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;e<n;e++)this[e].value=t;return this},u.css=function(t,e){var n,r=arguments,i=0,s=this.length;if(v(t)&&1===r.length)return this[0]&&o.getComputedStyle(this[0])[t];for(2===r.length?n=function(n){n.style[t]=e}:_(t)&&(n=function(e){p(t).forEach(function(n){e.style[n]=t[n]})});i<s;i++)n(this[i]);return this},u.data=function(t,e){var n,r=arguments,i={},o=0,s=this.length,a=function(t,e,n){_(n)?(t.jdata=t.jdata||{},t.jdata[e]=n):t.dataset[e]=n},u=function(t){return"true"===t||"false"!==t&&t};if(0===r.length)return this[0].jdata&&(i=this[0].jdata),p(this[0].dataset).forEach(function(t){i[t]=u(this[0].dataset[t])},this),i;if(1===r.length&&v(t))return this[0]&&u(this[0].dataset[t]||this[0].jdata&&this[0].jdata[t]);for(1===r.length&&_(t)?n=function(e){p(t).forEach(function(n){a(e,n,t[n])})}:2===r.length&&(n=function(n){a(n,t,e)});o<s;o++)n(this[o]);return this},u.removeData=function(t){for(var e,n,r=0,i=this.length;r<i;r++)if(e=this[r].jdata,n=this[r].dataset,t)e&&e[t]&&delete e[t],delete n[t];else{for(t in e)delete e[t];for(t in n)delete n[t]}return this},u.addClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];e<r;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.add(i[n]);return this},u.removeClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];e<r;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.remove(i[n]);return this},u.toggleClass=function(t,e){var n=0,r=this.length,i="toggle";if(e===!0&&(i="add")||e===!1&&(i="remove"),t)for(;n<r;n++)this[n].classList[i](t);return this},u.hasClass=function(t){var e=0,n=this.length;if(t)for(;e<n;e++)if(this[e].classList.contains(t))return!0;return!1},u.html=function(t){var e,n=arguments;return 1===n.length&&void 0!==t?this.empty().append(t):0===n.length&&(e=this[0])?e.innerHTML:this},u.append=function(t){var e,n=0,r=this.length;for(v(t)&&f.exec(t)?t=x(t):_(t)||(t=document.createTextNode(t)),t=t instanceof x?t:x(t),e=function(e,n){t.forEach(function(t){n?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})};n<r;n++)e(this[n],n);return this},u.appendTo=function(t){return x(t).append(this),this},u.empty=function(){for(var t,e=0,n=this.length;e<n;e++)for(t=this[e];t.lastChild;)t.removeChild(t.lastChild);return this},u.remove=function(){var t,e=0,n=this.length;for(this.off();e<n;e++)t=this[e],delete t.jdata,t.parentNode&&t.parentNode.removeChild(t);return this},"object"===i(t)&&t&&"object"===i(t.exports)?t.exports=x:(r=function(){return x}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)),o.jBone=o.$=x)}(window)}).call(e,n(23)(t))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(106),o=r(i),s=o.default.extend({buildDOM:function(){return this.on("new:node",this.buildNode),this.on("new:button",this.buildButton),this.on("new:menu",this.buildMenu),o.default.prototype.buildDOM.call(this)},buildNode:function(t){if(null!=this.g)return t.style.lineHeight=this.g.menuconfig.get("menuItemLineHeight")},buildButton:function(t){if(null!=this.g)return t.style.fontSize=this.g.menuconfig.get("menuFontsize"),t.style.marginLeft=this.g.menuconfig.get("menuMarginLeft"),t.style.padding=this.g.menuconfig.get("menuPadding")},buildMenu:function(t){if(null!=this.g)return t.style.fontSize=this.g.menuconfig.get("menuItemFontsize")}});e.default=s},function(t,e){"use strict";var n={};n.removeToInsertLater=function(t){var e,n;return n=t.parentNode,e=t.nextSibling,n.removeChild(t),function(){e?n.insertBefore(t,e):n.appendChild(t)}},n.removeAllChilds=function(t){var e;for(e=0;t.firstChild;)e++,t.removeChild(t.firstChild)},t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.columnsel=e.rowsel=e.possel=e.sel=void 0;var r=n(3),i=n(1).Model,o=i.extend({defaults:{type:"super"}}),s=o.extend({defaults:(0,r.extend)({},o.prototype.defaults,{type:"row",seqId:""}),inRow:function(t){return t===this.get("seqId")},inColumn:function(t){return!0},getLength:function(){return 1}}),a=o.extend({defaults:(0,r.extend)({},o.prototype.defaults,{type:"column",xStart:-1,xEnd:-1}),inRow:function(){return!0},inColumn:function(t){return xStart<=t&&t<=xEnd},getLength:function(){return xEnd-xStart}}),u=s.extend((0,r.extend)({},(0,r.pick)(a,"inColumn"),(0,r.pick)(a,"getLength"),{defaults:(0,r.extend)({},a.prototype.defaults,s.prototype.defaults,{type:"pos"})}));e.sel=o,e.possel=u,e.rowsel=s,e.columnsel=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(3),o=n(1).Collection,s=o.extend({model:r.sel,initialize:function(t,e){if("undefined"!=typeof e&&null!==e)return this.g=e.g,this.listenTo(this.g,"residue:click",function(t){return this._handleE(t.evt,new r.possel({xStart:t.rowPos,xEnd:t.rowPos,seqId:t.seqId}))}),this.listenTo(this.g,"row:click",function(t){return this._handleE(t.evt,new r.rowsel({seqId:t.seqId}))}),this.listenTo(this.g,"column:click",function(t){return this._handleE(t.evt,new r.columnsel({xStart:t.rowPos,xEnd:t.rowPos+t.stepSize-1}))})},getSelForRow:function(t){return this.filter(function(e){return e.inRow(t)})},getSelForColumns:function(t){return this.filter(function(e){return e.inColumn(t)})},addJSON:function(t){return this.add(this._fromJSON(t))},_fromJSON:function(t){switch(t.type){case"column":return new r.columnsel(t);case"row":return new r.rowsel(t);case"pos":return new r.possel(t)}},resetJSON:function(t){return t=t.map(this._fromJSON),this.reset(t)},getBlocksForRow:function(t,e){for(var n,r=this.filter(function(e){return e.inRow(t)}),i=[],o=function(t,n){var n=r[t];return"row"===n.attributes.type?(i=function(){var t=[],n=0;if(0<=e)for(;n<=e;)t.push(n++);else for(;n>=e;)t.push(n--);return t}(),"break"):void(i=i.concat(function(){var t=[],e=n.attributes.xStart;if(n.attributes.xStart<=n.attributes.xEnd)for(;e<=n.attributes.xEnd;)t.push(e++);else for(;e>=n.attributes.xEnd;)t.push(e--);return t}()))},s=0;s<r.length&&"break"!==o(s,n);s++);return i},getAllColumnBlocks:function(t){var e=(t.maxLen,t.withPos,[]),n=void 0;n=t.withPos?this.filter(function(t){return null!=t.get("xStart")}):this.filter(function(t){return"column"===t.get("type")});for(var r,o=function(t,r){var r=n[t];e=e.concat(function(){var t=[],e=r.attributes.xStart;if(r.attributes.xStart<=r.attributes.xEnd)for(;e<=r.attributes.xEnd;)t.push(e++);else for(;e>=r.attributes.xEnd;)t.push(e--);return t}())},s=0;s<n.length;s++)o(s,r);return e=(0,i.uniq)(e)},invertRow:function(t){var e=this.where({type:"row"});e=e.map(function(t){return t.attributes.seqId});for(var n,o=(0,i.filter)(t,function(t){return!(e.indexOf(t)>=0)}),s=[],a=0;a<o.length;a++){var n=o[a];s.push(new r.rowsel({seqId:n}))}return this.reset(s)},invertCol:function(t){var e=this.where({type:"column"}).reduce(function(t,e){return t.concat(function(){var t=[],n=e.attributes.xStart;if(e.attributes.xStart<=e.attributes.xEnd)for(;n<=e.attributes.xEnd;)t.push(n++);else for(;n>=e.attributes.xEnd;)t.push(n--);return t}())},[]),n=(0,i.filter)(t,function(t){return!(e.indexOf(t)>=0)});if(0!==n.length){for(var o,s=[],a=n[0],u=a,l=0;l<n.length;l++)o=n[l],u+1===o?u=o:(s.push(new r.columnsel({xStart:a,xEnd:u})),a=u=o);return a!==u&&s.push(new r.columnsel({xStart:a,xEnd:n[n.length-1]})),this.reset(s)}},_handleE:function(t,e){return t.ctrlKey||t.metaKey?this.add(e):this.reset([e])},_reduceColumns:function(){return this.each(function(t,e,n){for(var r=(0,i.filter)(n,function(t){return"column"===t.get("type")}),o=t.get("xStart"),s=t.get("xEnd"),a=(0,i.filter)(r,function(t){return t.get("xEnd")===o-1}),u=0;u<a.length;u++)a[u].set("xEnd",o);for(var l=(0,i.filter)(r,function(t){return t.get("xStart")===s+1}),c=0;c<l.length;c++)l[c].set("xStart",s);if(a.length>0||l.length>0)return t.collection.remove(t)})}});e.default=s},function(t,e,n){var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function n(t){function e(e,n,r,i,o,s){for(;o>=0&&o<s;o+=t){var a=i?i[o]:o;r=n(r,e[a],a,e)}return r}return function(n,r,i,o){r=k(r,o,4);var s=!T(n)&&S.keys(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(i=n[s?s[u]:u],u+=t),e(n,r,i,s,u,a)}}function s(t){return function(e,n,r){n=z(n,r);for(var i=O(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function a(t,e,n){return function(r,i,o){var s=0,a=O(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(p.call(r,s,a),S.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(r[o]===i)return o;return-1}}function u(t,e){var n=N.length,r=t.constructor,i=S.isFunction(r)&&r.prototype||f,o="constructor";for(S.has(t,o)&&!S.contains(e,o)&&e.push(o);n--;)o=N[n],o in t&&t[o]!==i[o]&&!S.contains(e,o)&&e.push(o)}var l=this,c=l._,h=Array.prototype,f=Object.prototype,d=Function.prototype,g=h.push,p=h.slice,m=f.toString,v=f.hasOwnProperty,_=Array.isArray,y=Object.keys,b=d.bind,x=Object.create,w=function(){},S=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};"undefined"!=typeof t&&t.exports&&(e=t.exports=S),e._=S,S.VERSION="1.8.3";var k=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},z=function(t,e,n){return null==t?S.identity:S.isFunction(t)?k(t,e,n):S.isObject(t)?S.matcher(t):S.property(t)};S.iteratee=function(t,e){return z(t,e,1/0)};var C=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;u<a;u++){var l=s[u];e&&void 0!==n[l]||(n[l]=o[l])}return n}},M=function(t){if(!S.isObject(t))return{};if(x)return x(t);w.prototype=t;var e=new w;return w.prototype=null,e},j=function(t){return function(e){return null==e?void 0:e[t]}},E=Math.pow(2,53)-1,O=j("length"),T=function(t){var e=O(t);return"number"==typeof e&&e>=0&&e<=E};S.each=S.forEach=function(t,e,n){e=k(e,n);var r,i;if(T(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=S.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},S.map=S.collect=function(t,e,n){e=z(e,n);for(var r=!T(t)&&S.keys(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o},S.reduce=S.foldl=S.inject=n(1),S.reduceRight=S.foldr=n(-1),S.find=S.detect=function(t,e,n){var r;if(r=T(t)?S.findIndex(t,e,n):S.findKey(t,e,n),void 0!==r&&r!==-1)return t[r]},S.filter=S.select=function(t,e,n){var r=[];return e=z(e,n),S.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},S.reject=function(t,e,n){return S.filter(t,S.negate(z(e)),n)},S.every=S.all=function(t,e,n){e=z(e,n);for(var r=!T(t)&&S.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},S.some=S.any=function(t,e,n){e=z(e,n);for(var r=!T(t)&&S.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},S.contains=S.includes=S.include=function(t,e,n,r){return T(t)||(t=S.values(t)),("number"!=typeof n||r)&&(n=0),S.indexOf(t,e,n)>=0},S.invoke=function(t,e){var n=p.call(arguments,2),r=S.isFunction(e);return S.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},S.pluck=function(t,e){return S.map(t,S.property(e))},S.where=function(t,e){return S.filter(t,S.matcher(e))},S.findWhere=function(t,e){return S.find(t,S.matcher(e))},S.max=function(t,e,n){var r,i,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=T(t)?t:S.values(t);for(var a=0,u=t.length;a<u;a++)r=t[a],r>o&&(o=r)}else e=z(e,n),S.each(t,function(t,n,r){i=e(t,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=t,s=i)});return o},S.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t){t=T(t)?t:S.values(t);for(var a=0,u=t.length;a<u;a++)r=t[a],r<o&&(o=r)}else e=z(e,n),S.each(t,function(t,n,r){i=e(t,n,r),(i<s||i===1/0&&o===1/0)&&(o=t,s=i)});return o},S.shuffle=function(t){for(var e,n=T(t)?t:S.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=S.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},S.sample=function(t,e,n){return null==e||n?(T(t)||(t=S.values(t)),t[S.random(t.length-1)]):S.shuffle(t).slice(0,Math.max(0,e))},S.sortBy=function(t,e,n){return e=z(e,n),S.pluck(S.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,r){var i={};return n=z(n,r),S.each(e,function(r,o){t(i,r,n(r,o,e))}),i}};S.groupBy=A(function(t,e,n){S.has(t,n)?t[n].push(e):t[n]=[e]}),S.indexBy=A(function(t,e,n){t[n]=e}),S.countBy=A(function(t,e,n){S.has(t,n)?t[n]++:t[n]=1}),S.toArray=function(t){return t?S.isArray(t)?p.call(t):T(t)?S.map(t,S.identity):S.values(t):[]},S.size=function(t){return null==t?0:T(t)?t.length:S.keys(t).length},S.partition=function(t,e,n){e=z(e,n);var r=[],i=[];return S.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},S.first=S.head=S.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:S.initial(t,t.length-e)},S.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},S.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:S.rest(t,Math.max(0,t.length-e))},S.rest=S.tail=S.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},S.compact=function(t){return S.filter(t,S.identity)};var L=function t(e,n,r,i){for(var o=[],s=0,a=i||0,u=O(e);a<u;a++){var l=e[a];if(T(l)&&(S.isArray(l)||S.isArguments(l))){n||(l=t(l,n,r));var c=0,h=l.length;for(o.length+=h;c<h;)o[s++]=l[c++]}else r||(o[s++]=l)}return o};S.flatten=function(t,e){return L(t,e,!1)},S.without=function(t){return S.difference(t,p.call(arguments,1))},S.uniq=S.unique=function(t,e,n,r){S.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=z(n,r));for(var i=[],o=[],s=0,a=O(t);s<a;s++){var u=t[s],l=n?n(u,s,t):u;e?(s&&o===l||i.push(u),o=l):n?S.contains(o,l)||(o.push(l),i.push(u)):S.contains(i,u)||i.push(u)}return i},S.union=function(){return S.uniq(L(arguments,!0,!0))},S.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=O(t);r<i;r++){var o=t[r];if(!S.contains(e,o)){for(var s=1;s<n&&S.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},S.difference=function(t){var e=L(arguments,!0,!0,1);return S.filter(t,function(t){return!S.contains(e,t)})},S.zip=function(){return S.unzip(arguments)},S.unzip=function(t){for(var e=t&&S.max(t,O).length||0,n=Array(e),r=0;r<e;r++)n[r]=S.pluck(t,r);return n},S.object=function(t,e){for(var n={},r=0,i=O(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},S.findIndex=s(1),S.findLastIndex=s(-1),S.sortedIndex=function(t,e,n,r){n=z(n,r,1);for(var i=n(e),o=0,s=O(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o},S.indexOf=a(1,S.findIndex,S.sortedIndex),S.lastIndexOf=a(-1,S.findLastIndex),S.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var R=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=M(t.prototype),s=t.apply(o,i);return S.isObject(s)?s:o};S.bind=function(t,e){if(b&&t.bind===b)return b.apply(t,p.call(arguments,1));if(!S.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2);return function r(){return R(t,r,e,this,n.concat(p.call(arguments)))}},S.partial=function(t){var e=p.call(arguments,1);return function n(){for(var r=0,i=e.length,o=Array(i),s=0;s<i;s++)o[s]=e[s]===S?arguments[r++]:e[s];for(;r<arguments.length;)o.push(arguments[r++]);return R(t,n,this,this,o)}},S.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=S.bind(t[n],t);return t},S.memoize=function(t,e){var n=function n(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return S.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},S.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},S.defer=S.partial(S.delay,S,1),S.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:S.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var l=S.now();a||n.leading!==!1||(a=l);var c=e-(l-a);return r=this,i=arguments,c<=0||c>e?(s&&(clearTimeout(s),s=null),a=l,o=t.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(u,c)),o}},S.debounce=function(t,e,n){var r,i,o,s,a,u=function u(){var l=S.now()-s;l<e&&l>=0?r=setTimeout(u,e-l):(r=null,n||(a=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=S.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(a=t.apply(o,i),o=i=null),a}},S.wrap=function(t,e){return S.partial(e,t)},S.negate=function(t){return function(){return!t.apply(this,arguments)}},S.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},S.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},S.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},S.once=S.partial(S.before,2);var q=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];S.keys=function(t){if(!S.isObject(t))return[];if(y)return y(t);var e=[];for(var n in t)S.has(t,n)&&e.push(n);return q&&u(t,e),e},S.allKeys=function(t){if(!S.isObject(t))return[];var e=[];for(var n in t)e.push(n);return q&&u(t,e),e},S.values=function(t){for(var e=S.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},S.mapObject=function(t,e,n){e=z(e,n);for(var r,i=S.keys(t),o=i.length,s={},a=0;a<o;a++)r=i[a],s[r]=e(t[r],r,t);return s},S.pairs=function(t){for(var e=S.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},S.invert=function(t){for(var e={},n=S.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},S.functions=S.methods=function(t){var e=[];for(var n in t)S.isFunction(t[n])&&e.push(n);return e.sort()},S.extend=C(S.allKeys),S.extendOwn=S.assign=C(S.keys),S.findKey=function(t,e,n){e=z(e,n);for(var r,i=S.keys(t),o=0,s=i.length;o<s;o++)if(r=i[o],e(t[r],r,t))return r},S.pick=function(t,e,n){var r,i,o={},s=t;if(null==s)return o;S.isFunction(e)?(i=S.allKeys(s),r=k(e,n)):(i=L(arguments,!1,!1,1),r=function(t,e,n){return e in n},s=Object(s));for(var a=0,u=i.length;a<u;a++){var l=i[a],c=s[l];r(c,l,s)&&(o[l]=c)}return o},S.omit=function(t,e,n){if(S.isFunction(e))e=S.negate(e);else{var r=S.map(L(arguments,!1,!1,1),String);e=function(t,e){return!S.contains(r,e)}}return S.pick(t,e,n)},S.defaults=C(S.allKeys,!0),S.create=function(t,e){var n=M(t);return e&&S.extendOwn(n,e),n},S.clone=function(t){return S.isObject(t)?S.isArray(t)?t.slice():S.extend({},t):t},S.tap=function(t,e){return e(t),t},S.isMatch=function(t,e){var n=S.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0};var I=function t(e,n,r,i){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof S&&(e=e._wrapped),n instanceof S&&(n=n._wrapped);var s=m.call(e);if(s!==m.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var a="[object Array]"===s;if(!a){if("object"!=("undefined"==typeof e?"undefined":o(e))||"object"!=("undefined"==typeof n?"undefined":o(n)))return!1;var u=e.constructor,l=n.constructor;if(u!==l&&!(S.isFunction(u)&&u instanceof u&&S.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in n)return!1}r=r||[],i=i||[];for(var c=r.length;c--;)if(r[c]===e)return i[c]===n;if(r.push(e),i.push(n),a){if(c=e.length,c!==n.length)return!1;for(;c--;)if(!t(e[c],n[c],r,i))return!1}else{var h,f=S.keys(e);if(c=f.length,S.keys(n).length!==c)return!1;for(;c--;)if(h=f[c],!S.has(n,h)||!t(e[h],n[h],r,i))return!1}return r.pop(),i.pop(),!0};S.isEqual=function(t,e){return I(t,e)},S.isEmpty=function(t){return null==t||(T(t)&&(S.isArray(t)||S.isString(t)||S.isArguments(t))?0===t.length:0===S.keys(t).length)},S.isElement=function(t){return!(!t||1!==t.nodeType)},S.isArray=_||function(t){return"[object Array]"===m.call(t)},S.isObject=function(t){var e="undefined"==typeof t?"undefined":o(t);return"function"===e||"object"===e&&!!t},S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){S["is"+t]=function(e){return m.call(e)==="[object "+t+"]"}}),S.isArguments(arguments)||(S.isArguments=function(t){return S.has(t,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":o(Int8Array))&&(S.isFunction=function(t){return"function"==typeof t||!1}),S.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},S.isNaN=function(t){return S.isNumber(t)&&t!==+t},S.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===m.call(t)},S.isNull=function(t){return null===t},S.isUndefined=function(t){return void 0===t},S.has=function(t,e){return null!=t&&v.call(t,e)},S.noConflict=function(){return l._=c,this},S.identity=function(t){return t},S.constant=function(t){return function(){return t}},S.noop=function(){},S.property=j,S.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},S.matcher=S.matches=function(t){return t=S.extendOwn({},t),function(e){return S.isMatch(e,t)}},S.times=function(t,e,n){var r=Array(Math.max(0,t));e=k(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},S.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},S.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=S.invert(P),F=function(t){var e=function(e){return t[e]},n="(?:"+S.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};S.escape=F(P),S.unescape=F(W),S.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),S.isFunction(r)?r.call(t):r};var B=0;S.uniqueId=function(t){var e=++B+"";return t?t+e:e},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+D[t]};S.template=function(t,e,n){!e&&n&&(e=n),e=S.defaults({},e,S.templateSettings);var r=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,a){return o+=t.slice(i,a).replace(U,V),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return s.call(this,t,S)},u=e.variable||"obj";return a.source="function("+u+"){\n"+o+"}",a},S.chain=function(t){var e=S(t);return e._chain=!0,e};var $=function(t,e){return t._chain?S(e).chain():e};S.mixin=function(t){S.each(S.functions(t),function(e){var n=S[e]=t[e];S.prototype[e]=function(){var t=[this._wrapped];return g.apply(t,arguments),$(this,n.apply(S,t))}})},S.mixin(S),S.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];S.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],$(this,n)}}),S.each(["concat","join","slice"],function(t){var e=h[t];S.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),S.prototype.value=function(){return this._wrapped},S.prototype.valueOf=S.prototype.toJSON=S.prototype.value,S.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return S}.apply(e,r),!(void 0!==i&&(t.exports=i))}).call(void 0)},function(t,e,n){"use strict";t.exports=n(54)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.xhr=e.seqs=e.parser=e.newick=e.matrix=e.gff=e.fasta=e.clustal=void 0;var i=n(56),o=r(i),s=n(57),a=r(s),u=n(58),l=r(u),c=n(60),h=r(c),f=n(62),d=r(f),g=n(13),p=r(g),m=n(25),v=r(m);e.clustal=o.default,e.fasta=a.default,e.gff=l.default,e.matrix=h.default,e.newick=d.default,e.parser=p.default,e.seqs=v.default;var _=n(24);e.xhr=_;var y="imported";"undefined"!=typeof IO_VERSION&&(y=IO_VERSION),e.version=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(24),o={};e.default=o,o.read=function(t,e){var n=function(t){return function(n,r,i){
return o._onRetrieval(n,i,e,t)}}(this);return"undefined"==typeof e?new Promise(function(r,o){e=function(t,e){t?o(t):r(e)},i(t,n)}):i(t,n)},o._onRetrieval=function(t,e,n,r){var i=void 0;return"undefined"!=typeof t&&(i=r.parse(e)),n.call(r,t,i)},o.extend=function(t,e){return extend(o,t,e)},o.mixin=function(t){var e=["read"];return"object"!==("undefined"==typeof t?"undefined":r(t))&&(t=t.prototype),e.forEach(function(e){t[e]=o[e]},this),t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="http://www.w3.org/2000/svg",r=function(t,e){for(var n in e){var r=e[n];t.setAttributeNS(null,n,r)}return t},i=function(t){var e=document.createElementNS(n,"svg");return e.setAttribute("width",t.width),e.setAttribute("height",t.height),e},o=function(t){return r(document.createElementNS(n,"rect"),t)},s=function(t){return r(document.createElementNS(n,"line"),t)},a=function(t){return r(document.createElementNS(n,"polygon"),t)};e.base=i,e.line=s,e.rect=o,e.polygon=a},function(t,e,n){var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s){"object"===o(e)?t.exports=s():(r=s,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i)))}(function(){"use strict";var t={has:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];if(n)for(var r in n)t[r]=n[r]}return t}};return function(e,n){var r,i=this;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&t.extend(r.prototype,e),r.__super__=i.prototype,r}})},function(t,e,n){"use strict";var r=n(11);r.onAll=function(t,e){return this.on("all",t,e),this},r.oldMixin=r.mixin,r.mixin=function(t){r.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var i=e[n];t[i]=this[i]}return t},t.exports=r},function(t,e,n){(function(t){"use strict";var e={};e.d=e.defaultValue=function(t,e){return void 0===t?"function"==typeof t?e():e:t},e.id=function(t){return document.getElementById(t)},e.mk=function(t){return document.createElement(t)},void 0!==t&&void 0!==t.exports&&(t.exports=e)}).call(e,n(23)(t))},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t)}return r(t,null,[{key:"randomInt",value:function(t,e){if("undefined"==typeof e||null===e){var n=[0,t];t=n[0],e=n[1]}if(t>e){var r=[e,t];t=r[0],e=r[1]}return Math.floor(Math.random()*(e-t+1)+t)}},{key:"uniqueId",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)}},{key:"getRandomInt",value:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i=n(3),o=n(79),s=n(80),a={openInJalview:function(t,e){"."===t.charAt(0)&&(t=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+t),t.indexOf("http")<0&&(t="http://"+window.location.hostname+t),t=encodeURIComponent(t);var n="http://www.jalview.org/services/launchApp?open="+t;return n+="&colour="+e,window.open(n,"_blank")},publishWeb:function(t,e){var n=r.fasta.write(t.seqs.toJSON());return n=encodeURIComponent(n),(0,r.xhr)({method:"POST",body:"sprunge="+n,uri:"http://sprunge.biojs.net",headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(t,n,r){return e(r.trim())})},shareLink:function(t,e){var n=t.g.config.get("importURL"),r="http://msa.biojs.net/app/?seq=",i=function(t){var n=r+t;if(e)return e(n)};return n?i(n):a.publishWeb(t,i)},saveAsFile:function(t,e){var n=r.fasta.write(t.seqs.toJSON());return s(new Blob([n],{type:"text/plain"}),e)},saveSelection:function(t,e){var n=t.g.selcol.pluck("seqId");if(n.length>0){n=t.seqs.filter(function(t){return n.indexOf(t.get("id"))>=0});for(var i=n.length-1,o=0;0<i?o<=i:o>=i;0<i?o++:o--)n[o]=n[o].toJSON()}else n=t.seqs.toJSON(),console.warn("no selection found");var a=r.fasta.write(n);return s(new Blob([a],{type:"text/plain"}),e)},saveAnnots:function(t,e){var n=t.seqs.map(function(t){if(n=t.get("features"),0!==n.length){var e=t.get("name");return n.each(function(t){return t.set("seqname",e)}),n.toJSON()}});n=(0,i.flatten)((0,i.compact)(n));var o=r.gff.exportLines(n);return s(new Blob([o],{type:"text/plain"}),e)},saveAsImg:function(t,e){var n=t.getView("stage").getView("body").getView("seqblock").el;if("undefined"!=typeof n&&null!==n)return s(o(n.toDataURL("image/png")),e,"image/png")}};e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(3),s=n(12),a=n(39),u=r(a),l=function(t){return this.msa=t,this},c={guessFileFromText:function(t,e){if("undefined"==typeof t||null===t)return console.warn("invalid file format"),["","error"];switch((0,u.default)(t,e)){case"clustal":var n=s.clustal,r="seqs";break;case"fasta":n=s.fasta,r="seqs";break;case"newick":r="newick";break;case"gff":n=s.gff,r="features";break;default:alert("Unknown file format. Please contact us on Github for help.")}return[n,r]},parseText:function(t,e){var n=this.guessFileFromText(t,e),r=i(n,2),o=r[0],s=r[1];return"seqs"===s?[o.parse(t),s]:"features"===s?[o.parseSeqs(t),s]:[t,s]},importFiles:function(t){var e=this;return function(){for(var n=[],r=t.length-1,i=0;0<r?i<=r:i>=r;0<r?i++:i--){var o=t[i],s=new FileReader;s.onload=function(t){return e.importFile(t.target.result)},n.push(s.readAsText(o))}return n}()},importFile:function(t,e){var n=this;e=e||{},e.name=t.name;var r,o=this.parseText(t,e),s=i(o,2),a=s[0],u=s[1];return"error"===u?(alert("An error happened"),"error"):("seqs"===u?(this.msa.seqs.reset(a),this.msa.g.config.set("url","userimport"),this.msa.g.trigger("url:userImport")):"features"===u?this.msa.seqs.addFeatures(a):"newick"===u?this.msa.u.tree.loadTree(function(){return n.msa.u.tree.showTree(t)}):alert("Unknown file!"),r=t.name)},importURL:function(t,e){var n=this;return t=this.msa.u.proxy.corsURL(t),this.msa.g.config.set("url",t),(0,s.xhr)({url:t,timeout:0},function(r,i,o){return r?console.error(r):"error"!==n.importFile(o,{url:t})?(n.msa.g.trigger("import:url",t),e?e():void 0):void 0})}};(0,o.extend)(l.prototype,c),e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i={loadScript:function(t,e){var n=r.mk("script");return n.type="text/javascript",n.src=t,n.async=!0,n.onload=n.onreadystatechange=function(){if(!(t||this.readyState&&"complete"!==this.readyState)){var t=!0;return e()}},document.getElementsByTagName("script")[0].parentNode.appendChild(n)},joinCb:function(t,e,n){e=e||1;var r=0,i=function(t,e){return"undefined"==typeof t||null===t?o():function(){var n;return n="apply",t.indexOf(n)>=0&&t.apply(e,arguments),o()}},o=function(){if(r++,r===e)return t.call(n)};return i}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(t){return this.g=t.g,this},o={corsURL:function(t){return document.URL.indexOf("localhost")>=0&&"/"===t[0]?t:"."===t.charAt(0)||"/"===t.charAt(0)?t:(this.g.config.get("importProxyStripHttp")&&(t=t.replace("http://",""),t=t.replace("https://","")),t=this.g.config.get("importProxy")+t)}};(0,r.extend)(i.prototype,o),e.default=i},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<t.length;n++)e(t[n])}function i(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function o(t,e,n){var r=t;return h(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=d(e,{uri:t}),r.callback=n,r}function s(t,e,n){return e=o(t,e,n),a(e)}function a(t){function e(){4===c.readyState&&setTimeout(o,0)}function n(){var t=void 0;if(t=c.response?c.response:c.responseText||u(c),b)try{t=JSON.parse(t)}catch(t){}return t}function r(t){return clearTimeout(g),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,l(t,x)}function o(){if(!d){var e;clearTimeout(g),e=t.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=x,i=null;return 0!==e?(r={body:n(),statusCode:e,method:m,headers:{},url:p,rawRequest:c},c.getAllResponseHeaders&&(r.headers=f(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),l(i,r,r.body)}}if("undefined"==typeof t.callback)throw new Error("callback argument missing");var a=!1,l=function(e,n,r){a||(a=!0,t.callback(e,n,r))},c=t.xhr||null;c||(c=t.cors||t.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var h,d,g,p=c.url=t.uri||t.url,m=c.method=t.method||"GET",v=t.body||t.data,_=c.headers=t.headers||{},y=!!t.sync,b=!1,x={body:void 0,headers:{},statusCode:0,method:m,url:p,rawRequest:c};if("json"in t&&t.json!==!1&&(b=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),v=JSON.stringify(t.json===!0?v:t.json))),c.onreadystatechange=e,c.onload=o,c.onerror=r,c.onprogress=function(){},c.onabort=function(){d=!0},c.ontimeout=r,c.open(m,p,!y,t.username,t.password),y||(c.withCredentials=!!t.withCredentials),!y&&t.timeout>0&&(g=setTimeout(function(){if(!d){d=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",r(t)}},t.timeout)),c.setRequestHeader)for(h in _)_.hasOwnProperty(h)&&c.setRequestHeader(h,_[h]);else if(t.headers&&!i(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(c.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(c),c.send(v||null),c}function u(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function l(){}var c=n(83),h=n(47),f=n(102),d=n(141);t.exports=s,s.XMLHttpRequest=c.XMLHttpRequest||l,s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:c.XDomainRequest,r(["get","put","post","patch","head","delete"],function(t){s["delete"===t?"del":t]=function(e,n,r){return n=o(e,n,r),n.method=t.toUpperCase(),a(n)}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};e.default=n,n.getMeta=function(t){var e,n,r=!1,i=!1,o={},s={},a=t.split(" ");if(a.length>=1?(r=a.shift(),i=a.join(" ")):r=t,r){var u=r.split("|");for(e=u.pop(),s.en=e;0!=u.length;){var l=u.shift(),c=u.shift();o[l]=c}}else e=r;if(i){var h=i.split("=");if(h.length>1){var f,d;h.length-1,h.forEach(function(t){t=t.trim();var e,r=t.split(" ");r.length>1?(d=r.pop(),e=r.join(" ")):e=t,f?s[f.toLowerCase()]=e:n=e,f=d})}else n=h.shift()}var g={name:e,ids:o,details:s};return n&&(g.desc=n),g};var r={sp:{link:"http://www.uniprot.org/%s",name:"Uniprot"},tr:{link:"http://www.uniprot.org/%s",name:"Trembl"},gb:{link:"http://www.ncbi.nlm.nih.gov/nuccore/%s",name:"Genbank"},pdb:{link:"http://www.rcsb.org/pdb/explore/explore.do?structureId=%s",name:"PDB"}};n.buildLinks=function(t){var e={};return t=t||{},Object.keys(t).forEach(function(n){if(n in r){var i=r[n],o=i.link.replace("%s",t[n]);e[i.name]=o}}),e},n.contains=function(t,e){return"".indexOf.call(t,e,0)!==-1},n.splitNChars=function(t,e){var n,r;e=e||80;var i=[];for(n=0,r=t.length-1;n<=r;n+=e)i.push(t.substr(n,e));return i},n.reverse=function(t){return t.split("").reverse().join("")},n.complement=function(t){var e=t+"",n=[[/g/g,"0"],[/c/g,"1"],[/0/g,"c"],[/1/g,"g"],[/G/g,"0"],[/C/g,"1"],[/0/g,"C"],[/1/g,"G"],[/a/g,"0"],[/t/g,"1"],[/0/g,"t"],[/1/g,"a"],[/A/g,"0"],[/T/g,"1"],[/0/g,"T"],[/1/g,"A"]];for(var r in n)e=e.replace(n[r][0],n[r][1]);return e},n.reverseComplement=function(t){return n.reverse(n.complement(t))},n.model=function(t,e,n){this.seq=t,this.name=e,this.id=n,this.ids={}}},function(t,e,n){"use strict";var r,i=n(1).Model;n(84),t.exports=r=i.extend({constructor:function(t,e){return this.g=e.g,i.apply(this,arguments),this},defaults:{currentSize:5,step:1,originalSize:!1,scaleCategories:[{columnWidth:1,markerStepSize:20,stepSize:0},{columnWidth:3,markerStepSize:20,stepSize:0},{columnWidth:5,markerStepSize:10,stepSize:0},{columnWidth:9,markerStepSize:5,stepSize:1},{columnWidth:15,markerStepSize:2,stepSize:1},{columnWidth:20,markerStepSize:1,stepSize:1},{columnWidth:30,markerStepSize:1,stepSize:1},{columnWidth:45,markerStepSize:1,stepSize:1}]},initialize:function(t){var e=this.get("scaleCategories"),n=this.g.zoomer.get("columnWidth")||this._getScaleInfo().columnWidth,r=_.find(e,{columnWidth:n});if(!r){var i=this._insertScaleCategory(n);r=e[i],this.set("currentSize",i+1)}var o=this.get("currentSize");return this.set("originalSize",o),this.setSize(o),this},_insertScaleCategory:function(t){var e=this.get("scaleCategories"),n=_.findLastIndex(e,function(e){return e.columnWidth<t}),r=e[n],i=n+1,o={columnWidth:t,markerStepSize:r.markerStepSize,stepSize:r.markerStepSize};return e.splice(i,0,o),this.set("scaleCategories",e),i},getSizeRange:function(){return[1,this.get("scaleCategories").length]},bigger:function(){return this.setSize(this.get("currentSize")+this.get("step"))},smaller:function(){return this.setSize(this.get("currentSize")-this.get("step"))},reset:function(){return this.setSize(this.get("originalSize"))},setSize:function(t){var e=this.getSizeRange();t=parseInt(t),t=t<e[0]?e[0]:t>e[1]?e[1]:t,this.set("currentSize",t);var n=this._getScaleInfo();return this.g.zoomer.set({columnWidth:n.columnWidth,stepSize:n.stepSize,markerStepSize:n.markerStepSize}),this},getSize:function(){return this.get("currentSize")},_getScaleInfo:function(){var t=this.getSize(),e=this.get("scaleCategories");return t>0&&t<=e.length?e[t-1]:void console.error("out of bounds")}})},function(t,e,n){"use strict";var r,i=n(91),o=n(1).Model;t.exports=r=o.extend({defaults:{scheme:"taylor",colorBackground:!0,showLowerCase:!0,opacity:.6},initialize:function(t,e,n){return this.colors=new i({seqs:e,conservation:function(){return n.scale(n.conservation())}}),n.on("reset",function(){if("dyn"===this.getSelectedScheme().type){var t;if(t="reset",this.getSelectedScheme().indexOf(t)>=0)return this.getSelectedScheme().reset()}},this)},addStaticScheme:function(t,e){return this.colors.addStaticScheme(t,e)},addDynScheme:function(t,e){return this.colors.addDynScheme(t,e)},getScheme:function(t){return this.colors.getScheme(t)},getSelectedScheme:function(){return this.colors.getScheme(this.get("scheme"))}})},function(t,e,n){"use strict";var r,i=n(1).Model;t.exports=r=i.extend({initialize:function(t,e){return null==this.get("hidden")&&this.set("hidden",[]),this.stats=e},calcHiddenColumns:function(t){for(var e,n=this.get("hidden"),r=t,i=0;i<n.length;i++)e=n[i],e<=r&&r++;return r-t}})},function(t,e,n){"use strict";var r,i=n(1).Model;t.exports=r=i.extend({defaults:{registerMouseHover:!1,registerMouseClicks:!0,importProxy:"https://cors-anywhere.herokuapp.com/",importProxyStripHttp:!0,eventBus:!0,alphabetSize:20,dropImport:!1,debug:!1,hasRef:!1,bootstrapMenu:!1,manualRendering:!1}})},function(t,e,n){"use strict";var r,i=n(21),o=n(1).Model;t.exports=r=o.extend({initialize:function(t){return this.g=t},development:{"msa-tnt":"/node_modules/msa-tnt/build/bundle.js","biojs-io-newick":"/node_modules/biojs-io-newick/build/biojs-io-newick.min.js"},loadPackage:function(t,e){try{return e(n(145)(t))}catch(n){return i.default.loadScript(this._pkgURL(t),e)}},loadPackages:function(t,e){var n=this,r=i.default.joinCb(function(){return e()},t.length);return t.forEach(function(t){return n.loadPackage(t,r)})},_pkgURL:function(t){if(this.g.config.get("debug"))var e=this.development[t];else e="http://wzrd.in/bundle/"+t+"@latest";return e}})},function(t,e,n){"use strict";var r,i=n(1).Model;t.exports=r=i.extend({defaults:{searchText:""}})},function(t,e,n){"use strict";var r,i=n(1).Model;t.exports=r=i.extend({defaults:{searchBox:-10,overviewBox:30,headerBox:-1,alignmentBody:0,scaleSlider:50}})},function(t,e,n){"use strict";var r,i=n(1).Model;t.exports=r=i.extend({defaults:{sequences:!0,markers:!0,metacell:!1,conserv:!1,overviewbox:!1,seqlogo:!1,gapHeader:!1,leftHeader:!0,scaleslider:!1,labels:!0,labelName:!0,labelId:!0,labelPartition:!1,labelCheckbox:!1,metaGaps:!0,metaIdentity:!0,metaLinks:!0},constructor:function(t,e){return this.calcDefaults(e.model),i.apply(this,arguments)},initialize:function(){return this.listenTo(this,"change:metaLinks change:metaIdentity change:metaGaps",function(){return this.trigger("change:metacell")},this),this.listenTo(this,"change:labelName change:labelId change:labelPartition change:labelCheckbox",function(){return this.trigger("change:labels")},this),this.listenTo(this,"change:markers change:conserv change:seqlogo change:gapHeader",function(){return this.trigger("change:header")},this)},calcDefaults:function(t){if(t.length>0){var e=t.at(0),n=e.get("ids");if(void 0!==n&&0===Object.keys(n).length)return this.defaults.metaLinks=!1}}})},function(t,e,n){"use strict";var r,i=n(1).Model;t.exports=r=i.extend({constructor:function(t,e){return this.calcDefaults(e.model),i.apply(this,arguments),this.g=e.g,this.listenTo(this,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",function(){return this.trigger("change:labelWidth",this.getLabelWidth())},this),this.listenTo(this,"change:metaLinksWidth change:metaIdentWidth change:metaGapWidth",function(){return this.trigger("change:metaWidth",this.getMetaWidth())},this),this},defaults:{alignmentWidth:"auto",alignmentHeight:225,columnWidth:15,rowHeight:15,autoResize:!0,labelIdLength:20,labelNameLength:100,labelPartLength:15,labelCheckLength:15,labelFontsize:13,labelLineHeight:"13px",markerFontsize:"10px",stepSize:1,markerStepSize:2,markerHeight:20,residueFont:"13",canvasEventScale:1,minLetterDrawSize:11,boxRectHeight:2,boxRectWidth:2,overviewboxPaddingTop:10,overviewboxWidth:"fixed",overviewboxHeight:"fixed",metaGapWidth:35,metaIdentWidth:40,_alignmentScrollLeft:0,_alignmentScrollTop:0},calcDefaults:function(t){return t.getMaxLength()<200&&t.length<30&&(this.defaults.boxRectWidth=this.defaults.boxRectHeight=5),this},getAlignmentWidth:function(t){return this.get("autoResize")&&void 0!==t?this.get("columnWidth")*t:void 0===this.get("alignmentWidth")||"auto"===this.get("alignmentWidth")||0===this.get("alignmentWidth")?this._adjustWidth():this.get("alignmentWidth")},setLeftOffset:function(t){var e=t;return e=Math.max(0,e),e-=this.g.columns.calcHiddenColumns(e),this.set("_alignmentScrollLeft",e*this.get("columnWidth"))},setTopOffset:function(t){for(var e=Math.max(0,t-1),n=0,r=0;0<e?r<=e:r>=e;0<e?r++:r--)n+=this.model.at(r).attributes.height||1;return this.set("_alignmentScrollTop",n*this.get("rowHeight"))},getLeftBlockWidth:function(){var t=0;return this.g.vis.get("labels")&&(t+=this.getLabelWidth()),this.g.vis.get("metacell")&&(t+=this.getMetaWidth()),t},getMetaWidth:function(){var t=0;return this.g.vis.get("metaGaps")&&(t+=this.get("metaGapWidth")),this.g.vis.get("metaIdentity")&&(t+=this.get("metaIdentWidth")),this.g.vis.get("metaLinks")&&(t+=this.get("metaLinksWidth")),t},getLabelWidth:function(){var t=0;return this.g.vis.get("labelName")&&(t+=this.get("labelNameLength")),this.g.vis.get("labelId")&&(t+=this.get("labelIdLength")),this.g.vis.get("labelPartition")&&(t+=this.get("labelPartLength")),this.g.vis.get("labelCheckbox")&&(t+=this.get("labelCheckLength")),t},_adjustWidth:function(){if(void 0!==this.el&&void 0!==this.model){if(null!=this.el.parentNode&&0!==this.el.parentNode.offsetWidth)var t=this.el.parentNode.offsetWidth;else t=document.body.clientWidth-35;var e=t-this.getLeftBlockWidth(),n=this.getAlignmentWidth(this.model.getMaxLength()-this.g.columns.get("hidden").length),r=Math.min(e,n);return r=Math.floor(r/this.get("columnWidth"))*this.get("columnWidth"),this.attributes.alignmentWidth=r}},autoResize:function(){if(this.get("autoResize"))return this._adjustWidth(this.el,this.model)},autoHeight:function(t){var e=this.getMaxAlignmentHeight();return void 0!==t&&t>0&&(e=Math.min(e,t)),this.set("alignmentHeight",e)},setEl:function(t,e){return this.el=t,this.model=e},_checkScrolling:function(t,e){var n=t[0],r=t[1];return this.set("_alignmentScrollLeft",n,e),this.set("_alignmentScrollTop",r,e)},getMaxAlignmentHeight:function(){var t=0;return this.model.each(function(e){return t+=e.attributes.height||1}),t*this.get("rowHeight")},getMaxAlignmentWidth:function(){return this.model.getMaxLength()*this.get("columnWidth")}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(51),s=r(o),a=n(1).Collection,u=a.extend({model:s.default,constructor:function(){return this.startOnCache=[],this.on("all",function(){return this.startOnCache=[]},this),a.apply(this,arguments)},startOn:function(t){return null==this.startOnCache[t]&&(this.startOnCache[t]=this.where({xStart:t})),this.startOnCache[t]},contains:function(t){return this.reduce(function(e,n){return n||e.contains(t)},!1)},getFeatureOnRow:function(t,e){return this.filter(function(n){return n.get("row")===t&&n.get("xStart")<=e&&e<=n.get("xEnd")})},assignRows:function(){var t=this.max(function(t){return t.get("xEnd")}).attributes.xEnd,e=function(){for(var e=[],n=0;0<t?n<=t:n>=t;0<t?n++:n--)e.push(0);return e}();return this.each(function(t){for(var n=0,r=t.get("xStart"),i=t.get("xEnd"),o=r;r<i?o<=i:o>=i;r<i?o++:o--)e[o]>n&&(n=e[o]),e[o]++;return t.set("row",n)}),(0,i.max)(e)},getCurrentHeight:function(){return this.max(function(t){return t.get("row")}).attributes.row+1},getMinRows:function(){var t=this.max(function(t){return t.get("xEnd")}).attributes.xEnd,e=function(){for(var e=[],n=0;0<t?n<=t:n>=t;0<t?n++:n--)e.push(0);return e}();return this.each(function(t){return function(){for(var n=[],r=t.get("xStart"),i=t.get("xEnd"),o=r;r<i?o<=i:o>=i;r<i?o++:o++)n.push(e[o]++);return n}()}),(0,i.max)(e)}});e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),o=r(i),s=n(35),a=r(s),u=n(1).Collection,l=u.extend({model:o.default,constructor:function(t,e){var n=this;return u.apply(this,arguments),this.g=e,this.on("add reset remove",function(){return n.lengthCache=null,n._bindSeqsWithFeatures()},this),this.on("reset",function(){return n._autoSetRefSeq()}),this._autoSetRefSeq(),this.lengthCache=null,this.features={},this},getMaxLength:function(){return 0===this.models.length?0:(null===this.lengthCache&&(this.lengthCache=this.max(function(t){return t.get("seq").length}).get("seq").length),this.lengthCache)},prev:function(t,e){var n=this.indexOf(t)-1;return n<0&&e&&(n=this.length-1),this.at(n)},next:function(t,e){var n=this.indexOf(t)+1;return n===this.length&&e&&(n=0),this.at(n)},calcHiddenSeqs:function(t){for(var e=t,n=0;0<e?n<=e:n>=e;0<e?n++:n--)this.at(n).get("hidden")&&e++;return e-t},addFeatures:function(t){var e=this;if(null!=t.config){var n=t;if(t=t.seqs,null!=n.config.colors){var r=n.config.colors;_.each(t,function(t){return _.each(t,function(t){if(null!=r[t.feature])return t.fillColor=r[t.feature]})})}}return _.isEmpty(this.features)?this.features=t:_.each(t,function(t,n){return e.features.hasOwnProperty(n)?e.features[n]=_.union(e.features[n],t):e.features[n]=t}),this._bindSeqsWithFeatures()},_bindSeqWithFeatures:function(t){var e=this.features[t.attributes.name];e&&(t.attributes.features=new a.default(e),t.attributes.features.assignRows(),t.attributes.height=t.attributes.features.getCurrentHeight()+1)},_bindSeqsWithFeatures:function(){var t=this;return this.each(function(e){return t._bindSeqWithFeatures(e)})},removeAllFeatures:function(){return delete this.features},_autoSetRefSeq:function(){if(this.length>0)return this.at(0).set("ref",!0)},setRef:function(t){var e=this.get(t);return this.each(function(n){if(t.cid)return e.cid===n.cid?n.set("ref",!0):n.set("ref",!1)}),this.g.config.set("hasRef",!0),this.trigger("change:reference",t)}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(35),o=r(i),s=n(1).Model,a=s.extend({defaults:{name:"",id:"",seq:"",height:1,ref:!1},initialize:function(){if(this.set("grey",[]),null==this.get("features"))return this.set("features",new o.default)}});e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.exporter=e.file=e.seqgen=e.proxy=e.bmath=void 0;var i=n(18),o=r(i),s=n(22),a=r(s),u=n(40),l=r(u),c=n(20),h=r(c),f=n(19),d=r(f);e.bmath=o.default,e.proxy=a.default,e.seqgen=l.default,e.file=h.default,e.exporter=d.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=e.name||e.url||"",r=n.split("."),i=r[r.length-1]||"",o=0;o<s.length;o++){var a=s[o](t,i);if(a)return a}return"unknown"};var n=function(t,e){return("CLUSTAL"===t.substring(0,7)||"clustal"==e||"aln"==e)&&"clustal"},r=function(t,e){return(">"===t.substring(0,1)||"fasta"==e||"fa"==e)&&"fasta"},i=function(t,e){return("("===t.substring(0,1)||"nwk"==e)&&"newick"},o=function(t,e){if(t.length<=10)return!1;var n=t.split("\n");return n[0].indexOf("gff")>=0||e.indexOf("gff")>=0?"gff":n[0].indexOf("#")<0&&2===n[0].split("\t").length&&"gff"},s=[n,r,i,o]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(18),o=r(i),s=n(65).seq,a=n(49),u={_generateSequence:function(t){for(var e="",n=t-1,r=0;0<n?r<=n:r>=n;0<n?r++:r--)e+=u.getRandomChar();return e},getDummySequences:function(t,e){var n=[];"undefined"!=typeof t&&null!==t||(t=o.default.getRandomInt(3,5)),"undefined"!=typeof e&&null!==e||(e=o.default.getRandomInt(50,200));for(var r=1;1<t?r<=t:r>=t;1<t?r++:r--)n.push(new s(u._generateSequence(e),"seq"+r,"r"+r));return n},getRandomChar:function(t){var e=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e.charAt(Math.floor(Math.random()*e.length))},genConservedSequences:function(t,e,n){var r=[];"undefined"!=typeof t&&null!==t||(t=o.default.getRandomInt(3,5)),"undefined"!=typeof e&&null!==e||(e=o.default.getRandomInt(50,200)),n=n||"ACDEFGHIKLMNPQRSTVWY---";for(var i=1;1<t?i<=t:i>=t;1<t?i++:i--)r[i-1]="";for(var l=.2,c=1,h=e-1,f=0;0<h?f<=h:f>=h;0<h?f++:f--){f%3===0&&(c=o.default.getRandomInt(50,100)/100);for(var d=[],g=t-1,p=0;0<g?p<=g:p>=g;0<g?p++:p--){for(var m=0,v=void 0;m<100;){v=u.getRandomChar(n);var _=a(d);if(_.addSeq(v),m++,Math.abs(c-_.scale(_.conservation())[0])<l)break}r[p]+=v,d.push(v)}}for(var y=[],b=1;1<t?b<=t:b>=t;1<t?b++:b--)y.push(new s(r[b-1],"seq"+b,"r"+b));return y}};e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(36),s=(r(o),function(t){return this.msa=t,this}),a={loadTree:function(t){return this.msa.g.package.loadPackages(["msa-tnt","biojs-io-newick"],t)},showTree:function(t){function e(t){if(null!=t.children)t.children.forEach(function(t){return e(t)});else{var n=u.filter(function(e){return e.name===t.name})[0];null!=n&&("number"==typeof n.id?(n.ids=["s"+(n.id+1)],t.name="s"+(n.id+1)):t.name=n.id)}}var r=window.require("biojs-io-newick"),i=window.require("msa-tnt");if("string"==typeof t)var o=r.parse_newick(t);else o=t;var s,a=new i.selections;0===this.msa.el.getElementsByClassName("tnt_groupDiv").length?(s=document.createElement("div"),this.msa.el.appendChild(s)):(s=this.msa.el.getElementsByClassName("tnt_groupDiv")[0].parentNode,s.innerHTML="");var u=this.msa.seqs.toJSON();e(o);var l=i.app({seqs:u,tree:o});return new i.adapters.tree({model:l,el:s,sel:a}),new i.adapters.msa({model:l,sel:a,msa:this.msa}),l.models.forEach(function(t){return delete t.collection,Object.setPrototypeOf(t,n(1).Model.prototype)}),this.msa.seqs.reset(l.models),console.log(this.msa.seqs)},require:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return n(146)(t)})};(0,i.extend)(s.prototype,a),e.default=s},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(11),o=n(15),s=n(10),a=function(t,e){var n=t||{};e||(e={}),this.cid=s.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=s.defaults({},n,s.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};s.extend(a.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return s.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,a,u,l,c,h,f;if(null==t)return this;if("object"===("undefined"==typeof t?"undefined":r(t))?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;a=n.unset,l=n.silent,u=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),f=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],s.isEqual(f[i],e)||u.push(i),s.isEqual(h[i],e)?delete this.changed[i]:this.changed[i]=e,a?delete f[i]:f[i]=e;if(!l){u.length&&(this._pending=n);for(var d=0,g=u.length;d<g;d++)this.trigger("change:"+u[d],this,f[u[d]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&s.clone(this.changed);var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)s.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return!!e.set(e.parse(r,t),t)&&(n&&n(e,r,t),void e.trigger("sync",e,r,t))},wrapError(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,o,a,u=this.attributes;if(null==t||"object"===("undefined"==typeof t?"undefined":r(t))?(i=t,n=e):(i={})[t]=e,n=s.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=s.extend({},u,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){
l.attributes=u;var e=l.parse(t,n);return n.wait&&(e=s.extend(i||{},e)),!(s.isObject(e)&&!l.set(e,n))&&(c&&c(l,t,n),void l.trigger("sync",l,t,n))},wrapError(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"!==o||n.attrs||(n.attrs=i),a=this.sync(o,this,n),i&&n.wait&&(this.attributes=u),a},destroy:function t(e){e=e?s.clone(e):{};var n=this,r=e.success,t=function(){n.stopListening(),n.trigger("destroy",n,n.collection,e)};if(e.success=function(i){(e.wait||n.isNew())&&t(),r&&r(n,i,e),n.isNew()||n.trigger("sync",n,i,e)},this.isNew())return e.success(),!1;wrapError(this,e);var i=this.sync("delete",this,e);return e.wait||t(),i},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||urlError();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,s.extend(e,{validationError:n})),!1)}});var u=["keys","values","pairs","invert","pick","omit","chain","isEmpty"];s.each(u,function(t){s[t]&&(a.prototype[t]=function(){var e=slice.call(arguments);return e.unshift(this.attributes),s[t].apply(s,e)})}),a.extend=o,t.exports=a},function(t,e){"use strict";function n(t){var e={};return t.split(";").forEach(function(t){var n,r,i;t.indexOf("=")>0?(n=t.split("="),r=n[0],i=n[1],e[r]=i):t.indexOf(" ")>0&&(n=t.split(" "),r=n[0],i=n[1].replace(/"/g,""),e[r]=i)}),e}function r(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function i(t,e,n){return 3===t.length?i(t[0],t[1],t[2]):"#"+r(t)+r(e)+r(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.extractKeys=n,e.rgbToHex=i,e.default={extractKeys:n,rgbToHex:i}},function(t,e){"use strict";t.exports=function(t,e,n){t.beginPath(),t.moveTo(0,e),t.lineTo(n,e),t.lineWidth=1,t.strokeStyle="#999999",t.stroke()}},function(t,e){"use strict";t.exports=function(t,e,n,r,i,o,s){t.font=o+"px Arial",t.textAlign=s?"right":"center",t.fillStyle="#666666",t.fillText(i,e+r/2,n)}},function(t,e){"use strict";t.exports=function(t,e,n,r,i){i=i||"#999999",t.beginPath(),t.moveTo(e,n),t.lineTo(e,n+r),t.lineWidth=1,t.strokeStyle=i,t.stroke()}},function(t,e){"use strict";function n(t){var e=r.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=n;var r=Object.prototype.toString},function(t,e){"use strict";var n;t.exports=n={rel:function(t){var e,n,r,i;return e=t.offsetX,n=t.offsetY,void 0==e&&(r=i.getBoundingClientRect(),i=t.target||t.srcElement,void 0==e&&(e=t.clientX-r.left,n=t.clientY-r.top),void 0==e&&(e=t.pageX-i.offsetLeft,n=t.pageY-i.offsetTop),void 0==e)?void console.log(t,"no mouse event defined. your browser sucks"):[e,n]},abs:function(t){var e,n;return e=t.pageX,n=t.pageY,void 0==e&&(e=t.layerX,n=t.layerY),void 0==e&&(e=t.clientX,n=t.clientY),void 0==e&&(e=t.x,n=t.y),[e,n]},wheelDelta:function(t){var e;return e=[t.deltaX,t.deltaY],void 0==e[0]&&t.mozMovementX&&(e=[0,t.mozMovementX]),isNaN(e[0])&&(e[0]=0),isNaN(e[1])&&(e[1]=0),e}}},function(t,e,n){"use strict";var r=n(10),i=function t(e,n){if(!this||this.constructor!==t)return new t(e);if(void 0===e||"string"==typeof e)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(e),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],r.extend(this,n)};i.prototype.addSeq=function(t){this.seqs.push(t),this._reset()},i.prototype.removeSeq=function(t){"number"==typeof t?this.seqs.splice(t,1):r.each(this.seqs,function(e,n){t===e&&this.seqs.splice(n,1)}.bind(this)),this._reset()},i.prototype.addSeqs=function(t){t.forEach(function(t){this.addSeq(t)}.bind(this))},i.prototype.resetSeqs=function(t){if(this.seqs=[],!t instanceof Array||"_byId"in t){this.mseqs=t;var e=function(){var t=this.mseqs.pluck("seq");this.resetSeqs(t)};t.on("add change reset ",e,this),e.call(this)}else this.addSeqs(t),this._reset(),this.trigger("reset")};var o=["consensus","frequency","maxLength","ic","gaps"];i.prototype._reset=function(){for(var t=0;t<o.length;t++)this["_"+o[t]]=void 0;this._identity=void 0,this._background=void 0},i.prototype.setBackground=function(t){this._useBackground=t,this._reset()},i.prototype.useBackground=function(){this.setBackground(!0)},i.prototype.setDNA=function(){this.alphabetSize=4},i.prototype.setProtein=function(){this.alphabetSize=20},o.forEach(function(t){i.prototype[t]=function(){return void 0===this["_"+t]&&(this["_"+t]=this[t+"Calc"]()),this["_"+t]}}),i.prototype.identity=function(t){var e;return(void 0===this._identity||t)&&(e=this.identityCalc(t),this._identity=void 0),this._identity||e},i.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},i.prototype.frequencyCalc=function(t){var e,n;e=new Array(this.maxLength()),n=new Array(this.seqs.length);var i=this.ignoredChars;return void 0!==t&&t.all&&(i=[]),r.each(this.seqs,function(t){r.each(t,function(t,r){i.indexOf(t)>=0||(void 0===e[r]&&(e[r]={}),void 0===e[r][t]&&(e[r][t]=0),e[r][t]++,void 0===n[r]&&(n[r]=0),n[r]++)})}),r.each(e,function(t,i){return r.each(t,function(t,r){return e[i][r]=t/n[i]})}),this._frequency=e,e},i.prototype.backgroundCalc=function(){var t={},e=0;return r.each(this.seqs,function(n){r.each(n,function(n){return void 0===t[n]&&(t[n]=0),t[n]++,e++})}),t=r.mapValues(t,function(t){return t/e}),this._background=t,t},i.prototype.icCalc=function(){var t=this.frequency();if(this._useBackground)var e=this.background();var n=this.ignoredChars,i=this._useBackground,o=r.map(t,function(t){return r.reduce(t,function(t,r,o){return n.indexOf(o)>=0?t:(i&&(r/=e[o]),t-r*(Math.log(r)/Math.log(2)))},0)});return this._ic=o,o},i.prototype.conservation=function(t){var e=this.ic(),n=this.gaps(),i=this;t=t||this.alphabetSize;var o=Math.log(t)/Math.log(2),s=0;return r.map(e,function(t){var e=o-t;return i.useGaps&&(e*=1-n[s++]),e})},i.prototype.conservResidue=function(t){var e,n=t?t.alphabetSize:void 0,i=this.ignoredChars;e=void 0!==t&&t.scaled?this.scale(this.conservation(n)):this.conservation(n);var o,s=this.frequency();return r.map(s,function(t,n){o=r.reject(r.keys(t),function(t){return i.indexOf(t)>=0});var s={};return r.each(o,function(r){s[r]=t[r]*e[n]}),s})},i.prototype.conservResidue2=function(t){var e=this.frequency(),n=this.conservation(t),i=this.background();return r.map(e,function(t,o){return r.map(t,function(t){var s=r.reduce(e[o],function(t,e){return t+e/i[o]},0);return t/i[o]/s*n[o]},0)})},i.prototype.scale=function(t,e){e=e||this.alphabetSize;var n=Math.log(e)/Math.log(2);return r.map(t,function(t){return t/n})},i.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:r.max(this.seqs,function(t){return t.length}).length},i.prototype.consensusCalc=function(){var t=new Array(this.maxLength());return r.each(this.seqs,function(e){r.each(e,function(e,n){void 0===t[n]&&(t[n]={}),void 0===t[n][e]&&(t[n][e]=0),t[n][e]++})}),this._consensus=r.reduce(t,function(t,e){var n;return n=r.keys(e),t+=r.max(n,function(t){return e[t]})},""),this._consensus},i.prototype.identityCalc=function(t){var e=t||this.consensus();return this._identity=this.seqs.map(function(t){for(var n=0,r=0,i=0;i<t.length;i++)"-"!==t[i]&&"-"!==e[i]&&(r++,t[i]===e[i]&&n++);return n/r}),this._identity},i.prototype.gapsCalc=function(){var t=this.maxLength();if(t<=1||"undefined"==typeof t)return[];var e=new Array(this.maxLength());return r.each(this.seqs,function(t){r.each(t,function(t,n){void 0===e[n]&&(e[n]={g:0,t:0}),t="-"===t?"g":"t",e[n][t]++})}),this._gaps=r.map(e,function(t){return t.g/(t.g+t.t)}),this._gaps},r.mixin({mapValues:function(t,e){return r.object(r.keys(t),r.map(t,e))}}),n(16).mixin(i.prototype),t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9);Object.defineProperty(e,"SelectionManager",{enumerable:!0,get:function(){return r.SelectionManager}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1).Model,i=r.extend({defaults:{xStart:-1,xEnd:-1,height:-1,text:"",fillColor:"red",fillOpacity:.5,type:"rectangle",borderSize:1,borderColor:"black",borderOpacity:.5,validate:!0,row:0},initialize:function(t){if(null!=t.start&&this.set("xStart",t.start-1),null!=t.end&&this.set("xEnd",t.end-1),null!=t.attributes&&(null!=t.attributes.Name&&this.set("text",t.attributes.Name),null!=t.attributes.Color&&this.set("fillColor",t.attributes.Color)),this.attributes.xEnd<this.attributes.xStart&&console.warn("invalid feature range for",this.attributes),!_.isNumber(this.attributes.xStart)||!_.isNumber(this.attributes.xEnd))return console.warn("please provide numeric feature ranges",t),this.set("xStart",parseInt(this.attributes.xStart)),this.set("xEnd",parseInt(this.attributes.xEnd))},validate:function(){if(isNaN(this.attributes.xStart||isNaN(this.attributes.xEnd)))return"features need integer start and end."},contains:function(t){return this.attributes.xStart<=t&&t<=this.attributes.xEnd}});e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(37);Object.defineProperty(e,"seq",{enumerable:!0,get:function(){return r(i).default}});var o=n(36);Object.defineProperty(e,"seqcol",{enumerable:!0,get:function(){return r(o).default}});var s=n(51);Object.defineProperty(e,"feature",{enumerable:!0,get:function(){return r(s).default}});var a=n(35);Object.defineProperty(e,"featurecol",{enumerable:!0,get:function(){return r(a).default}})},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function n(){return{keys:Object.keys||function(t){if("object"!==("undefined"==typeof t?"undefined":r(t))&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++u+"";return t?t+e:e},has:function(t,e){return s.call(t,e)},each:function(t,e,n){if(null!=t)if(o&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,o=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u=0,l=n();i={on:function(t,e,n){return h(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function t(e,n,r){if(!h(this,"once",e,[n,r])||!n)return this;var i=this,t=l.once(function(){i.off(e,t),n.apply(this,arguments)});return t._callback=n,this.on(e,t,r)},off:function(t,e,n){var r,i,o,s,a,u,c,f;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:l.keys(this._events),a=0,u=s.length;a<u;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,f=o.length;c<f;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&f(n,e),r&&f(r,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var o=!e&&!n;"object"===("undefined"==typeof e?"undefined":r(e))&&(n=this),t&&((i={})[t._listenerId]=t);for(var s in i)i[s].off(e,n,this),o&&delete this._listeners[s];return this}};var c=/\s+/,h=function(t,e,n,i){if(!n)return!0;if("object"===("undefined"==typeof n?"undefined":r(n))){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(c.test(n)){for(var s=n.split(c),a=0,u=s.length;a<u;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},f=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};l.each(d,function(t,e){i[e]=function(e,n,i){return(this._listeners||(this._listeners={}))[e._listenerId||(e._listenerId=l.uniqueId("l"))]=e,"object"===("undefined"==typeof n?"undefined":r(n))&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.BackboneEvents=i}(void 0)},function(t,e,n){"use strict";var r=n(11),i=n(15),o=n(10),s=n(42),a=[],u=a.slice,l=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,o.extend({silent:!0},e))},c={add:!0,remove:!0,merge:!0},h={add:!0,remove:!1};o.extend(l.prototype,r,{model:s,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(t,e){return this.set(t,o.extend({merge:!1},e,h))},remove:function(t,e){var n=!o.isArray(t);t=n?[t]:o.clone(t),e||(e={});for(var r=0,i=t.length;r<i;r++){var s=t[r]=this.get(t[r]);if(s){var a=this.modelId(s.attributes);null!=a&&delete this._byId[a],delete this._byId[s.cid];var u=this.indexOf(s);this.models.splice(u,1),this.length--,e.silent||(e.index=u,s.trigger("remove",s,this,e)),this._removeReference(s,e)}}return n?t[0]:t},set:function(t,e){e=o.defaults({},e,c),e.parse&&(t=this.parse(t,e));var n=!o.isArray(t);t=n?t?[t]:[]:t.slice();for(var r,i,s,a,u,l=e.at,h=this.comparator&&null==l&&e.sort!==!1,f=o.isString(this.comparator)?this.comparator:null,d=[],g=[],p={},m=e.add,v=e.merge,_=e.remove,y=!(h||!m||!_)&&[],b=0,x=t.length;b<x;b++){if(s=t[b],a=this.get(s))_&&(p[a.cid]=!0),v&&s!==a&&(s=this._isModel(s)?s.attributes:s,e.parse&&(s=a.parse(s,e)),a.set(s,e),h&&!u&&a.hasChanged(f)&&(u=!0)),t[b]=a;else if(m){if(i=t[b]=this._prepareModel(s,e),!i)continue;d.push(i),this._addReference(i,e)}i=a||i,i&&(r=this.modelId(i.attributes),!y||!i.isNew()&&p[r]||y.push(i),p[r]=!0)}if(_){for(var b=0,x=this.length;b<x;b++)p[(i=this.models[b]).cid]||g.push(i);g.length&&this.remove(g,e)}if(d.length||y&&y.length)if(h&&(u=!0),this.length+=d.length,null!=l)for(var b=0,x=d.length;b<x;b++)this.models.splice(l+b,0,d[b]);else{y&&(this.models.length=0);for(var w=y||d,b=0,x=w.length;b<x;b++)this.models.push(w[b])}if(u&&this.sort({silent:!0}),!e.silent){for(var S=null!=l?o.clone(e):e,b=0,x=d.length;b<x;b++)null!=l&&(S.index=l+b),(i=d[b]).trigger("add",i,this,S);(u||y&&y.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,o.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,o.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return u.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return o.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return o.invoke(this.models,"get",t)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){n[t.reset?"reset":"set"](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},wrapError(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?o.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?o.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_isModel:function(t){return t instanceof s},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,r),"change"===t){var i=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e))}this.trigger.apply(this,arguments)}}});var f=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];o.each(f,function(t){o[t]&&(l.prototype[t]=function(){var e=u.call(arguments);return e.unshift(this.models),o[t].apply(o,e)})});var d=["groupBy","countBy","sortBy","indexBy"];o.each(d,function(t){o[t]&&(l.prototype[t]=function(e,n){var r=o.isFunction(e)?e:function(t){return t.get(e)};return o[t](this.models,r,n)})}),l.extend=i,t.exports=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),o=r(i),s=n(25),a=r(s),u=void 0;e.default=u={parse:function(t){var e=[];if("[object Array]"===Object.prototype.toString.call(t))var n=t;else var n=t.split("\n");if(n[0].slice(0,6)===!1)throw new Error("Invalid CLUSTAL Header");for(var r=0,i=1,o=0;r<n.length;){r++;var s=n[r];if(null!=s&&0!==s.length)if(0!==s.trim().length){if(!a.default.contains(s,"*")){1===i&&(o=0,i=0);var u=/^(?:\s*)(\S+)(?:\s+)(\S+)(?:\s*)(\d*)(?:\s*|$)/g,l=u.exec(s);if(null!=l){var c=l[1].trim(),h=l[2].trim();if(o>=e.length){var f=a.default.getMeta(c.trim());c=f.name;var d=new a.default.model(h,c,o);d.ids=f.ids||{},d.details=f.details||{};var g=Object.keys(d.ids);g.length>0&&(d.id=d.ids[g[0]]),e.push(d)}else e[o].seq+=h;o++}else console.log("parse error",s)}}else i=1;else i=1}return e=e.filter(function(t){return t.seq.search(/[:.*]/i)===-1&&t.name.search(/[:.*]/i)===-1})}},o.default.mixin(u)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),o=r(i),s=n(64),a=r(s),u=n(13),l=r(u),c=void 0;e.default=c={getMeta:o.default.getMeta,extend:function(t){var e=(0,a.default)(c);return c.getMeta=t,e},parse:function(t){var e=[];if(!t||0===t.length)return[];"[object Array]"!==Object.prototype.toString.call(t)&&(t=t.split("\n"));for(var n=c,r=n.getMeta,i=0;i<t.length;i++){var s=t[i];if(">"===s[0]||";"===s[0]){var a=s.slice(1).trim(),u=r(a.trim());a=u.name;var l=u.id||e.length,h=new o.default.model("",u.name,l);h.ids=u.ids||{},h.details=u.details||{},e.push(h)}else h.seq+=s}return e},write:function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];null!=e&&(i=e(i)),n+=">"+i.name+"\n",n+=o.default.splitNChars(i.seq,80).join("\n"),n+="\n"}return n}},l.default.mixin(c)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),o=r(i),s=n(43),a=r(s),u=n(59),l=r(u),c=function(){};o.default.mixin(c),e.default=c,c.parseLines=function(t){var e=t.split("\n"),n={},r=[];n.type=c._guessType(e);var i=0;if("jalview"===n.type){var o=l.default.readHeader(e);i=o.offset,n.colors=o.colors,r=o.features}for(var s=i;s<e.length;s++){var a=e[s];0!==a.length&&"#"!==a[0]&&(a=c.parseLine(a),void 0!==a&&r.push(a))}return{features:r,config:n}},c._guessType=function(t){return"##gff-version 3"===t[0].substring(0,15)?"gff3":t[0].indexOf("#")<0&&2===t[0].split("\t").length?"jalview":"gff3"},c.parseSeqs=c.parse=function(t){var e=c.parseLines(t),n={};return e.features.forEach(function(t){var e=t.seqname;void 0===n[e]&&(n[e]=[]),delete t.seqname,n[e].push(t)}),delete e.features,e.seqs=n,e},c.parseLine=function(t){var e={},n=t.split(/\s+/);if(1!==n.length){e.seqname=n[0],e.source=n[1],e.feature=n[2],e.start=parseInt(n[3]),e.end=parseInt(n[4]),e.score=n[5],e.strand=n[6],e.frame=n[7];var r=n.slice(8).join(" ");return Object.keys(e).forEach(function(t){"string"==typeof e[t]&&(e[t]=e[t].trim()),"."===e[t]&&(e[t]=void 0)}),e.score&&(e.score=parseFloat(e.score)),e.frame&&(e.frame=parseInt(e.frame)),e.attributes=a.default.extractKeys(r),e}},c.exportLine=function(t){var e=Object.keys(t.attributes).map(function(e){return e+"="+t.attributes[e]}).join(";"),n=[t.seqname,t.source,t.feature,t.start,t.end,t.score,t.strand,t.frame,e];return n=n.map(function(t){return void 0===t?".":t}),n.join("\t")},c.exportLines=function(t){return"##gff-version 3\n"+t.map(c.exportLine).join("\n")},c.exportSeqs=c.export=function(t){var e=[],n=function(t){t.seqname=r,e.push(t)};for(var r in t)t[r].forEach(n);return c.exportLines(e)},c.utils=a.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(43),i={};e.default=i,i.readHeader=function(t){for(var e,n={},r=0,o=[];r<t.length;r++){var s=t[r];if(s.indexOf("#")>=0)break;var a=s.split(/\t/),u=a[0].trim();if("GFF"===u)break;if(2===a.length)if("startgroup"===u)e=a[1].trim();else{if("endgroup"===u){e="";continue}n[a[0]]=i.parseColor(a[1])}else if(a.length>=5){var l=i.parseLine(a);e&&(l.attributes.Parent=e),o.push(l)}}return{offset:r,colors:n,features:o}},i.parseColor=function(t){return t.indexOf(",")>=0?(0,r.rgbToHex)(t.split(",").map(function(t){return parseInt(t)})):6===t.length&&parseInt(t.charAt(0),16)<=16&&"bisque"!==t?"#"+t:t},i.parseLine=function(t){var e={attributes:{}};return e.attributes.Name=t[0].trim(),e.seqname=t[1].trim(),e.start=parseInt(t[3]),e.end=parseInt(t[4]),e.feature=t[5].trim(),"ID_NOT_SPECIFIED"===e.seqname&&(e.seqname=t[2].trim()),e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(13),o=r(i),s=function t(e){return this.constructor!=t?new t(e):(this.matrix={},this.parsingOrder=[],void 0!=e&&this.parse(e),this)};o.default.mixin(s),t.exports=s,s.prototype.parse=function(t){return t.split("\n").forEach(function(t){this.parseLine(t)}.bind(this)),this.buildMatrix(),this.matrix},s.read=function(t,e){return(new s).read(t,e)},s.parse=function(t){return(new s).parse(t)},s.prototype.parseLine=function(t){var e=t.charAt(0);if("#"!==e){this.parsingOrder.push(e);for(var n=t.substring(1),r=n.split(/\s+/).filter(function(t){return t.length>0}).map(function(t){return parseInt(t)}),i={},o=0;o<r.length;o++)i[this.parsingOrder[o]]=r[o];this.matrix[e]=i}},s.prototype.export=function(){return s.export(this.matrix)},s.export=function(t){var e=[],n=1;"matrix"in t&&(t=t.matrix);for(var r in t){for(var i=r,o=Object.keys(t[r]),s=0;s<n;s++)i+="\t"+t[r][o[s]];e.push(i),n++}return e.join("\n")},s.prototype.buildMatrix=function(){for(var t=this.parsingOrder.length-1;t>=0;t--){var e=this.parsingOrder[t],n=this.matrix[e];for(var r in n)this.matrix[r][e]=n[r]}}},function(t,e){"use strict";function n(t){for(var e=[],n={},i=t.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),o=0;o<i.length;o++){var s=i[o],a=void 0;switch(s){case"(":a={},n.children=[a],e.push(n),n=a;break;case",":a={},e[e.length-1].children.push(a),n=a;break;case")":n=e.pop();break;case":":break;default:var u=i[o-1];if(")"==u||"("==u||","==u)n.name=s;else if(":"==u)"undefined"==typeof s?"undefined":r(s),isNaN(s)||(n.branch_length=parseFloat(s));else if("="==u){var l=i[o-2];switch(l){case"D":n.duplication=s;break;case"G":n.gene_id=s;break;case"T":n.taxon_id=s}}}}return n}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.parseNhx=e.parse=void 0;var i=n(63),o=r(i),s=n(61),a=r(s),u={};u.parse=o.default,u.parseNhx=a.default,e.default=u,e.parse=o.default,e.parseNhx=a.default},function(t,e){"use strict";function n(t){for(var e=[],n={},r=t.split(/\s*(;|\(|\)|,|:)\s*/),i=0;i<r.length;i++){var o=r[i],s=void 0;switch(o){case"(":s={},n.children=[s],e.push(n),n=s;break;case",":s={},e[e.length-1].children.push(s),n=s;break;case")":n=e.pop();break;case":":break;default:var a=r[i-1];")"==a||"("==a||","==a?n.name=o:":"==a&&(n.branch_length=parseFloat(o))}}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";function n(t,e,n){for(var r=[],i=t<e,o=n?i?e+1:e-1:e,s=t;i?s<o:s>o;i?s++:s--)r.push(s);return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t=t||{};for(var e=n(0,arguments.length,!1),r=0;r<e.length;r++){var i=e[r];if(arguments[i])for(var o=0;o<arguments[i].length;o++){var s=arguments[i][o];arguments[i].hasOwnProperty(s)&&(t[s]=arguments[i][s])}}return t}},function(t,e,n){"use strict";t.exports.seq=n(66)},function(t,e){"use strict";t.exports=function(t,e,n){this.seq=t,this.name=e,this.id=n,this.meta={}}},function(t,e,n){"use strict";t.exports=n(73)},function(t,e){"use strict";t.exports={render_x_axis_label:function(){var t="Model Position";this.display_ali_map&&(t="Alignment Column"),this.called_on.find(".logo_xaxis").remove(),this.called_on.prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+t+"</p></div>")},render_y_axis_label:function(){this.dom_element.parent().before('<canvas class="logo_yaxis" height="'+this.options.height+'" width="55"></canvas>');var t=this.called_on.find(".logo_yaxis"),e=(Math.abs(this.data.max_height),isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),null),n="Information Content (bits)";e=t[0].getContext("2d"),e.beginPath(),e.moveTo(55,1),e.lineTo(40,1),e.moveTo(55,this.info_content_height),e.lineTo(40,this.info_content_height),e.moveTo(55,this.info_content_height/2),e.lineTo(40,this.info_content_height/2),e.lineWidth=1,e.strokeStyle="#666666",e.stroke(),e.fillStyle="#666666",e.textAlign="right",e.font="bold 10px Arial",e.textBaseline="top",e.fillText(parseFloat(this.data.max_height).toFixed(1),38,0),e.textBaseline="middle",e.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2),e.fillText("0",38,this.info_content_height),"score"===this.data.height_calc&&(n="Score (bits)"),e.save(),e.translate(5,this.height/2-20),e.rotate(-Math.PI/2),e.textAlign="center",e.font="normal 12px Arial",e.fillText(n,1,0),e.restore(),e.fillText("occupancy",55,this.info_content_height+7),this.show_inserts&&(e.fillText("ins. prob.",50,280),e.fillText("ins. len.",46,296))}}},function(t,e){"use strict";var n=null;t.exports=function(){if(!n){var t=document.createElement("canvas");n=!(!t.getContext||!t.getContext("2d"))}return n}},function(t,e){"use strict";t.exports={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"}},function(t,e){"use strict";t.exports={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t,e,n){t.find(".logo_settings_switch, .logo_settings .close").on("click",function(t){t.preventDefault(),r(".logo_settings").toggle()}),t.find(".logo_reset").on("click",function(t){t.preventDefault(),e.changeZoom({target:e.default_zoom})}),t.find(".logo_change").on("click",function(t){t.preventDefault()}),t.find(".logo_zoomin").on("click",function(t){t.preventDefault(),e.changeZoom({distance:.1,direction:"+"})}),t.find(".logo_zoomout").on("click",function(t){t.preventDefault(),e.changeZoom({distance:.1,direction:"-"})}),t.find(".logo_scale").on("change",function(t){e.toggleScale(this.value)}),t.find(".logo_color").on("change",function(t){e.toggleColorscheme(this.value)}),t.find(".logo_ali_map").on("change",function(t){e.toggleAliMap(this.value)}),t.find(".logo_position").on("change",function(){this.value.match(/^\d+$/m)&&e.scrollToColumn(this.value,1)}),n.on("dblclick",function(n){console.log("dblclick",e),offset=e.logo_graphic.offset(),x=parseInt(n.pageX-offset.left,10),window_position=n.pageX-t.parent().offset().left,col=e.columnFromCoordinates(x),console.log("col",col),current=e.zoom,current<1?e.changeZoom({target:1,offset:window_position,column:col}):e.changeZoom({target:.3,offset:window_position,column:col})}),r(document).on(t.attr("id")+".scrolledTo",function(t,n,r,i){e.render({target:n})}),r(document).on("keydown",function(t){t.ctrlKey||(61!==t.which&&107!==t.which||(zoom+=.1,e.changeZoom({distance:.1,direction:"+"})),109!==t.which&&0!==t.which||(zoom-=.1,e.changeZoom({distance:.1,direction:"-"})))})}},function(t,e,n){"use strict";_=n(10);var r=n(69),i=n(76),o=n(75),s=n(2),a=n(68),u=n(72),l=n(74),c=n(5);t.exports=s.extend({options:{xaxis:!0,yaxis:!0,height:300,column_width:34,debug:!0,scale_height_enabled:!0,scaled_max:!0,zoom_buttons:!0,colorscheme:"default",data:void 0,start:1,end:void 0,zoom:.4,colors:void 0,divider:!1,show_probs:!1,divider_step:5,show_divider:!1,border:!1,settings:!1,scroller:!0,positionMarker:!0},loadDefault:function(t){this.data=t.data,this.display_ali_map=0,this.alphabet=t.data.alphabet||"dna",this.start=t.start,this.zoom=parseFloat(t.zoom)||.4,this.default_zoom=this.zoom,this.column_width=t.column_width,this.height=t.height,this.canvas_width=5e3,this.scale_height_enabled=t.scale_height_enabled,this.scrollme=null,this.previous_target=0,this.rendered=[],this.previous_zoom=0,void 0==this.data.max_height&&(this.data.max_height=this.calcMaxHeight(this.data.heightArr)),this.data.insert_probs&&this.data.delete_probs||(this.options.show_probs=!1),t.scaled_max?this.data.max_height=t.data.max_height_obs||this.data.max_height||2:this.data.max_height=t.data.max_height_theory||this.data.max_height||2,t.colors?this.changeColors(t.colors):"aa"===this.alphabet?(this.aa_colors=n(70),this.changeColors(this.aa_colors)):(this.dna_colors=n(71),this.changeColors(this.dna_colors));
},initialize:function(t){if(!r())return void(this.el.textContent="Your browser doesn't support canvas.");void 0==t.data&&(this.el.textContent="No data added."),_.extend(this.options,t);var e=this.options;if(this.loadDefault(e),this.options.show_probs?this.data.processing&&/^observed|weighted/.test(this.data.processing)?(this.show_inserts=0,this.info_content_height=this.height-14):(this.show_inserts=1,this.info_content_height=this.height-44):this.info_content_height=this.height,this.$el=c(this.el),this.initDivs(),this.options.settings){var n=l(this,e);this.$el.append(n)}u(this.$el,this,this.logo_graphic)},initDivs:function(){var t=h("div");t.className="logo_graphic",this.logo_graphic=c(t);var e=h("div");if(e.className="logo_container",e.style.height=this.height,this.container=c(e),this.container.append(t),this.$el.append(e),this.options.divider){var n=h("div");n.className="logo_divider",this.$el.append(n)}this.dom_element=c(t),this.called_on=this.$el,this.options.xaxis&&a.render_x_axis_label.call(this),this.options.yaxis?a.render_y_axis_label.call(this):this.container[0].style.marginLeft="0px"},render:function(){return i.call(this),this},changeColors:function(t){this.colors=t,void 0!=t&&void 0!=t.type&&(this.colorscheme="dynamic"),this.buildAlphabet()},buildAlphabet:function(){this.letters={};var t=this.colors;if("dynamic"==this.colorscheme){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");t={},e.forEach(function(e){t[e]=""})}for(var n in t)if(t.hasOwnProperty(n)){var r={color:t[n]};this.letters[n]=new o(n,r)}},toggleColorscheme:function(t){var e=this.currentColumn();t?"default"===t?this.colorscheme="default":this.colorscheme="consensus":"default"===this.colorscheme?this.colorscheme="consensus":this.colorscheme="default",this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleScale:function(t){var e=this.currentColumn();t?"obs"===t?this.data.max_height=this.data.max_height_obs:this.data.max_height=this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height=this.data.max_height_theory:this.data.max_height=this.data.max_height_obs,this.rendered=[],this.logoYAxis&&this.logoYAxis.remove(),a.render_y_axis_label.call(this),this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleAliMap:function(t){var e=this.currentColumn();t?"model"===t?this.display_ali_map=0:this.display_ali_map=1:1===this.display_ali_map?this.display_ali_map=0:this.display_ali_map=1,a.render_x_axis_label(this),this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},currentColumn:function(){var t=this.scrollme.scroller.getValues().left,e=this.column_width*this.zoom,n=t/e,r=this.container.width()/e/2;return Math.ceil(n+r)},changeZoom:function(t){var e=.3,n=null;if(t.target?e=t.target:t.distance&&(e=(parseFloat(this.zoom)-parseFloat(t.distance)).toFixed(1),"+"===t.direction&&(e=(parseFloat(this.zoom)+parseFloat(t.distance)).toFixed(1))),e>1?e=1:e<.1&&(e=.1),n=this.logo_graphic.width()*e/this.zoom,n>this.container.width())if(t.column){this.zoom=e,this.render({zoom:this.zoom}),this.scrollme.reflow();var r=this.coordinatesFromColumn(t.column);this.scrollme.scroller.scrollTo(r-t.offset)}else{var i=this.currentColumn();this.zoom=e,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(i)}return this.zoom},columnFromCoordinates:function(t){return Math.ceil(t/(this.column_width*this.zoom))},coordinatesFromColumn:function(t){return(t-1)*(this.column_width*this.zoom)+this.column_width*this.zoom/2},scrollToColumn:function(t,e){var n=this.logo_container.width()/2,r=this.coordinatesFromColumn(t);this.scrollme.scroller.scrollTo(r-n,0,e)},calcMaxHeight:function(t){return t.reduce(function(t,e){var n=0;for(var r in e)n+=e[r];return n>t?n:t},0)}});var h=function(t){return document.createElement(t)}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t,e){var n=r('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position"></input><button class="button logo_change">Go</button></fieldset></form>'),i=r('<div class="logo_settings"></div>');if(i.append('<span class="close">x</span>'),t.scale_height_enabled&&t.data.max_height_obs<t.data.max_height_theory){var o="",s="",a="",u="";t.data.max_height_obs===t.data.max_height?o="checked":s="checked"}var l='<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+o+"/>Maximum Observed "+u+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+s+"/>Maximum Theoretical "+a+"</label></fieldset>";if(i.append(l),"score"!==t.data.height_calc&&"aa"===t.data.alphabet&&t.data.probs_arr){var c=null,h=null,f="",d="";"default"===t.colorscheme?c="checked":h="checked",e.help&&(f='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',d='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var g='<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+c+"/>Default "+f+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+h+"/>Consensus Colors "+d+"</label></fieldset>";i.append(g)}if(t.data.ali_map){var p=null,m=null,v="",_="";0===t.display_ali_map?p="checked":m="checked",e.help&&(v='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',_='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var y='<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+p+"/>Model "+v+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+m+"/>Alignment "+_+"</label></fieldset>";i.append(y)}var b=r('<div class="logo_controls"></div>');return t.zoom_enabled&&b.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>'),i.children().length>0&&(b.append('<button class="logo_settings_switch button">Settings</button>'),b.append(i)),n.append(b),n}},function(t,e){"use strict";t.exports=function(t,e){e=e||{},this.value=t,this.width=parseInt(e.width,10)||100,"W"===this.value&&(this.width+=30*this.width/100),this.height=parseInt(e.height,10)||100,this.color=e.color||"#000000",this.fontSize=e.fontSize||138,this.scaled=function(){},this.draw=function(t,e,n,r,i,o){var s=e/this.height,a=n/this.width,u=t.font;t.transform(a,0,0,s,r,i),t.fillStyle=o||this.color,t.textAlign="center",t.font="bold "+this.fontSize+"px Arial",t.fillText(this.value,0,0),t.setTransform(1,0,0,1,0,0),t.fillStyle="#000000",t.font=u}}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=s(t).find("#canv_"+r);return o.length||(s(t).append('<canvas class="canvas_logo" id="canv_'+r+'"  height="'+e+'" width="'+n+'" style="left:'+i*r+'px"></canvas>'),o=s(t).find("#canv_"+r)),s(o).attr("width",n).attr("height",e),o[0]}var i=n(78),o=n(77),s=n(5);t.exports=function(t){if(this.data){t=t||{};var e=t.zoom||this.zoom,n=t.target||1,s=(t.scaled||null,this.dom_element.parent().attr("width")),a=1,u=null,l=null,c=0;if(this.previous_target=n,t.start&&(this.start=t.start),t.end&&(this.end=t.end),e<=.1?e=.1:e>=1&&(e=1),this.zoom=e,u=this.end||this.data.heightArr.length,l=this.start||1,u=u>this.data.heightArr.length?this.data.heightArr.length:u,u=u<l?l:u,l=l>u?u:l,l=l>1?l:1,this.y=this.height-20,this.max_width=this.column_width*(u-l+1),s>this.max_width&&(e=1,this.zoom_enabled=!1),this.zoom=e,this.zoomed_column=this.column_width*e,this.total_width=this.zoomed_column*(u-l+1),e<1)for(;this.total_width<s&&(this.zoom+=.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(u-l+1),this.zoom_enabled=!1,!(e>=1)););n>this.total_width&&(n=this.total_width),this.dom_element.attr({width:this.total_width+"px"}).css({width:this.total_width+"px"}),this.canvas_width=this.total_width;var h=Math.ceil(this.total_width/this.canvas_width);for(this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column),this.previous_zoom!==this.zoom&&(this.dom_element.find("canvas").remove(),this.previous_zoom=this.zoom,this.rendered=[]),this.canvases=[],this.contexts=[],c=0;c<h;c++){var f=this.columns_per_canvas*c+l,d=f+this.columns_per_canvas-1;d>u&&(d=u);var g=(d-f+1)*this.zoomed_column;g>a&&(a=g);var p=a*c,m=p+g;if(n<m+m/2&&n>p-p/2)if(this.canvases[c]=r(this.dom_element,this.height,g,c,a),this.contexts[c]=this.canvases[c].getContext("2d"),this.contexts[c].setTransform(1,0,0,1,0,0),this.contexts[c].clearRect(0,0,g,this.height),this.contexts[c].fillStyle="#ffffff",this.contexts[c].fillRect(0,0,m,this.height),this.zoomed_column>12){var v=parseInt(10*e,10);v=v>10?10:v,this.debug&&o.call(this,f,d,c,1),i.call(this,f,d,c,v)}else o.call(this,f,d,c)}!this.scrollme&&this.options.scroller&&(this.scrollme=new EasyScroller(this.dom_element[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on})),1!==n&&this.scrollme.reflow()}}},function(t,e,n){"use strict";function r(t,e,n,r,i,o,s,a){var u="#ffffff";a?(i>.1?u="#d7301f":i>.05?u="#fc8d59":i>.03&&(u="#fdcc8a"),t.fillStyle=u,t.fillRect(e,n+15,r,10),u="#ffffff",o>9?u="#d7301f":o>7?u="#fc8d59":o>4&&(u="#fdcc8a"),t.fillStyle=u,t.fillRect(e,n+30,r,10)):n+=30,u="#ffffff",s<.75?u="#2171b5":s<.85?u="#6baed6":s<.95&&(u="#bdd7e7"),t.fillStyle=u,t.fillRect(e,n,r,10)}var i=n(44),o=n(46),s=n(45);t.exports=function(t,e,n,a){var u=0,l=t,c=null,h=0,f=Math.abs(this.data.max_height),d=Math.abs(this.data.min_height_obs),g=f+d,p=Math.round(100*Math.abs(this.data.max_height)/g),m=Math.round(this.info_content_height*p/100),v=(this.info_content_height-m,10);for(h=t;h<=e;h++){if(this.data.mmline&&1===this.data.mmline[h-1])this.contexts[n].fillStyle="#cccccc",this.contexts[n].fillRect(u,10,this.zoomed_column,this.height-40);else{var _=this.data.heightArr[h-1],y=0,b=(_.length,0);for(var b in _){var x=[b,_[b]];if(x[1]>.01){var w=parseFloat(x[1])/this.data.max_height,S=u,k=(this.info_content_height-2)*w,z=this.info_content_height-2-y-k,C=null;C="dynamic"===this.colorscheme?this.colors.getColor(x[0],{pos:h-1}):"consensus"===this.colorscheme?this.cmap[h-1][x[0]]||"#7a7a7a":this.colors[x[0]],a?(this.contexts[n].strokeStyle=C,this.contexts[n].strokeRect(S,z,this.zoomed_column,k)):(this.contexts[n].fillStyle=C,this.contexts[n].fillRect(S,z,this.zoomed_column,k)),y+=k}}}this.zoom<.2?v=20:this.zoom<.3&&(v=10),this.options.positionMarker&&h%v===0&&(this.options.show_probs&&o(this.contexts[n],u+this.zoomed_column,this.height-30,parseFloat(this.height),"#dddddd"),o(this.contexts[n],u+this.zoomed_column,0,5),c=this.display_ali_map?this.data.ali_map[h-1]:l,s(this.contexts[n],u-2,10,this.zoomed_column,c,10,!0)),this.options.show_probs&&r(this.contexts[n],u,this.height-42,this.zoomed_column,this.data.insert_probs[h-1],this.data.insert_lengths[h-1],this.data.delete_probs[h-1],this.show_inserts),this.options.show_probs&&(this.show_inserts?i(this.contexts[n],this.height-45,this.total_width):i(this.contexts[n],this.height-15,this.total_width)),this.options.border&&i(this.contexts[n],0,this.total_width),u+=this.zoomed_column,l++}}},function(t,e,n){"use strict";function r(t,e,n,r,o,s,a){var u=n-4,l="#ffffff",c="#555555";a&&(u=n-35),o<.75?(l="#2171b5",c="#ffffff"):o<.85?l="#6baed6":o<.95&&(l="#bdd7e7"),i(t,e,u,o,s,r,l,c)}function i(t,e,n,r,i,o,s,a){t.font=i+"px Arial",t.fillStyle=s,t.fillRect(e,n-10,o,14),t.textAlign="center",t.fillStyle=a,t.fillText(r,e+o/2,n)}function o(t,e){var n=e.ralign?e.x+t.zoomed_column:e.x,r=e.ralign?e.x+2:e.x;l(t.contexts[e.context_num],n,t.height-30,-30-t.height,"#dddddd"),l(t.contexts[e.context_num],n,0,5),c(t.contexts[e.context_num],r,10,t.zoomed_column,e.column_num,e.fontsize,e.ralign)}function s(t,e,n,r,o,s){var a=n-20,u="#ffffff",c="#555555";o>.1?(u="#d7301f",c="#ffffff"):o>.05?u="#fc8d59":o>.03&&(u="#fdcc8a"),i(t,e,a,o,s,r,u,c),o>.03&&l(t,e+r,n-30,-30-n,u)}function a(t,e,n,r,o,s){var a="#ffffff",u="#555555";o>9?(a="#d7301f",u="#ffffff"):o>7?a="#fc8d59":o>4&&(a="#fdcc8a"),i(t,e,n,o,s,r,a,u)}var u=n(44),l=n(46),c=n(45);t.exports=function(t,e,n,i){var c=0,h=t,f=null,d=0,g=Math.abs(this.data.max_height),p=isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),m=g+Math.abs(p),v=Math.round(100*Math.abs(this.data.max_height)/m),_=Math.round(this.info_content_height*v/100),y=this.info_content_height-_;for(_/this.info_content_height,y/this.info_content_height,e+3<=this.end&&(e+=3),d=t;d<=e;d++){if(this.data.mmline&&1===this.data.mmline[d-1])this.contexts[n].fillStyle="#cccccc",this.contexts[n].fillRect(c,10,this.zoomed_column,this.height-40);else{var b=this.data.heightArr[d-1],x=[];if(b){var w=0,S=(b.length,0),k=null;for(var S in b){var z=b[S],C=[S,z],M=c+this.zoomed_column/2,j=null;if(C[1]>.01){j=parseFloat(C[1])/this.data.max_height;var E=this.info_content_height-2-w,O=(this.info_content_height-2)*j;x[S]=[O,this.zoomed_column,M,E],w+=O}}for(var S in b)x[S]&&this.letters[S]&&(k="dynamic"===this.colorscheme?this.colors.getColor(S,{pos:d-1}):"consensus"===this.colorscheme?this.cmap[d-1][S]||"#7a7a7a":null,this.letters[S].draw(this.contexts[n],x[S][0],x[S][1],x[S][2],x[S][3],k))}}f=this.display_ali_map?this.data.ali_map[d-1]:h,this.options.show_divider&&(this.zoom<.7?d%this.options.divider_step===0&&o(this,{context_num:n,x:c,fontsize:10,column_num:f,ralign:!0}):o(this,{context_num:n,x:c,fontsize:i,column_num:f})),this.options.show_probs&&(r(this.contexts[n],c,this.height,this.zoomed_column,this.data.delete_probs[d-1],i,this.show_inserts),l(this.contexts[n],c,this.height-15,5),this.show_inserts&&(s(this.contexts[n],c,this.height,this.zoomed_column,this.data.insert_probs[d-1],i),a(this.contexts[n],c,this.height-5,this.zoomed_column,this.data.insert_lengths[d-1],i),l(this.contexts[n],c,this.height-45,5),l(this.contexts[n],c,this.height-30,5))),c+=this.zoomed_column,h++}this.options.show_probs&&(this.show_inserts&&(u(this.contexts[n],this.height-30,this.total_width),u(this.contexts[n],this.height-45,this.total_width)),u(this.contexts[n],this.height-15,this.total_width)),this.options.border&&u(this.contexts[n],0,this.total_width)}},function(t,e){"use strict";var n=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,r=window.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),i=r&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=(r||o)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(t){var e,n,s,a,u,l;for(e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),n=new ArrayBuffer(e.length),s=new Uint8Array(n),a=0;a<e.length;a+=1)s[a]=e.charCodeAt(a);return u=t.split(",")[0].split(":")[1].split(";")[0],r?new Blob([i?s:n],{type:u}):(l=new o,l.append(n),l.getBlob(u))};window.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(t,e,r){t(r&&n.toDataURL&&s?s(this.toDataURL(e,r)):this.mozGetAsFile("blob",e))}:n.toDataURL&&s&&(n.toBlob=function(t,e,n){t(s(this.toDataURL(e,n)))})),t.exports=s},function(t,e,n){(function(t){"use strict";/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var e=e||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i=!t.externalHost&&"download"in r,o=function(n){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},s=t.webkitRequestFileSystem,a=t.requestFileSystem||s||t.mozRequestFileSystem,u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l="application/octet-stream",c=0,h=[],f=function(){for(var t=h.length;t--;){var e=h[t];"string"==typeof e?n().revokeObjectURL(e):e.remove()}h.length=0},d=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){u(t)}}},g=function(e,u){var f,g,p,m=this,v=e.type,_=!1,y=function(){var t=n().createObjectURL(e);return h.push(t),t},b=function(){d(m,"writestart progress write writeend".split(" "))},x=function(){!_&&f||(f=y(e)),g?g.location.href=f:window.open(f,"_blank"),m.readyState=m.DONE,b()},w=function(t){return function(){if(m.readyState!==m.DONE)return t.apply(this,arguments)}},S={create:!0,exclusive:!1};return m.readyState=m.INIT,u||(u="download"),i?(f=y(e),r.href=f,r.download=u,o(r),m.readyState=m.DONE,void b()):(t.chrome&&v&&v!==l&&(p=e.slice||e.webkitSlice,e=p.call(e,0,e.size,l),_=!0),s&&"download"!==u&&(u+=".download"),(v===l||s)&&(g=t),a?(c+=e.size,void a(t.TEMPORARY,c,w(function(t){t.root.getDirectory("saved",S,w(function(t){var n=function(){t.getFile(u,S,w(function(t){t.createWriter(w(function(n){n.onwriteend=function(e){g.location.href=t.toURL(),h.push(t),m.readyState=m.DONE,d(m,"writeend",e)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=m["on"+t]}),n.write(e),m.abort=function(){n.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),x)}),x)};t.getFile(u,{create:!1},w(function(t){t.remove(),n()}),w(function(t){t.code===t.NOT_FOUND_ERR?n():x()}))}),x)}),x)):void x())},p=g.prototype,m=function(t,e){return new g(t,e)};return p.abort=function(){var t=this;t.readyState=t.DONE,d(t,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,t.addEventListener("unload",f,!1),m.unload=function(){f(),t.removeEventListener("unload",f,!1)},m}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content),n=window.define;"undefined"==typeof n&&"undefined"!=typeof window.almond&&"define"in window.almond&&(n=window.almond.define),"undefined"!=typeof t&&null!==t?t.exports=e:"undefined"!=typeof n&&null!==n&&null!=n.amd&&n("saveAs",[],function(){return e})}).call(e,n(23)(t))},function(t,e){"use strict";t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){"use strict";function r(t,e,n){if(!a(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===u.call(t)?i(t,e,n):"string"==typeof t?o(t,e,n):s(t,e,n)}function i(t,e,n){for(var r=0,i=t.length;r<i;r++)l.call(t,r)&&e.call(n,t[r],r,t)}function o(t,e,n){for(var r=0,i=t.length;r<i;r++)e.call(n,t.charAt(r),r,t)}function s(t,e,n){for(var r in t)l.call(t,r)&&e.call(n,t[r],r,t)}var a=n(47);t.exports=r;var u=Object.prototype.toString,l=Object.prototype.hasOwnProperty},function(t,e){(function(e){"use strict";"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(e,function(){return this}())},function(t,e,n){"use strict";!function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);this.domain=[],this.range=[],Array.isArray(t)&&(this.domain=t),Array.isArray(e)&&(this.range=e);var n=function(t){if("number"!=typeof t)return null;var e=this.domain[0],n=this.domain[1],r=this.range[0],i=this.range[1];return"number"!==r&&"number"!=typeof i&&(r=e,i=n),r+(i-r)/(n-e)*(t-e)}.bind(this);return n.domain=function(t){return Array.isArray(t)&&(this.domain=t),n}.bind(this),n.range=function(t){return Array.isArray(t)&&(this.range=t),n}.bind(this),n}"undefined"!=typeof t&&t.exports&&(e=t.exports=r),e.LinearScale=r}(void 0)},function(t,e){"use strict";t.exports={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"}},function(t,e){"use strict";t.exports={A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"}},function(t,e){"use strict";t.exports={A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"}},function(t,e){"use strict";t.exports={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"}},function(t,e){"use strict";t.exports={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"}},function(t,e){"use strict";t.exports={A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"}},function(t,e,n){"use strict";function r(t){if(null==t||"object"!=("undefined"==typeof t?"undefined":i(t)))return t;var e=t.constructor();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(97),s=o.stat,a=o.dyn,u=n(85),l=n(86),c=n(87),h=n(88),f=n(89),d=n(90),g=n(92),p=n(93),m=n(94),v=n(96),_=n(98),y=n(99),b=n(100),x=n(101),w={buried:u,buried_index:u,cinema:l,clustal2:h,clustal:c,helix:f,helix_propensity:f,hydro:d,lesk:g,mae:p,nucleotide:m,purine:v,purine_pyrimidine:v,strand:_,strand_propensity:_,taylor:y,turn:b,turn_propensity:b,zappo:x},S=n(95),k={pid:S},z=function(t){this.maps=r(w),this.dyn=r(k),this.opt=t};t.exports=z,z.getScheme=function(t){return w[t]},z.prototype.getScheme=function(t){var e=this.maps[t];return void 0===e&&(e={},void 0!=this.dyn[t])?new a(this.dyn[t],this.opt):new s(e)},z.prototype.addStaticScheme=function(t,e){this.maps[t]=e},z.prototype.addDynScheme=function(t,e){this.dyn[t]=e}},function(t,e){"use strict";t.exports={A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"}},function(t,e){"use strict";t.exports={A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"}},function(t,e){"use strict";t.exports={A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"}},function(t,e){"use strict";var n;t.exports=n={},n.init=function(){this.cons=this.opt.conservation()},n.run=function(t,e){var n=this.cons[e.pos];return n>.8?"#6464ff":n>.6?"#9da5ff":n>.4?"#cccccc":"#ffffff"}},function(t,e){"use strict";t.exports={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"}},function(t,e){"use strict";var n=function(t){this.defaultColor="#ffffff",this.type="static",this.map=t,this.getColor=function(t){return void 0!==this.map[t]?this.map[t]:this.defaultColor}},r=function(t,e){this.type="dyn",this.opt=e,void 0!==t.init?(t.init.call(this),this.getColor=t.run,this.reset=t.init):this.getColor=t};t.exports.stat=n,t.exports.dyn=r},function(t,e){"use strict";t.exports={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"}},function(t,e){"use strict";t.exports={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"}},function(t,e){"use strict";t.exports={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"}},function(t,e){"use strict";t.exports={A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},function(t,e,n){"use strict";var r=n(140),i=n(82),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};var e={};return i(r(t).split("\n"),function(t){var n=t.indexOf(":"),i=r(t.slice(0,n)).toLowerCase(),s=r(t.slice(n+1));"undefined"==typeof e[i]?e[i]=s:o(e[i])?e[i].push(s):e[i]=[e[i],s]}),e}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.io=e.$=e.boneView=e.view=e.selcol=e.selection=e.utils=e.menu=e.model=e.msa=void 0;var o=n(8);Object.defineProperty(e,"selection",{enumerable:!0,get:function(){return i(o).default}});var s=n(9);Object.defineProperty(e,"selcol",{enumerable:!0,get:function(){return i(s).default}});var a=n(2);Object.defineProperty(e,"view",{enumerable:!0,get:function(){return i(a).default}});var u=n(4);Object.defineProperty(e,"boneView",{enumerable:!0,get:function(){return i(u).default}});var l=n(5);Object.defineProperty(e,"$",{enumerable:!0,get:function(){return i(l).default}});var c=n(118),h=i(c),f=n(52),d=r(f),g=n(105),p=r(g),m=n(38),v=r(m),_=n(12),y=function(){var t=function(t){return h.default.apply(this,t)};return t.prototype=h.default.prototype,new t(arguments)};e.default=y,e.msa=h.default,e.model=d,e.menu=p,e.utils=v;var b={xhr:n(24),fasta:_.fasta,clustal:_.clustal,gff:_.gff};e.io=b;var x="imported";x="0.0.0",e.version=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(114),o=r(i),s=n(112),a=r(s),u=n(116),l=r(u),c=n(117),h=r(c),f=n(108),d=r(f),g=n(115),p=r(g),m=n(111),v=r(m),_=n(110),y=r(_),b=n(113),x=r(b),w=n(109),S=r(w),k=n(107),z=r(k),C=n(4),M=C.extend({initialize:function(t){if(!t.msa)throw new Error("No msa instance provided. Please provide .msa");if(this.msa=t.msa,this.msa.g.menuconfig=new z.default(t.menu),this.addView("10_import",new o.default({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("15_ordering",new p.default({model:this.msa.seqs,g:this.msa.g})),this.addView("20_filter",new a.default({model:this.msa.seqs,g:this.msa.g})),this.addView("30_selection",new l.default({model:this.msa.seqs,g:this.msa.g})),this.addView("40_vis",new h.default({model:this.msa.seqs,g:this.msa.g})),this.addView("50_color",new d.default({model:this.msa.seqs,g:this.msa.g})),this.addView("70_extra",new v.default({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("80_export",new y.default({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("90_help",new x.default({g:this.msa.g})),this.msa.g.config.get("debug"))return this.addView("95_debug",new S.default({g:this.msa.g}))},render:function(){return this.renderSubviews(),this.el.setAttribute("class","smenubar"),this.el.appendChild(document.createElement("p"))}});e.default=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(104);Object.defineProperty(e,"defaultmenu",{enumerable:!0,get:function(){return r(i).default}});var o=n(6);Object.defineProperty(e,"menubuilder",{enumerable:!0,get:function(){return r(o).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(2),o=i.extend({initialize:function(t){this._nodes=[],this.name=t.name||"",this.el.className+="smenubar"},render:function(){for(var t=this.el.firstChild;t;)this.el.removeChild(t),t=this.el.firstChild;this.el.appendChild(this.buildDOM())},setName:function(t){this.name=t},addNode:function(t,e,n){var r=void 0;null!=n&&(r=n.style),null==this._nodes&&(this._nodes=[]),this._nodes.push({label:t,callback:e,style:r})},getNode:function(t){var e=void 0;return this._nodes.forEach(function(n){n.label===t&&(e=n)}),e},modifyNode:function(t,e,n){var r=this.getNode(t);r.callback=e||r.callback,n=n||{},r.style=n.style||r.style},renameNode:function(t,e){var n=this.getNode(t);n.label=e||n.label},removeNode:function(t){var e=this.getNode(t);this._nodes.splice(this._nodes.indexOf(e),1)},removeAllNodes:function(){this._nodes=[]},buildDOM:function(){var t=document.createElement("span");return t.appendChild(this._buildM({nodes:this._nodes,name:this.name})),t},_buildM:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=t.nodes,c=t.name,h=document.createElement("div");h.className="smenu-dropdown smenu-dropdown-tip",h.style.display="none";var f=document.createElement("ul");f.className="smenu-dropdown-menu";for(var d=0,g=l.length;d<g;d++){s=l[d],o=document.createElement("li"),o.textContent=s.label,u=s.style;for(i in u)a=u[i],o.style[i]=a;o.addEventListener("click",s.callback),this.trigger("new:node",o),f.appendChild(o)}return this.trigger("new:menu",f),h.appendChild(f),e=document.createElement("a"),e.textContent=c,e.className="smenubar_alink",this.trigger("new:button",e),r(e).on("click",function(t){return function(n){return t._showMenu(n,h,e),window.setTimeout(function(){return r(document.body).one("click",function(t){return h.style.display="none"})},5)}}(this)),n=document.createDocumentFragment(),n.appendChild(h),n.appendChild(e),n},_showMenu:function(t,e,n){var r=void 0;e.style.display="block",e.style.position="absolute",r=n.getBoundingClientRect()}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1).Model,i=r.extend({constructor:function(t,e){return"small"==t&&(t=this.small),r.apply(this,[t])},small:{menuFontsize:"12px"},defaults:{menuFontsize:"14px",menuItemFontsize:"14px",menuItemLineHeight:"14px",menuMarginLeft:"3px",menuPadding:"3px 4px 3px 4px"}});e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=n(7),a=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.listenTo(this.g.colorscheme,"change",function(){return this.render()})},render:function(){var t=this.setName("Color scheme");this.removeAllNodes();for(var e,n=this.getColorschemes(),r=0;r<n.length;r++)e=n[r],this.addScheme(t,e);return this.grey(t),s.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},addScheme:function(t,e){var n=this,r={};return this.g.colorscheme.get("scheme")===e.id&&(r.backgroundColor="#77ED80"),this.addNode(e.name,function(){n.g.colorscheme.set("scheme",e.id)},{style:r})},getColorschemes:function(){var t=[];return t.push({name:"Taylor",id:"taylor"}),t.push({name:"Buried",id:"buried"}),t.push({name:"Cinema",id:"cinema"}),t.push({name:"Clustal",id:"clustal"}),t.push({name:"Clustal2",id:"clustal2"}),t.push({name:"Helix",id:"helix"}),t.push({name:"Hydrophobicity",id:"hydro"}),t.push({name:"Lesk",id:"lesk"}),t.push({name:"MAE",id:"mae"}),t.push({name:"Nucleotide",id:"nucleotide"}),t.push({name:"Purine",id:"purine"}),t.push({name:"PID",id:"pid"}),t.push({name:"Strand",id:"strand"}),t.push({name:"Turn",id:"turn"}),t.push({name:"Zappo",id:"zappo"}),t.push({name:"No color",id:"foo"}),t},grey:function(t){}});e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){var t=this;return this.setName("Debug"),this.addNode("Get the code",function(){return window.open("https://github.com/wilzbach/msa")}),this.addNode("Toggle mouseover events",function(){return t.g.config.set("registerMouseHover",!t.g.config.get("registerMouseHover")),t.g.onAll(function(){return console.log(arguments)})}),this.addNode("Minimized width",function(){return t.g.zoomer.set("alignmentWidth",600)}),this.addNode("Minimized height",function(){return t.g.zoomer.set("alignmentHeight",120)}),this.el.appendChild(this.buildDOM()),this}});e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=n(19),a=r(s),u=n(12),l=(u.fasta.write,"↪"),c=o.default.extend({initialize:function(t){return this.g=t.g,this.msa=t.msa,this.el.style.display="inline-block"},render:function(){var t=this;return this.setName("Export"),this.addNode("Share view (URL)"+l,function(){return a.default.shareLink(t.msa,function(t){return window.open(t,"_blank")})}),this.addNode("View in Jalview",function(){var e=t.g.config.get("url");return"undefined"==typeof e||null===e?alert("Sequence weren't imported via an URL"):e.indexOf("localhost")?a.default.publishWeb(t.msa,function(e){return a.default.openInJalview(e,t.g.colorscheme.get("scheme"))}):a.default.openInJalview(e,t.g.colorscheme.get("scheme"))}),this.addNode("Export alignment (FASTA)",function(){return a.default.saveAsFile(t.msa,"all.fasta")}),this.addNode("Export alignment (URL)",function(){return a.default.publishWeb(t.msa,function(t){return window.open(t,"_blank")})}),this.addNode("Export selected sequences (FASTA)",function(){return a.default.saveSelection(t.msa,"selection.fasta")}),this.addNode("Export features (GFF)",function(){return a.default.saveAnnots(t.msa,"features.gff3")}),this.addNode("Export MSA image (PNG)",function(){return a.default.saveAsImg(t.msa,"biojs-msa.png")}),this.el.appendChild(this.buildDOM()),this}});e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=n(37),a=r(s),u=n(21),l=(r(u),n(24),o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.msa=t.msa},render:function(){var t=this;this.setName("Extras");var e=this.g.stats;return this.msa,this.addNode("Add consensus seq",function(){var n=e.consensus(),r=new a.default({seq:n,id:"0c",name:"Consenus"});return t.model.add(r),t.model.setRef(r),t.model.comparator=function(t){return!t.get("ref")},t.model.sort()}),this.addNode("Jump to a column",function(){var e=prompt("Column","20");return e<0||e>t.model.getMaxLength()||isNaN(e)?void alert("invalid column"):t.g.zoomer.setLeftOffset(e)}),this.el.appendChild(this.buildDOM()),this}}));e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){var t=this;return this.setName("Filter"),this.addNode("Hide columns by threshold",function(e){var n=prompt("Enter threshold (in percent)",20);n/=100;for(var r=t.model.getMaxLength(),i=[],o=t.g.stats.scale(t.g.stats.conservation()),s=r-1,a=0;a<=s;a++)o[a]<n&&i.push(a);return t.g.columns.set("hidden",i)}),this.addNode("Hide columns by selection",function(){var e=t.g.columns.get("hidden"),n=e.concat(t.g.selcol.getAllColumnBlocks({maxLen:t.model.getMaxLength(),withPos:!0}));return t.g.selcol.reset([]),t.g.columns.set("hidden",n)}),this.addNode("Hide columns by gaps",function(){var e=prompt("Enter threshold (in percent)",20);e/=100;for(var n=t.model.getMaxLength(),r=[],i=n-1,o=function(n){var i=0,o=0;t.model.each(function(t){return"-"===t.get("seq")[n]&&i++,o++}),i/o>e&&r.push(n)},s=0;s<=i;s++)o(s);return t.g.columns.set("hidden",r)}),this.addNode("Hide seqs by identity",function(){var e=prompt("Enter threshold (in percent)",20);return e/=100,t.model.each(function(t){if(t.get("identity")<e)return t.set("hidden",!0)})}),this.addNode("Hide seqs by selection",function(){var e=t.g.selcol.where({type:"row"}),n=e.map(function(t){return t.get("seqId")});return t.g.selcol.reset([]),t.model.each(function(t){if(n.indexOf(t.get("id"))>=0)return t.set("hidden",!0)})}),this.addNode("Hide seqs by gaps",function(){var e=prompt("Enter threshold (in percent)",40);return t.model.each(function(t,n){if(t.get("seq").reduce(function(t,e){return"-"===e?++t:void 0},0)>e)return t.set("hidden",!0)})}),this.addNode("Reset",function(){return t.g.columns.set("hidden",[]),t.model.each(function(t){if(t.get("hidden"))return t.set("hidden",!1)})}),this.el.appendChild(this.buildDOM()),this}});e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=o.default.extend({initialize:function(t){return this.g=t.g},render:function(){return this.setName("Help"),this.addNode("About the project",function(){return window.open("https://github.com/wilzbach/msa")}),this.addNode("Report issues",function(){return window.open("https://github.com/wilzbach/msa/issues")}),this.addNode("User manual",function(){return window.open("https://github.com/wilzbach/msa/wiki/User-manual")}),this.el.style.display="inline-block",this.el.appendChild(this.buildDOM()),this}});e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=n(17),a=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.msa=t.msa},render:function(){var t=this,e=this.msa,n=s.mk("input");n.type="file",n.style.display="none",n.multiple=!0,n.addEventListener("change",function(){var t=n.files||[];return e.u.file.importFiles(t)}),this.el.appendChild(n);var r="(Fasta, Clustal, GFF, Jalview features, Newick)";return this.setName("Import"),this.addNode("URL",function(e){var n=prompt("URL "+r,"http://rostlab.org/~goldberg/clustalw2-I20140818-215249-0556-53699878-pg.clustalw");if(n.length>5)return t.msa.u.file.importURL(n,function(){})}),this.addNode("From file "+r,function(){return n.click()}),this.addNode("Drag & Drop",function(){return alert("Yep. Just drag & drop your file "+r)}),this.el.appendChild(this.buildDOM()),this}});e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=n(7),a="↑",u="↓",l=o.default.extend({initialize:function(t){return this.g=t.g,this.order="ID",this.el.style.display="inline-block"},setOrder:function(t){return this.order=t,this.render()},render:function(){this.setName("Sorting"),this.removeAllNodes();for(var t,e=this.getComparators(),n=0;n<e.length;n++)t=e[n],this._addNode(t);var r=this.buildDOM();return s.removeAllChilds(this.el),this.el.appendChild(r),this},_addNode:function(t){var e=this,n=t.text,r={};return n===this.order&&(r.backgroundColor="#77ED80"),this.addNode(n,function(){return null!=t.precode&&t.precode(),e.model.comparator=t.comparator,e.model.sort(),e.setOrder(t.text)},{style:r})},getComparators:function(){var t=this,e=[];e.push({text:"ID "+a,comparator:"id"}),e.push({text:"ID "+u,comparator:function(t,e){return-(""+t.get("id")).localeCompare(""+e.get("id"),[],{numeric:!0})}}),e.push({text:"Label "+a,comparator:"name"}),e.push({text:"Label "+u,comparator:function(t,e){return-t.get("name").localeCompare(e.get("name"))}}),e.push({text:"Seq "+a,comparator:"seq"}),e.push({text:"Seq "+u,comparator:function(t,e){return-t.get("seq").localeCompare(e.get("seq"))}});var n=function(){return t.ident=t.g.stats.identity()},r=function(){return t.gaps={},t.model.each(function(e){var n=e.attributes.seq;return t.gaps[e.id]=(n.reduce(function(t,e){return"-"===e?++t:void 0}),0/n.length)})};return e.push({text:"Identity "+a,comparator:function(e,n){var r=t.ident[e.id]-t.ident[n.id];return r>0?1:r<0?-1:0},precode:n}),e.push({text:"Identity "+u,comparator:function(e,n){var r=t.ident[e.id]-t.ident[n.id];return r>0?-1:r<0?1:0},precode:n}),e.push({text:"Gaps "+a,comparator:function(e,n){var r=t.gaps[e.id]-t.gaps[n.id];return r>0?1:r<0?-1:0},precode:r}),e.push({text:"Gaps "+u,comparator:function(e,n){var r=t.gaps[e.id]-t.gaps[n.id];return r<0?1:r>0?-1:0},precode:r}),e.push({text:"Consensus to top",comparator:function(t){return!t.get("ref")}}),e}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){var t=this;return this.setName("Selection"),this.addNode("Find Motif (supports RegEx)",function(){var e=prompt("your search","D");return t.g.user.set("searchText",e)}),this.addNode("Invert columns",function(){return t.g.selcol.invertCol(function(){var e=[],n=t.model.getMaxLength(),r=0;if(0<=n)for(;r<=n;)e.push(r++);else for(;r>=n;)e.push(r--);return e}())}),this.addNode("Invert rows",function(){return t.g.selcol.invertRow(t.model.pluck("id"))}),this.addNode("Reset",function(){return t.g.selcol.reset()}),this.el.appendChild(this.buildDOM()),this}});e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),s=n(7),a=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.listenTo(this.g.vis,"change",this.render)},render:function(){var t=this;this.removeAllNodes(),this.setName("Vis.elements");for(var e,n=this.getVisElements(),r=0;r<n.length;r++)e=n[r],this._addVisEl(e);return this.addNode("Reset",function(){return t.g.vis.set("labels",!0),t.g.vis.set("sequences",!0),t.g.vis.set("metacell",!0),t.g.vis.set("conserv",!0),t.g.vis.set("labelId",!0),t.g.vis.set("labelName",!0),t.g.vis.set("labelCheckbox",!1),t.g.vis.set("seqlogo",!1),t.g.vis.set("gapHeader",!1),t.g.vis.set("leftHeader",!0),t.g.vis.set("metaGaps",!0),t.g.vis.set("metaIdentity",!0),t.g.vis.set("metaLinks",!0)}),s.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},_addVisEl:function(t){var e=this,n={};if(this.g.vis.get(t.id)){var r="Hide ";n.color="red"}else r="Show ",n.color="green";return this.addNode(r+t.name,function(){return e.g.vis.set(t.id,!e.g.vis.get(t.id))},{style:n})},getVisElements:function(){var t=[];return t.push({name:"residues indices",id:"markers"}),t.push({name:"ID/Label",id:"labels"}),t.push({name:"meta info (Gaps/Ident)",id:"metacell"}),t.push({name:"overview panel",id:"overviewbox"}),t.push({name:"sequence logo",id:"seqlogo"}),t.push({name:"gap weights",id:"gapHeader"}),t.push({name:"conservation weights",id:"conserv"}),t.push({name:"scale slider",id:"scaleslider"}),t.push({name:"Label",id:"labelName"}),t.push({name:"ID",id:"labelId"}),t.push({name:"gaps %",id:"metaGaps"}),t.push({name:"identity score",id:"metaIdentity"}),t}});e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=r(i),s=n(27),a=r(s),u=n(28),l=r(u),c=n(29),h=r(c),f=n(30),d=r(f),g=n(9),p=r(g),m=n(31),v=r(m),_=n(33),y=r(_),b=n(32),x=r(b),w=n(34),S=r(w),k=n(26),z=r(k),C=n(123),M=r(C),j=n(20),E=r(j),O=n(41),T=r(O),A=n(22),L=r(A),R=n(4),q=n(16),N=n(49),I=n(5),P=R.extend({initialize:function(t){var e=this;if("undefined"!=typeof t&&null!==t||(t={}),null==t.colorscheme&&(t.colorscheme={}),null==t.columns&&(t.columns={}),null==t.conf&&(t.conf={}),null==t.vis&&(t.vis={}),null==t.visorder&&(t.visorder={}),null==t.zoomer&&(t.zoomer={}),null==t.conserv&&(t.conserv={}),null==t.scale&&(t.scale={}),this.g=q.mixin({}),this.seqs=this.g.seqs=new o.default(t.seqs,this.g),this.g.config=new h.default(t.conf),this.g.package=new d.default(this.g),this.g.selcol=new p.default([],{g:this.g}),this.g.user=new v.default,this.g.vis=new y.default(t.vis,{model:this.seqs}),this.g.visorder=new x.default(t.visorder),this.g.zoomer=new S.default(t.zoomer,{g:this.g,model:this.seqs}),this.g.scale=new z.default(t.scale,{g:this.g}),this.g.conservationConfig=t.conserv,"localhost"===window.location.hostname&&this.g.config.set("debug",!0),this._loadSeqs(t),this.u={},this.u.file=new E.default(this),this.u.proxy=new L.default({g:this.g}),this.u.tree=new T.default(this),this.g.config.get("eventBus")===!0&&this.startEventBus(),this.g.config.get("dropImport")){var n={dragover:this.dragOver,drop:this.dropFile};this.delegateEvents(n)}return t.importURL&&this.u.file.importURL(t.importURL,function(){return e.render()}),t.bootstrapMenu&&(t.menu&&(this.menuConfig=t.menu),this.g.config.set("bootstrapMenu",!0)),this.draw(),this.m()},_loadSeqs:function(t){var e=this.seqs.pluck("seq");return this.g.stats=new N(this.seqs,{useGaps:!0}),this.g.stats.alphabetSize=this.g.config.get("alphabetSize"),this.g.columns=new l.default(t.columns,this.g.stats),this.g.colorscheme=new a.default(t.colorscheme,e,this.g.stats),this.g.zoomer.setEl(this.el,this.seqs)},importURL:function(){return this.u.file.importURL.apply(this.u.file,arguments)},m:function t(){var t={};return t.model=n(52),t.selection=n(8),t.selcol=n(9),t.view=n(2),t.boneView=n(4),this.m=t},draw:function(){var t=this;if(this.removeViews(),this.addView("stage",new M.default({model:this.seqs,g:this.g})),this.$el.addClass("biojs_msa_div"),this.g.config.get("bootstrapMenu")){var e=document.createElement("div"),n=document.createElement("div");this.el.parentNode?(this.el.parentNode.replaceChild(n,this.el),n.appendChild(e),n.appendChild(this.el)):(n.appendChild(e),n.appendChild(this.el));var r={el:e,msa:this};this.menuConfig&&(r.menu=this.menuConfig),new msa.menu.defaultmenu(r).render()}return I(window).on("resize",function(e){var n=function(){return this.g.zoomer.autoResize()};return setTimeout(n.bind(t),5)})},dragOver:function(t){
return t.preventDefault(),t.target.className="hover",!1},dropFile:function(t){t.preventDefault();var e=t.target.files||t.dataTransfer.files;return this.u.file.importFiles(e),!1},startEventBus:function(){var t=this,e=["config","columns","colorscheme","selcol","vis","visorder","zoomer"];return function(){for(var n,r=[],i=0;i<e.length;i++)n=e[i],r.push(t._proxyToG(n));return r}()},_proxyToG:function(t){return this.listenTo(this.g[t],"all",function(e,n,r,i){if("change"!==e)return"undefined"!=typeof i&&null!==i?this.g.trigger(t+":"+e,r,n,i):this.g.trigger(t+":"+e,r,n)})},render:function(){return void 0===this.seqs||0===this.seqs.length,this.renderSubviews(),this.g.vis.set("loaded",!0),this}});e.default=P},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(127),o=r(i),s=n(136),a=r(s),u=n(4),l=u.extend({initialize:function(t){this.g=t.g;var e=new a.default({model:this.model,g:this.g});if(e.ordering=-1,this.addView("labelblock",e),this.g.vis.get("sequences")){var n=new o.default({model:this.model,g:this.g});n.ordering=0,this.addView("seqblock",n)}return this.listenTo(this.g.zoomer,"change:alignmentHeight",this.adjustHeight),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.adjustWidth),this.listenTo(this.g.columns,"change:hidden",this.adjustHeight),this},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_albody",this.el.style.whiteSpace="nowrap",this.adjustHeight(),this.adjustWidth(),this},adjustHeight:function(){return"auto"===this.g.zoomer.get("alignmentHeight")?this.el.style.height=this.g.zoomer.get("rowHeight")*this.model.length+5:this.el.style.height=this.g.zoomer.get("alignmentHeight")},adjustWidth:function(){return this.el.style.width=this.getWidth()},getWidth:function(){var t=0;return t+=this.g.zoomer.getLeftBlockWidth(),this.g.vis.get("sequences")&&(t+=this.g.zoomer.get("alignmentWidth")),t}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(2),o=n(48),s=n(5),a=i.extend({className:"biojs_msa_overviewbox",tagName:"canvas",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:boxRectWidth change:boxRectHeight change:overviewboxPaddingTop",this.rerender),this.listenTo(this.g.zoomer,"change:alignmentHeight change:alignmentWidth",this.rerender),this.listenTo(this.g.zoomer,"change:overviewboxWidth change:overviewboxHeigth",this.rerender),this.listenTo(this.g.selcol,"add reset change",this.rerender),this.listenTo(this.g.columns,"change:hidden",this.rerender),this.listenTo(this.g.colorscheme,"change:showLowerCase",this.rerender),this.listenTo(this.model,"change",_.debounce(this.rerender,5)),this.color=this.g.colorscheme.getSelectedScheme(),this.listenTo(this.g.colorscheme,"change:scheme",function(){return this.color=this.g.colorscheme.getSelectedScheme(),this.rerender()}),this.dragStart=[]},events:{click:"_onclick",mousedown:"_onmousedown"},rerender:function(){if(!this.g.config.get("manualRendering"))return this.render()},render:function(){this._createCanvas(),this.el.textContent="overview",this.el.style.marginTop=this.g.zoomer.get("overviewboxPaddingTop"),this.ctx.fillStyle="#999999",this.ctx.fillRect(0,0,this.el.width,this.el.height);for(var t=this.model.length,e=this.g.columns.get("hidden"),n=this.g.colorscheme.get("showLowerCase"),r=-this.coords.boxes_size.y,i=0;i<this.coords.boxes.y;i++){for(var o=[],s=[],a=Math.floor(i*this.coords.resid_per_box.y);a<Math.floor((i+1)*this.coords.resid_per_box.y)&&a<t;a++)this.model.at(a)&&(o.push(this.model.at(a).get("seq")),s.push(this.model.at(a).get("hidden")));var u=0;r+=this.coords.boxes_size.y;for(var l=0;l<this.coords.boxes.x;l++){for(var c=[],h=0;h<o.length;h++)for(var f=Math.floor(l*this.coords.resid_per_box.x);f<Math.floor((l+1)*this.coords.resid_per_box.x)&&f<o[h].length;f++)if(s[h])c.push("grey");else{var d=o[h][f];n&&(d=d.toUpperCase());var g=this.color.getColor(d,{pos:f});e.indexOf(f)>=0&&(g="grey"),"undefined"!=typeof g&&null!==g&&c.push(g)}0!==c.length&&(this.ctx.fillStyle=this._mode(c),this.ctx.fillRect(u,r,this.coords.boxes_size.x,this.coords.boxes_size.y)),u+=this.coords.boxes_size.x}}return this._drawSelection()},coords:{screen_to_model:function(t,e){var n=t*this.resid_per_box[e]/this.boxes_size[e];return Math.floor(n)},model_to_screen:function(t,e){return Math.floor(t*this.boxes_size[e]/this.resid_per_box[e])},updatecoords_transform:function(t){var e=t.g.zoomer.get("boxRectHeight"),n=t.g.zoomer.get("boxRectWidth"),r=t.g.zoomer.get("overviewboxWidth"),i=t.g.zoomer.get("overviewboxHeight"),o="fixed"===r?t.model.getMaxLength()*n:Math.min(t.g.zoomer.get("alignmentWidth")+t.g.zoomer.getLeftBlockWidth(),t.model.getMaxLength()*n),s="fixed"===i?t.model.length*e:Math.min(isNaN(parseInt(i,10))?1e10:parseInt(i,10),t.model.length*e);this.container_size={x:o,y:s},this.boxes_size={x:n,y:e},this.resid_per_box={x:Math.max(1,t.model.getMaxLength()/o*n),y:Math.max(1,t.model.length/s*e)},this.boxes={x:Math.ceil(o/n),y:Math.ceil(s/e)}}},_mode:function(t){return t.sort(function(e,n){return t.filter(function(t){return t===e}).length-t.filter(function(t){return t===n}).length}).pop()},_drawSelection:function(){var t=this;if(!(this.dragStart.length>0)||this.prolongSelection){this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9;for(var e=this.g.selcol.length,n=function(e){var n=t.g.selcol.at(e);if(!n)return"continue";var r=void 0,i=void 0;"column"===n.get("type")?t.ctx.fillRect(t.coords.boxes_size.x*n.get("xStart"),0,t.coords.boxes_size.x*(n.get("xEnd")-n.get("xStart")+1),t.coords.container_size.y):"row"===n.get("type")?(r=t.model.filter(function(t){return t.get("id")===n.get("seqId")})[0],i=t.model.indexOf(r),t.ctx.fillRect(0,t.coords.model_to_screen(i,"y"),t.coords.model_to_screen(r.get("seq").length,"x"),t.coords.boxes_size.y)):"pos"===n.get("type")&&(r=t.model.filter(function(t){return t.get("id")===n.get("seqId")})[0],i=t.model.indexOf(r),t.ctx.fillRect(t.coords.model_to_screen(n.get("xStart"),"x"),t.coords.model_to_screen(i,"y"),t.coords.model_to_screen(n.get("xEnd")-n.get("xStart")+1,"x"),t.coords.boxes_size.y))},r=0;r<e;r++)n(r);return this.ctx.globalAlpha=1}},_onclick:function(t){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:t})})},_onmousemove:function(t){if(0!==this.dragStart.length){this.render(),this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9;var e=this._calcSelection(o.abs(t));return this.ctx.fillRect(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0]),t.preventDefault(),t.stopPropagation()}},_onmousedown:function(t){var e=this;return this.dragStart=o.abs(t),this.dragStartRel=o.rel(t),t.ctrlKey||t.metaKey?this.prolongSelection=!0:this.prolongSelection=!1,s(document.body).on("mousemove.overmove",function(t){return e._onmousemove(t)}),s(document.body).on("mouseup.overup",function(t){return e._onmouseup(t)}),this.dragStart},_calcSelection:function(t){for(var e=[t[0]-this.dragStart[0],t[1]-this.dragStart[1]],n=0;n<=1;n++)e[n]=this.dragStartRel[n]+e[n];for(var r=[[this.dragStartRel[0],e[0]],[this.dragStartRel[1],e[1]]],i=0;i<=1;i++)r[i][1]<r[i][0]&&(r[i]=[r[i][1],r[i][0]]),r[i][0]=Math.max(r[i][0],0);return r},_endSelection:function(t){if(s(document.body).off(".overmove"),s(document.body).off(".overup"),0!==this.dragStart.length){for(var e=this._calcSelection(t),n=0;n<=1;n++)e[0][n]=this.coords.screen_to_model(e[0][n],"x");for(var n=0;n<=1;n++)e[1][n]=this.coords.screen_to_model(e[1][n],"y");e[0][1]=Math.min(this.model.getMaxLength()-1,e[0][1]),e[1][1]=Math.min(this.model.length-1,e[1][1]);for(var i=[],o=e[1][0];o<=e[1][1];o++){var a={seqId:this.model.at(o).get("id"),xStart:e[0][0],xEnd:e[0][1]};i.push(new r.possel(a))}return this.dragStart=[],this.prolongSelection?this.g.selcol.add(i):this.g.selcol.reset(i),this.g.zoomer.setLeftOffset(e[0][0]),this.g.zoomer.setTopOffset(e[1][0])}},_onmouseup:function(t){return this._endSelection(o.abs(t))},_onmouseout:function(t){return this._endSelection(o.abs(t))},_createCanvas:function(){return this.coords.updatecoords_transform(this),this.el.height=this.coords.container_size.y,this.el.width=this.coords.container_size.x,this.ctx=this.el.getContext("2d"),this.el.style.overflow="auto",this.el.style.cursor="crosshair"}});e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(2),o=n(5),s=i.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:columnWidth",this.render),this.toggleClass="msa-hide",this.isVisible=!0,this},attributes:{class:"biojs_msa_scale"},events:{"change input":"updateSlider","click button.msa-btn-close":"hide","click button.msa-btn-open":"show","click button[data-action]":"clickButton"},template:(0,r.template)('\t<div class="msa-scale-minimised">\t  <button class="btn msa-btn msa-btn-open">Zoom</button>\t</div>\t<div class="msa-scale-maximised">\t  <button class="btn msa-btn msa-btn-close" style="float:right">&times; close</button>\t  <div>\t  <input type="range" \t    data-provide="slider" \t    min="<%= min %>" \t    max="<%= max %>" \t    step="<%= step %>" \t    value="<%= value %>" \t  >\t  </div>\t  <div class="btngroup msa-btngroup">\t    <button class="btn msa-btn" data-action="smaller"><span class="glyphicon-zoom-out"></span>-</button>\t    <button class="btn msa-btn" data-action="bigger"><span class="glyphicon-zoom-in"></span>+</button>\t    <button class="btn msa-btn" data-action="reset"><span class="glyphicon-repeat"></span>reset</button>\t  </div>\t</div>\t'),render:function(){var t=this.model.getSizeRange(),e={value:this.model.getSize(),min:t[0],max:t[1],step:this.model.step||1};return this.$el.html(this.template(e)),this.isVisible?this.show():this.hide(),this},updateSlider:function(t){var e=t.target,n=parseInt(o(e).val());this.model.setSize(n)},clickButton:function(t){var e=t.target,n=o(e).data("action");return this.model[n],"function"==typeof this.model[n]&&this.model[n](),this},hide:function(){this.isVisible=!1,this.$el.find(".msa-scale-minimised").removeClass(this.toggleClass),this.$el.find(".msa-scale-maximised").addClass(this.toggleClass)},show:function(){this.isVisible=!1,this.$el.find(".msa-scale-minimised").addClass(this.toggleClass),this.$el.find(".msa-scale-maximised").removeClass(this.toggleClass)}});e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(4),o=n(17),s=(n(7),i.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.user,"change:searchText",function(t,e){return this.search(e),this.render()}),this.sel=[],this.selPos=0},events:{scroll:"_sendScrollEvent"},render:function(){this.renderSubviews(),this.el.className="biojs_msa_searchresult";var t=this.g.user.get("searchText");return"undefined"!=typeof t&&null!==t&&t.length>0&&(0===this.sel.length?this.el.textContent="no selection found":(this.resultBox=o.mk("div"),this.resultBox.className="biojs_msa_searchresult_ovbox",this.updateResult(),this.el.appendChild(this.resultBox),this.el.appendChild(this.buildBtns()))),this},updateResult:function(){var t="search pattern: "+this.g.user.get("searchText");t+=", selection: "+(this.selPos+1);var e=this.sel[this.selPos];return t+=" (",t+=e.get("xStart")+" - "+e.get("xEnd"),t+=", id: "+e.get("seqId"),t+=")",this.resultBox.textContent=t},buildBtns:function(){var t=this,e=o.mk("button");e.textContent="Prev",e.addEventListener("click",function(){return t.moveSel(-1)});var n=o.mk("button");n.textContent="Next",n.addEventListener("click",function(){return t.moveSel(1)});var r=o.mk("button");r.textContent="All",r.addEventListener("click",function(){return t.g.selcol.reset(t.sel)});var i=o.mk("div");return i.appendChild(e),i.appendChild(n),i.appendChild(r),i.className="biojs_msa_searchresult_row",i},moveSel:function(t){var e=this.selPos+t;return e<0||e>=this.sel.length?-1:(this.focus(e),this.selPos=e,this.updateResult())},focus:function(t){var e=this.sel[t],n=e.get("xStart");return this.g.zoomer.setLeftOffset(n),this.g.selcol.reset([e])},search:function t(e){var n,t=new RegExp(e,"gi"),i=[],o=n=100042;return this.model.each(function(e){var n=e.get("seq");return function(){for(var s,a=[];s=t.exec(n);){var u=s.index,l={xStart:u,xEnd:u+s[0].length-1,seqId:e.get("id")};i.push(new r.possel(l)),a.push(o=Math.min(u,o))}return a}()}),this.g.selcol.reset(i),o===n&&(o=0),this.g.zoomer.setLeftOffset(o),this.sel=i}}));e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(119),s=r(o),a=n(131),u=r(a),l=n(120),c=r(l),h=n(122),f=r(h),d=n(121),g=r(d),p=n(4),m=p.extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.stats,"reset",function(){return this.rerender()}),this.listenTo(this.model,"change:hidden",(0,i.debounce)(this.rerender,10)),this.listenTo(this.model,"sort",this.rerender),this.listenTo(this.model,"add",function(){return console.log("seq add")}),this.listenTo(this.g.vis,"change:sequences",this.rerender),this.listenTo(this.g.vis,"change:overviewbox",this.rerender),this.listenTo(this.g.visorder,"change",this.rerender),this.listenTo(this.g.zoomer,"change:columnWidth",this.rerender),this.listenTo(this.g.vis,"change:scaleslider",this.rerender),this},draw:function(){if(this.removeViews(),this.g.vis.get("overviewbox")){var t=new c.default({model:this.model,g:this.g});t.ordering=this.g.visorder.get("overviewBox"),this.addView("overviewBox",t)}var e=new u.default({model:this.model,g:this.g});e.ordering=this.g.visorder.get("headerBox"),this.addView("headerBox",e);var n=new f.default({model:this.model,g:this.g});n.ordering=this.g.visorder.get("searchBox"),this.addView("searchbox",n);var r=new s.default({model:this.model,g:this.g});if(r.ordering=this.g.visorder.get("alignmentBody"),this.addView("body",r),this.g.vis.get("scaleslider")){var i=new g.default({model:this.g.scale,g:this.g});i.ordering=this.g.visorder.get("scaleSlider"),this.addView("scaleSlider",i)}return this},render:function(t){return this.renderSubviews(),this.el.className="biojs_msa_stage",this},rerender:function(){if(!this.g.config.get("manualRendering"))return this.draw(),this.render()}});e.default=m},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=(n(16),function(){function t(e){r(this,t),this.g=e,this.cache={},this.cacheHeight=0,this.cacheWidth=0}return i(t,[{key:"getFontTile",value:function(t,e,n){return e===this.cacheWidth&&n===this.cacheHeight||(this.cacheHeight=n,this.cacheWidth=e,this.cache={}),void 0===this.cache[t]&&this.createTile(t,e,n),this.cache[t]}},{key:"createTile",value:function(t,e,n){var r=this.cache[t]=document.createElement("canvas");return r.width=e,r.height=n,this.ctx=r.getContext("2d"),this.ctx.font=this.g.zoomer.get("residueFont")+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(t,e/2,n/2,e)}}]),t}());e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(16),o={setMaxScrollHeight:function(){return this.maxScrollHeight=this.g.zoomer.getMaxAlignmentHeight()-this.g.zoomer.get("alignmentHeight")},setMaxScrollWidth:function(){return this.maxScrollWidth=this.g.zoomer.getMaxAlignmentWidth()-this.g.zoomer.getAlignmentWidth()}},s=function(t,e){return this.g=t,this.model=e,this.maxScrollWidth=0,this.maxScrollHeight=0,this.setMaxScrollHeight(),this.setMaxScrollWidth(),this.listenTo(this.g.zoomer,"change:rowHeight",this.setMaxScrollHeight),this.listenTo(this.g.zoomer,"change:columnWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.setMaxScrollHeight),this.listenTo(this.model,"add change reset",function(){return this.setMaxScrollHeight(),this.setMaxScrollWidth()},this),this};(0,r.extend)(s.prototype,o),i.mixin(s.prototype),e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(t,e){return this.g=t,this.ctx=e,this};_.extend(i.prototype,{_getSelection:function(t){var e=t.get("seq").length,n=[],i=this.g.selcol.getSelForRow(t.get("id")),o=(0,r.find)(i,function(t){return"row"===t.get("type")});if("undefined"!=typeof o&&null!==o)for(var s=e-1,a=0;a<=s;a++)n.push(a);else if(i.length>0)for(var u,l=0;l<i.length;l++){u=i[l];for(var c=u.get("xStart"),h=u.get("xEnd"),f=c;f<=h;f++)n.push(f)}return n},_appendSelection:function(t){var e=this,n=t.model.get("seq"),r=this._getSelection(t.model),i=this._getPrevNextSelection(t.model),o=i[0],s=i[1];if(this.g.zoomer.get("columnWidth"),this.g.zoomer.get("rowHeight"),0!==r.length){var a=0;return function(){for(var i=[],u=n.length-1,l=function(n){i.push(function(){if(t.hidden.indexOf(n)>=0)return a++;var i=n-a;return r.indexOf(n)>=0&&(0===i||r.indexOf(n-1)<0)?e._renderSelection({n:n,k:i,selection:r,mPrevSel:o,mNextSel:s,xZero:t.xZero,yZero:t.yZero,model:t.model}):void 0}())},c=0;c<=u;c++)l(c);return i}()}},_renderSelection:function(t){for(var e=t.xZero,n=t.yZero,r=t.n,i=t.k,o=t.selection,s=t.mPrevSel,a=t.mNextSel,u=0,l=t.model.get("seq").length-1,c=r;c<=l&&o.indexOf(c)>=0;c++)u++;var h=this.g.zoomer.get("columnWidth"),f=this.g.zoomer.get("rowHeight"),d=h*u+1,g=this.g.columns.get("hidden");this.ctx.beginPath();var p=this.ctx.lineWidth;this.ctx.lineWidth=3;var m=this.ctx.strokeStyle;this.ctx.strokeStyle="#FF0000",e+=i*h;for(var v=0,_=u-1,y=0;y<=_;y++){var b=r+y;g.indexOf(b)>=0||("undefined"!=typeof s&&null!==s&&s.indexOf(b)>=0||(this.ctx.moveTo(e+v,n),this.ctx.lineTo(v+h+e,n)),"undefined"!=typeof a&&null!==a&&a.indexOf(b)>=0||(this.ctx.moveTo(v+e,f+n),this.ctx.lineTo(v+h+e,f+n)),v+=h)}return this.ctx.moveTo(e,n),this.ctx.lineTo(e,f+n),this.ctx.moveTo(e+d,n),this.ctx.lineTo(e+d,f+n),this.ctx.stroke(),this.ctx.strokeStyle=m,this.ctx.lineWidth=p},_getPrevNextSelection:function(t){var e=t.collection.prev(t),n=t.collection.next(t),r=void 0,i=void 0;return"undefined"!=typeof e&&null!==e&&(r=this._getSelection(e)),"undefined"!=typeof n&&null!==n&&(i=this._getSelection(n)),[r,i]}}),e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(3),s=n(124),a=r(s),u=n(126),l=r(u),c=n(128),h=r(c),f=n(125),d=r(f),g=n(4),p=n(48),m=n(5),v=g.extend({tagName:"canvas",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft change:_alignmentScrollTop",function(t,e,n){if(null==("undefined"!=typeof n&&null!==n?n.origin:void 0)||"canvasseq"!==n.origin)return this.render()}),this.listenTo(this.g.columns,"change:hidden",this.render),this.listenTo(this.g.zoomer,"change:alignmentWidth change:alignmentHeight",this.render),this.listenTo(this.g.colorscheme,"change",this.render),this.listenTo(this.g.selcol,"reset add",this.render),this.listenTo(this.model,"reset add",this.render),this.el.style.display="inline-block",this.el.style.overflowX="hidden",this.el.style.overflowY="hidden",this.el.className="biojs_msa_seqblock",this.ctx=this.el.getContext("2d"),this.cache=new a.default(this.g),this.coordsCache=new d.default(this.g,this.model),this.listenTo(this.g.zoomer,"change:residueFont",function(){return this.cache=new a.default(this.g),this.render()}),this.sel=new l.default(this.g,this.ctx),this._setColor(),this.throttleTime=0,this.throttleCounts=0,null!=document.documentElement.style.webkitAppearance?this.throttledDraw=function(){var t=+new Date;if(this.draw(),this.throttleTime+=+new Date-t,this.throttleCounts++,this.throttleCounts>15)return Math.ceil(this.throttleTime/this.throttleCounts),this.throttledDraw=this.draw}:this.throttledDraw=(0,o.throttle)(this.throttledDraw,30),this.manageEvents()},throttledDraw:function(){var t=+new Date;if(this.draw(),this.throttleTime+=+new Date-t,this.throttleCounts++,this.throttleCounts>15){var e=Math.ceil(this.throttleTime/this.throttleCounts);return e*=1.2,e=Math.max(20,e),this.throttledDraw=_.throttle(this.draw,e)}},manageEvents:function(){var t={};return t.mousedown="_onmousedown",t.touchstart="_ontouchstart",this.g.config.get("registerMouseClicks")&&(t.dblclick="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),t.mousewheel="_onmousewheel",t.DOMMouseScroll="_onmousewheel",this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.dragStart=[]},_setColor:function(){return this.color=this.g.colorscheme.getSelectedScheme()},draw:function(){if(this.el.width=this.el.width,null!=this.seqDrawer&&this.model.length>0)return this.seqDrawer.drawLetters(),this.seqDrawer.drawRows(this.sel._appendSelection,this.sel),this.seqDrawer.drawRows(this.drawFeatures,this)},drawFeatures:function(t){var e=this.g.zoomer.get("columnWidth"),n=this.g.zoomer.get("rowHeight");if(t.model.attributes.height>1){var r=this.ctx;return t.model.attributes.features.each(function(i){r.fillStyle=i.attributes.fillColor||"red";var o=i.attributes.xEnd-i.attributes.xStart+1,s=(i.attributes.row+1)*n;return r.fillRect(i.attributes.xStart*e+t.xZero,s+t.yZero,e*o,n)}),r.fillStyle="black",r.font=this.g.zoomer.get("residueFont")+"px mono",r.textBaseline="middle",r.textAlign="center",t.model.attributes.features.each(function(i){var o=i.attributes.xEnd-i.attributes.xStart+1,s=(i.attributes.row+1)*n;return r.fillText(i.attributes.text,t.xZero+i.attributes.xStart*e+o/2*e,t.yZero+.5*n+s)})}},render:function(){return this.el.setAttribute("height",this.g.zoomer.get("alignmentHeight")+"px"),this.el.setAttribute("width",this.g.zoomer.getAlignmentWidth()+"px"),this.g.zoomer._checkScrolling(this._checkScrolling([this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")]),{header:"canvasseq"}),this._setColor(),this.seqDrawer=new h.default(this.g,this.ctx,this.model,{width:this.el.width,height:this.el.height,color:this.color,cache:this.cache}),this.throttledDraw(),this},_onmousemove:function(t,e){if(0!==this.dragStart.length){var n=p.abs(t),r=[n[0]-this.dragStart[0],n[1]-this.dragStart[1]],i=this.g.zoomer.get("canvasEventScale");e&&(i=3);for(var o=0;o<=1;o++)r[o]=r[o]*i;for(var s=[this.dragStartScroll[0]-r[0],this.dragStartScroll[1]-r[1]],a=0;a<=1;a++)s[a]=Math.round(s[a]);var u=this._checkScrolling(s);this.g.zoomer._checkScrolling(u,{origin:"canvasseq"});for(var l=0;l<=1;l++)u[l]!==s[l]&&(0===u[l]?(this.dragStart[l]=n[l],this.dragStartScroll[l]=0):this.dragStart[l]=n[l]-u[l]);return this.throttledDraw(),null!=t.preventDefault?(t.preventDefault(),t.stopPropagation()):void 0}},_ontouchmove:function(t){return this._onmousemove(t.changedTouches[0],!0),t.preventDefault(),t.stopPropagation()},_onmousedown:function(t){var e=this;return this.dragStart=p.abs(t),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],m(document.body).on("mousemove.overmove",function(t){return e._onmousemove(t)}),m(document.body).on("mouseup.overup",function(){return e._cleanup()}),t.preventDefault()},_ontouchstart:function(t){var e=this;return this.dragStart=p.abs(t.changedTouches[0]),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],m(document.body).on("touchmove.overtmove",function(t){return e._ontouchmove(t)}),m(document.body).on("touchend.overtend touchleave.overtleave touchcancel.overtcanel",function(t){return e._touchCleanup(t)})},_onmousewinout:function(t){if(t.toElement===document.body.parentNode)return this._cleanup()},_cleanup:function(){return this.dragStart=[],m(document.body).off(".overmove"),m(document.body).off(".overup"),m(document.body).off(".overout")},_touchCleanup:function(t){return t.changedTouches.length>0&&this._onmousemove(t.changedTouches[0],!0),this.dragStart=[],m(document.body).off(".overtmove"),m(document.body).off(".overtend"),m(document.body).off(".overtleave"),m(document.body).off(".overtcancel")},_onmousewheel:function(t){var e=p.wheelDelta(t);return this.g.zoomer.set("_alignmentScrollLeft",this.g.zoomer.get("_alignmentScrollLeft")+e[0]),this.g.zoomer.set("_alignmentScrollTop",this.g.zoomer.get("_alignmentScrollTop")+e[1]),t.preventDefault()},_onclick:function(t){var e=this._getClickPos(t);return"undefined"!=typeof e&&null!==e&&(null!=e.feature?this.g.trigger("feature:click",e):this.g.trigger("residue:click",e)),this.throttledDraw()},_onmousein:function(t){var e=this._getClickPos(t);return"undefined"!=typeof e&&null!==e&&(null!=e.feature?this.g.trigger("feature:mousein",e):this.g.trigger("residue:mousein",e)),this.throttledDraw()},_onmouseout:function(t){var e=this._getClickPos(t);return"undefined"!=typeof e&&null!==e&&(null!=e.feature?this.g.trigger("feature:mouseout",e):this.g.trigger("residue:mouseout",e)),this.throttledDraw()},_getClickPos:function(t){var e=p.rel(t);e[0]+=this.g.zoomer.get("_alignmentScrollLeft");var n=Math.floor(e[0]/this.g.zoomer.get("columnWidth")),r=this.seqDrawer._getSeqForYClick(e[1]),o=i(r,2),s=o[0],a=o[1];n+=this.g.columns.calcHiddenColumns(n),s+=this.model.calcHiddenSeqs(s),n=Math.max(0,n),s=Math.max(0,s);var u=this.model.at(s).get("id");if(!(a>0))return{seqId:u,rowPos:n,evt:t};var l=this.model.at(s).get("features").getFeatureOnRow(a-1,n);return 0!==l.length?{seqId:u,feature:l[0],rowPos:n,evt:t}:void 0},_checkScrolling:function(t){for(var e=[this.coordsCache.maxScrollWidth,this.coordsCache.maxScrollHeight],n=0;n<=1;n++)t[n]>e[n]&&(t[n]=e[n]),t[n]<0&&(t[n]=0);return t}});e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(3),o={updateConfig:function(){this.rectWidth=this.g.zoomer.get("columnWidth"),this.rectHeight=this.g.zoomer.get("rowHeight")},drawLetters:function(){return this.updateConfig(),this.ctx.globalAlpha=this.g.colorscheme.get("opacity"),this.drawSeqs(function(t){return this.drawSeq(t,this._drawRect)}),this.ctx.globalAlpha=1,this.rectWidth>=this.g.zoomer.get("minLetterDrawSize")&&this.drawSeqs(function(t){return this.drawSeq(t,this._drawLetter)}),this},drawSeqs:function(t,e){var n=this.g.columns.get("hidden");e=e||this;for(var i=this.getStartSeq(),o=r(i,2),s=o[0],a=o[1],u=s;u<this.model.length;u++){var l=this.model.at(u);if(!l.get("hidden")&&(t.call(e,{model:l,yPos:a,y:u,hidden:n}),a+=(l.attributes.height||1)*this.rectHeight,a>this.height))break}},drawRows:function(t,e){return this.drawSeqs(function(n){return this.drawRow(n,t,e)})},drawRow:function(t,e,n){var r=this.g.zoomer.get("columnWidth"),i=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/r))),o=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%r),s=o-i*r,a=t.yPos;return e.call(n,{model:t.model,xZero:s,yZero:a,hidden:t.hidden})},getStartSeq:function(){for(var t=Math.max(0,Math.floor(this.g.zoomer.get("_alignmentScrollTop")/this.rectHeight))+1,e=0,n=0;e<t&&n<this.model.length;)e+=this.model.at(n).attributes.height||1,n++;return[n-1,-Math.max(0,this.g.zoomer.get("_alignmentScrollTop")-e*this.rectHeight+(this.model.at(n-1).attributes.height||1)*this.rectHeight)]},_getSeqForYClick:function(t){for(var e=this.getStartSeq(),n=r(e,2),i=n[0],o=n[1],s=o%this.rectHeight,a=Math.max(0,Math.floor((t-s)/this.rectHeight))+1,u=0,l=i;u<a&&l<this.model.length;)u+=this.model.at(l).attributes.height||1,l++;return[l-1,Math.max(0,Math.floor(t/this.rectHeight)-u+(this.model.at(l-1).get("height")||1))]},drawSeq:function(t,e){for(var n=t.model.get("seq"),r=t.yPos,i=this.rectWidth,o=this.rectHeight,s=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/i))),a=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%i),u={rectWidth:i,rectHeight:o,yPos:r,y:t.y},l=this.width,c=s;c<n.length;c++){var h=n[c];if(h=h.toUpperCase(),u.x=c,u.c=h,u.xPos=a,t.hidden.indexOf(c)<0&&(e(this,u),a+=i,a>l))break}},_drawRect:function(t,e){var n=t.color.getColor(e.c,{pos:e.x,y:e.y});if("undefined"!=typeof n&&null!==n)return t.ctx.fillStyle=n,t.ctx.fillRect(e.xPos,e.yPos,e.rectWidth,e.rectHeight)},_drawLetter:function(t,e){return t.ctx.drawImage(t.cache.getFontTile(e.c,e.rectWidth,e.rectHeight),e.xPos,e.yPos,e.rectWidth,e.rectHeight)}},s=function(t,e,n,r){return this.g=t,this.ctx=e,this.model=n,this.width=r.width,this.height=r.height,this.color=r.color,this.cache=r.cache,this.rectHeight=this.g.zoomer.get("rowHeight"),this.rectWidth=this.g.zoomer.get("columnWidth"),this};(0,i.extend)(s.prototype,o),e.default=s},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(14),s=r(o),a=n(2),u=n(7),l=a.extend({className:"biojs_msa_conserv",initialize:function(t){this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.g.stats,"reset",this.render);var e=_.extend({},{fillColor:["#660","#ff0"],strokeColor:"#330",maxHeight:20,rectStyler:function(t,e){return t}},this.g.conservationConfig);return this.fillColor=e.fillColor,this.strokeColor=e.strokeColor,this.maxHeight=e.maxHeight,this.rectStyler=e.rectStyler,this.manageEvents()},colorer:function t(e){var t=function(){return"none"};if("string"==typeof e)t=function(){return e};else if(Array.isArray(e)){2!=e.length&&console.error("ERROR: colorRange array should have exactly two elements",e);var n="undefined"!=typeof d3&&!!d3.scale,r="undefined"!=typeof d3_scale;if(n||r){var o=n?d3.scale.linear():d3_scale.scaleLinear(),s=o.domain([0,this.maxHeight]).range(e);t=function(t){return s(t.height)}}else console.warn("providing a [min/max] range as input requires d3 to be included - only using the first color"),t=function(t){return e[0]}}else console.warn("expected colorRange to be '#rgb' or ['#rgb', '#rgb']",e,"("+("undefined"==typeof e?"undefined":i(e))+")");return t},render:function(){var t=this.g.stats.scale(this.g.stats.conservation());u.removeAllChilds(this.el);var e=this.model.getMaxLength(),n=this.g.zoomer.get("columnWidth"),r=this.maxHeight,i=n*(e-this.g.columns.get("hidden").length),o=s.base({height:r,width:i});o.style.display="inline-block",o.style.cursor="pointer";for(var a=(this.rectData,this.colorer(this.fillColor)),l=this.colorer(this.strokeColor),c=this.rectStyler,h=this.g.zoomer.get("stepSize"),f=this.g.columns.get("hidden"),d=0,g=0;g<e;)if(f.indexOf(g)>=0)g+=h;else{i=n*h;for(var p=0,m=h-1,v=0;0<m?v<=m:v>=m;0<m?v++:v--)p+=t[g];var _=r*(p/h),y={
x:d,y:r-_,maxheight:r,width:i-n/4,height:_,rowPos:g},b=s.rect(y);b.style.stroke=l(y),b.style.fill=a(y),"function"==typeof c&&c(b,y),b.rowPos=g,o.appendChild(b),d+=i,g+=h}return this.el.appendChild(o),this},_onclick:function(t){var e=this,n=t.target.rowPos,r=this.g.zoomer.get("stepSize");return function(){for(var i=[],o=r-1,s=0;0<o?s<=o:s>=o;0<o?s++:s--)i.push(e.g.trigger("bar:click",{rowPos:n+s,evt:t}));return i}()},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("bar:mousein",{rowPos:e,evt:t})},_onmouseout:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("bar:mouseout",{rowPos:e,evt:t})}});e.default=l},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=r(i),s=n(2),a=n(7),u=s.extend({className:"biojs_msa_gapview",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.model,"reset",this.render),this.manageEvents()},render:function(){var t=this.g.stats.gaps();a.removeAllChilds(this.el);var e=this.model.getMaxLength(),n=this.g.zoomer.get("columnWidth"),r=20,i=n*(e-this.g.columns.get("hidden").length),s=o.base({height:r,width:i});s.style.display="inline-block",s.style.cursor="pointer";for(var u=this.g.zoomer.get("stepSize"),l=this.g.columns.get("hidden"),c=0,h=0;h<e;)if(l.indexOf(h)>=0)h+=u;else{i=n*u;for(var f=0,d=u-1,g=0;0<d?g<=d:g>=d;0<d?g++:g--)f+=t[h];var p=r*(f/u),m=o.rect({x:c,y:r-p,width:i-n/4,height:p,style:"stroke:red;stroke-width:1;"});m.rowPos=h,s.appendChild(m),c+=i,h+=u}return this.el.appendChild(s),this},_onclick:function(t){var e=this,n=t.target.rowPos,r=this.g.zoomer.get("stepSize");return function(){for(var i=[],o=r-1,s=0;0<o?s<=o:s>=o;0<o?s++:s--)i.push(e.g.trigger("gap:click",{rowPos:n+s,evt:t}));return i}()},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("gap:mousein",{rowPos:e,evt:t})},_onmouseout:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("gap:mouseout",{rowPos:e,evt:t})}});e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(132),o=r(i),s=n(134),a=r(s),u=n(4),l=u.extend({initialize:function(t){var e=this;return this.g=t.g,this.draw(),this.listenTo(this.g.vis,"change:labels change:metacell change:leftHeader",function(){return e.draw(),e.render()})},draw:function(){if(this.removeViews(),this.g.vis.get("leftHeader")&&(this.g.vis.get("labels")||this.g.vis.get("metacell"))){var t=new o.default({model:this.model,g:this.g});t.ordering=-50,this.addView("lHeader",t)}var e=new a.default({model:this.model,g:this.g});return e.ordering=0,this.addView("rHeader",e)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_header"}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i=n(2),o=n(7),s=i.extend({className:"biojs_msa_headers",initialize:function(t){return this.g=t.g,this.listenTo(this.g.vis,"change:metacell change:labels",this.render),this.listenTo(this.g.zoomer,"change:labelWidth change:metaWidth",this.render)},render:function(){o.removeAllChilds(this.el);var t=0;return t+=this.g.zoomer.getLeftBlockWidth(),this.el.style.width=t+"px",this.g.vis.get("labels")&&this.el.appendChild(this.labelDOM()),this.g.vis.get("metacell")&&this.el.appendChild(this.metaDOM()),this.el.style.display="inline-block",this.el.style.fontSize=this.g.zoomer.get("markerFontsize"),this},labelDOM:function(){var t=r.mk("div");if(t.style.width=this.g.zoomer.getLabelWidth(),t.style.display="inline-block",this.g.vis.get("labelCheckbox")&&t.appendChild(this.addEl(".",10)),this.g.vis.get("labelId")&&t.appendChild(this.addEl("ID",this.g.zoomer.get("labelIdLength"))),this.g.vis.get("labelPartition")&&t.appendChild(this.addEl("part",15)),this.g.vis.get("labelName")){var e=this.addEl("Label");t.appendChild(e)}return t},addEl:function(t,e){var n=document.createElement("span");return n.textContent=t,"undefined"!=typeof e&&null!==e&&(n.style.width=e+"px"),n.style.display="inline-block",n},metaDOM:function(){var t=r.mk("div");return t.style.width=this.g.zoomer.getMetaWidth(),t.style.display="inline-block",this.g.vis.get("metaGaps")&&t.appendChild(this.addEl("Gaps",this.g.zoomer.get("metaGapWidth"))),this.g.vis.get("metaIdentity")&&t.appendChild(this.addEl("Ident",this.g.zoomer.get("metaIdentWidth"))),t}});e.default=s},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=r(i),s=n(2),a=n(7),u=n(5),l=s.extend({className:"biojs_msa_marker",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth change:markerStepSize change:markerFontsize",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.manageEvents()},render:function(){a.removeAllChilds(this.el);var t=this.g.zoomer.get("markerFontsize"),e=this.g.zoomer.get("columnWidth"),n=this.g.zoomer.get("stepSize"),r=this.g.zoomer.get("markerStepSize"),i=this.g.columns.get("hidden");this.el.style.fontSize=t;for(var o=document.createElement("span"),s=this.model.getMaxLength(),u=0;u<s;u++)if(i.indexOf(u)>=0){var l=this.markerHidden(u,n);l&&o.appendChild(l),u+=n}else{var c=document.createElement("span");c.className="msa-col-header",c.style.width=e+"px",c.style.display="inline-block",(u+1)%r===0?c.textContent=u+1:(u+1)%n===0?c.textContent=".":c.textContent=" ",c.rowPos=u,o.appendChild(c)}return this.el.appendChild(o),this},markerHidden:function(t,e){for(var n=this,r=this.g.columns.get("hidden").slice(0),i=Math.max(0,t-e),s=!0,a=i;a<=t;a++)s&=r.indexOf(a)>=0;if(!s){for(var l=this.model.getMaxLength(),c=0,h=-1,f=t;f<=l&&(h>=0||(h=r.indexOf(f)),r.indexOf(f)>=0);f++)c++;var d=o.base({height:10,width:10});d.style.position="relative";var g=o.polygon({points:"0,0 5,5 10,0",style:"fill:lime;stroke:purple;stroke-width:1"});return u(g).on("click",function(t){return r.splice(h,c),n.g.columns.set("hidden",r)}),d.appendChild(g),d}},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onclick:function(t){var e=t.target.rowPos,n=this.g.zoomer.get("stepSize");return this.g.trigger("column:click",{rowPos:e,stepSize:n,evt:t})},_onmousein:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos),n=this.g.zoomer.get("stepSize");return this.g.trigger("column:mousein",{rowPos:e,stepSize:n,evt:t})},_onmouseout:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos),n=this.g.zoomer.get("stepSize");return this.g.trigger("column:mouseout",{rowPos:e,stepSize:n,evt:t})}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(133),o=r(i),s=n(129),a=r(s),u=n(135),l=r(u),c=n(130),h=r(c),f=n(4),d=f.extend({initialize:function(t){return this.g=t.g,this.blockEvents=!1,this.listenTo(this.g.vis,"change:header",function(){return this.draw(),this.render()}),this.listenTo(this.g.vis,"change",this._setSpacer),this.listenTo(this.g.zoomer,"change:alignmentWidth",this._setWidth),this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft",this._adjustScrollingLeft),this.listenTo(this.g.columns,"change:hidden",function(){return this.draw(),this.render()}),this.draw(),this.g.vis.once("change:loaded",this._adjustScrollingLeft,this)},events:{scroll:"_sendScrollEvent"},draw:function(){if(this.removeViews(),this.g.vis.get("conserv")){var t=new a.default({model:this.model,g:this.g});t.ordering=-20,this.addView("conserv",t)}if(this.g.vis.get("markers")){var e=new o.default({model:this.model,g:this.g});e.ordering=-10,this.addView("marker",e)}if(this.g.vis.get("seqlogo")){var n=new l.default({model:this.model,g:this.g});n.ordering=-30,this.addView("seqlogo",n)}if(this.g.vis.get("gapHeader")){var r=new h.default({model:this.model,g:this.g});return r.ordering=-25,this.addView("gapview",r)}},render:function(){return this.renderSubviews(),this._setSpacer(),this.el.className="biojs_msa_rheader",this.el.style.overflowX="auto",this.el.style.display="inline-block",this._setWidth(),this._adjustScrollingLeft(),this},_sendScrollEvent:function(){return this.blockEvents||this.g.zoomer.set("_alignmentScrollLeft",this.el.scrollLeft,{origin:"header"}),this.blockEvents=!1},_adjustScrollingLeft:function(t,e,n){if(null==("undefined"!=typeof n&&null!==n?n.origin:void 0)||"header"!==n.origin){var r=this.g.zoomer.get("_alignmentScrollLeft");return this.blockEvents=!0,this.el.scrollLeft=r}},_setSpacer:function(){return this.el.style.marginLeft=this._getLabelWidth()+"px"},_getLabelWidth:function(){var t=0;return this.g.vis.get("leftHeader")||(t+=this.g.zoomer.getLeftBlockWidth()),t},_setWidth:function(){return this.el.style.width=this.g.zoomer.getAlignmentWidth()+"px"}});e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),i=n(2),o=n(7),s=i.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:alignmentWidth",this.render),this.listenTo(this.g.colorscheme,"change",function(){var t=this.g.colorscheme.getSelectedScheme();return this.seqlogo.changeColors(t),this.render()}),this.listenTo(this.g.zoomer,"change:columnWidth",function(){return this.seqlogo.column_width=this.g.zoomer.get("columnWidth"),this.render()}),this.listenTo(this.g.stats,"reset",function(){return this.draw(),this.render()}),this.draw()},draw:function(){o.removeAllChilds(this.el);var t=this.g.stats.conservResidue({scaled:!0});t=_.map(t,function(t){return _.pick(t,function(t,e){return"-"!==e})});var e={alphabet:"aa",heightArr:t},n=this.g.colorscheme.getSelectedScheme();return this.seqlogo=new r({model:this.model,g:this.g,data:e,yaxis:!1,scroller:!1,xaxis:!1,height:100,column_width:this.g.zoomer.get("columnWidth"),positionMarker:!1,zoom:1,el:this.el,colors:n})},render:function(){return this.seqlogo.render()}});e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(137),o=r(i),s=n(4),a=s.extend({initialize:function(t){var e=this;return this.g=t.g,this.draw(),this.listenTo(this.g.zoomer,"change:_alignmentScrollTop",this._adjustScrollingTop),this.g.vis.once("change:loaded",this._adjustScrollingTop,this),this.listenTo(this.g.zoomer,"change:alignmentHeight",this._setHeight),this.listenTo(this.model,"change:reference",this.draw),this.listenTo(this.model,"reset add remove",function(){return e.draw(),e.render()})},draw:function(){this.removeViews();for(var t=0;t<this.model.length;t++)if(!this.model.at(t).get("hidden")){var e=new o.default({model:this.model.at(t),g:this.g});e.ordering=t,this.addView("row_"+t,e)}},events:{scroll:"_sendScrollEvent"},_sendScrollEvent:function(){return this.g.zoomer.set("_alignmentScrollTop",this.el.scrollTop,{origin:"label"})},_adjustScrollingTop:function(){return this.el.scrollTop=this.g.zoomer.get("_alignmentScrollTop")},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_labelblock",this.el.style.display="inline-block",this.el.style.verticalAlign="top",this.el.style.overflowY="auto",this.el.style.overflowX="hidden",this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this.el.style.lineHeight=""+this.g.zoomer.get("labelLineHeight"),this._setHeight(),this},_setHeight:function(){return this.el.style.height=this.g.zoomer.get("alignmentHeight")+"px"}});e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(138),o=r(i),s=n(139),a=r(s),u=n(4),l=u.extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.vis,"change:labels",this.drawR),this.listenTo(this.g.vis,"change:metacell",this.drawR),this.listenTo(this.g.zoomer,"change:rowHeight",function(){return this.el.style.height=this.g.zoomer.get("rowHeight")+"px"}),this.listenTo(this.g.selcol,"change reset add",this.setSelection)},draw:function(){if(this.removeViews(),this.g.vis.get("labels")&&this.addView("labels",new o.default({model:this.model,g:this.g})),this.g.vis.get("metacell")){var t=new a.default({model:this.model,g:this.g});return this.addView("metacell",t)}},drawR:function(){return this.draw(),this.render()},render:function(){return this.renderSubviews(),this.el.setAttribute("class","biojs_msa_labelrow"),this.el.style.height=this.g.zoomer.get("rowHeight")*(this.model.attributes.height||1)+"px",this.setSelection(),this},setSelection:function(){return this.g.selcol.getSelForRow(this.model.id).length>0?this.el.style.fontWeight="bold":this.el.style.fontWeight="normal"}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(7),o=r.extend({initialize:function(t){return this.seq=t.seq,this.g=t.g,this.manageEvents()},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.listenTo(this.g.vis,"change:labelName change:labelId change:labelPartition change:labelCheckbox",this.render),this.listenTo(this.g.zoomer,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",this.render),this.listenTo(this.g.zoomer,"change:labelFontSize change:labelLineHeight change:labelWidth change:rowHeight",this.render)},render:function(){if(i.removeAllChilds(this.el),this.el.style.width=this.g.zoomer.getLabelWidth()+"px",this.el.setAttribute("class","biojs_msa_labels"),this.g.vis.get("labelCheckbox")){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.value=this.model.get("id"),t.name="seq",t.style.width=this.g.zoomer.get("labelCheckLength")+"px",this.el.appendChild(t)}if(this.g.vis.get("labelId")){var e=document.createElement("span"),n=this.model.get("id");isNaN(n)||n++,e.textContent=n,e.style.width=this.g.zoomer.get("labelIdLength")+"px",e.style.display="inline-block",this.el.appendChild(e)}if(this.g.vis.get("labelPartition")){var r=document.createElement("span");r.style.width=this.g.zoomer.get("labelPartLength")+"px",r.textContent=this.model.get("partition"),r.style.display="inline-block",this.el.appendChild(e),this.el.appendChild(r)}if(this.g.vis.get("labelName")){var o=document.createElement("span");o.textContent=this.model.get("name"),this.model.get("ref")&&this.g.config.get("hasRef")&&(o.style.fontWeight="bold"),o.style.width=this.g.zoomer.get("labelNameLength")+"px",this.el.appendChild(o)}return this.el.style.overflow=scroll,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this},_onclick:function(t){var e=this.model.get("id");return this.g.trigger("row:click",{seqId:e,evt:t})},_onmousein:function(t){var e=this.model.get("id");return this.g.trigger("row:mouseout",{seqId:e,evt:t})},_onmouseout:function(t){var e=this.model.get("id");return this.g.trigger("row:mouseout",{seqId:e,evt:t})}});e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(6),s=r(o),a=n(3),u=n(2),l=n(7),c=u.extend({className:"biojs_msa_metaview",initialize:function(t){return this.g=t.g,this.listenTo(this.g.vis,"change:metacell",this.render),this.listenTo(this.g.zoomer,"change:metaWidth",this.render)},events:{click:"_onclick",mousein:"_onmousein",mouseout:"_onmouseout"},render:function(){l.removeAllChilds(this.el),this.el.style.display="inline-block";var t=this.g.zoomer.getMetaWidth();if(this.el.style.width=t-10,this.el.style.paddingRight=5,this.el.style.paddingLeft=5,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")-2+"px",this.g.vis.get("metaGaps")){var e=this.model.get("seq"),n=(0,a.reduce)(e,function(t,e){return"-"===e?++t:void 0},0);n=(100*n/e.length).toFixed(0)+"%";var r=document.createElement("span");r.textContent=n,r.style.display="inline-block",r.style.width=35,this.el.appendChild(r)}if(this.g.vis.get("metaIdentity")){var o=this.g.stats.identity()[this.model.id],u=document.createElement("span");this.model.get("ref")&&this.g.config.get("hasRef")?u.textContent="ref.":"undefined"!=typeof o&&null!==o&&(u.textContent=o.toFixed(2)),u.style.display="inline-block",u.style.width=40,this.el.appendChild(u)}if(this.g.vis.get("metaLinks")&&this.model.attributes.ids){var c=i.seqs.buildLinks(this.model.attributes.ids);if(Object.keys(c).length>0){var h=new s.default({name:"↗"});c.forEach(function(t,e){return h.addNode(e,function(e){return window.open(t)})});var f=h.buildDOM();return f.style.cursor="pointer",this.el.appendChild(f)}}},_onclick:function(t){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:t})})},_onmousein:function(t){return this.g.trigger("meta:mousein",{seqId:this.model.get("id",{evt:t})})},_onmouseout:function(t){return this.g.trigger("meta:mouseout",{seqId:this.model.get("id",{evt:t})})}});e.default=c},function(t,e){"use strict";function n(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=n,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e){"use strict";function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t}t.exports=n;var r=Object.prototype.hasOwnProperty},function(t,e,n){e=t.exports=n(81)(),e.push([t.id,'.biojs_msa_stage{cursor:default;line-height:normal;font-family:Helvetica}.biojs_msa_seqblock{cursor:move}.biojs_msa_layer{display:block;white-space:nowrap}.biojs_msa_labels{color:#000;display:inline-block;cursor:pointer;vertical-align:middle;overflow:hidden;text-overflow:clip}.biojs_msa_header,.biojs_msa_labels{white-space:nowrap;text-align:left}.biojs_msa_labelrow:before{content:"";display:inline-block;width:0;height:100%;vertical-align:middle}.biojs_msa_labelrow{height:100%}.biojs_msa_labelblock::-webkit-scrollbar,.biojs_msa_rheader::-webkit-scrollbar{//:none;width:7px;height:7px}.biojs_msa_labelblock::-webkit-scrollbar-thumb,.biojs_msa_rheader::-webkit-scrollbar-thumb{border-radius:4px;background-color:rgba(0,0,0,.5);box-shadow:0 0 1px hsla(0,0%,100%,.5)}.biojs_msa_marker{color:#999;white-space:nowrap}.biojs_msa_marker .msa-col-header{cursor:pointer;text-align:center}.biojs_msa_marker .msa-col-header:hover{color:red}.smenubar .smenubar_alink{background:#3498db;background-image:-webkit-linear-gradient(top,#3498db,#2980b9);background-image:linear-gradient(180deg,#3498db,#2980b9);border-radius:28px;font-family:Arial;color:#fff;padding:3px 10px;margin-left:10px;text-decoration:none}.smenubar{display:inline-block}.smenubar .smenubar_alink:hover{cursor:pointer}.smenu-dropdown{position:absolute;z-index:9;display:none;margin-left:5px;margin-top:22px}.smenu-dropdown .smenu-dropdown-menu,.smenu-dropdown .smenu-dropdown-panel{min-width:160px;max-width:360px;list-style:none;background:#fff;border:1px solid #ddd;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 5px 10px rgba(0,0,0,.2);overflow:visible;padding:4px 0;margin:0}.smenu-dropdown .smenu-dropdown-panel{padding:10px}.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-menu,.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-panel{max-height:358px;overflow:auto}.smenu-dropdown .smenu-dropdown-menu li{display:block;color:#555;text-decoration:none;line-height:18px;padding:3px 15px;white-space:nowrap}.smenu-dropdown .smenu-dropdown-menu li:hover{background-color:#08c;color:#fff;cursor:pointer}.smenu-dropdown .smenu-dropdown-menu .smenu-dropdown-divider{font-size:1px;border-top:1px solid #e5e5e5;padding:0;margin:5px 0}.biojs_msa_div{position:relative}.biojs_msa_scale{position:absolute;bottom:0;right:0;background-color:#fff;box-shadow:0 2px 3px #999;border-radius:3px;margin:5px 0 0 auto;padding:5px;text-align:center}.biojs_msa_scale .msa-btngroup{margin:5px auto 0}.biojs_msa_scale [type=range]{cursor:pointer}.biojs_msa_scale .msa-btn-close{text-align:right;font-size:.8em;padding:2px}.biojs_msa_scale .msa-btn-open{background-color:#fff}.biojs_msa_scale .msa-hide{display:none}.msa-btn{cursor:pointer;font-size:1.1em;display:inline-block;padding:2px 8px;margin-bottom:0;border:1px solid transparent;border-radius:4px;box-sizing:border-box}.msa-btn:hover{background-color:#ddd}',""])},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(l(r.parts[o],e))}else{for(var s=[],o=0;o<r.parts.length;o++)s.push(l(r.parts[o],e));d[r.id]={id:r.id,refs:1,parts:s}}}}function i(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],s=i[1],a=i[2],u=i[3],l={css:s,media:a,sourceMap:u};n[o]?n[o].parts.push(l):e.push(n[o]={id:o,parts:[l]})}return e}function o(t,e){var n=m(),r=y[y.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function u(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var n,r,i;if(e.singleton){var o=_++;n=v||(v=a(e)),r=c.bind(null,n,o,!1),i=c.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),r=f.bind(null,n),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),r=h.bind(null,n),i=function(){s(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function c(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function h(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},g=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},p=g(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=g(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,_=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=p()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=i(t);return r(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var a=n[s],u=d[a.id];u.refs--,o.push(u)}t&&r(i(t),e);for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete d[u.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var r=n(142);"string"==typeof r&&(r=[[t.id,r,""]]),n(143)(r,{}),r.locals&&(t.exports=r.locals)},function(t,e,n){function r(t){return n(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./StageScale":26,"./StageScale.js":26,"./colorscheme":27,"./colorscheme.js":27,"./columns":28,"./columns.js":28,"./config":29,"./config.js":29,"./package":30,"./package.js":30,"./selection/Selection":8,"./selection/Selection.js":8,"./selection/SelectionCol":9,"./selection/SelectionCol.js":9,"./selection/index":50,"./selection/index.js":50,"./user":31,"./user.js":31,"./visOrdering":32,"./visOrdering.js":32,"./visibility":33,"./visibility.js":33,"./zoomer":34,"./zoomer.js":34};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=145},function(t,e,n){function r(t){return n(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./bmath":18,"./bmath.js":18,"./exporter":19,"./exporter.js":19,"./file":20,"./file.js":20,"./index":38,"./index.js":38,"./loader":21,"./loader.js":21,"./proxy":22,"./proxy.js":22,"./recognize":39,"./recognize.js":39,"./seqgen":40,"./seqgen.js":40,"./svg":14,"./svg.js":14,"./tree":41,"./tree.js":41};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=146}]);
//# sourceMappingURL=msa.js.map</script>
<script>require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canMutationObserver = typeof window !== 'undefined'
    && window.MutationObserver;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    var queue = [];

    if (canMutationObserver) {
        var hiddenDiv = document.createElement("div");
        var observer = new MutationObserver(function () {
            var queueList = queue.slice();
            queue.length = 0;
            queueList.forEach(function (fn) {
                fn();
            });
        });

        observer.observe(hiddenDiv, { attributes: true });

        return function nextTick(fn) {
            if (!queue.length) {
                hiddenDiv.setAttribute('yes', 'no');
            }
            queue.push(fn);
        };
    }

    if (canPost) {
        window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],2:[function(require,module,exports){
var GenericReader;

var xhr = require('request');
var vow = require('vow');

module.exports = GenericReader = (function() {
  function GenericReader() {}

  // returns a promise if callback is undefined
  GenericReader.read = function(url, callback) {
    var onret;
    onret = (function(_this) {
      return function(err, response, text) {
        return GenericReader._onRetrieval(err, text, callback, _this);
      };
    })(this);

    if(typeof callback === "undefined"){
      var prom = vow.defer();
      callback = function(err, res){
        if(err){
          prom.reject(err);
        }else{
          prom.resolve(res);
        }
      };
      xhr(url, onret);
      return prom.promise();
    }else{
      return xhr(url, onret);
    }
  };

  GenericReader._onRetrieval = function(err, text, callback, _this) {
    var rText;
    if(typeof err !== "undefined"){
      rText = _this.parse(text);
    }
    return callback.call(_this, err, rText);
  };

  // provide a convenient shortcut to inherit
  GenericReader.extend = function(obj, statics){
    return extend(GenericReader, obj, statics);
  };
  // Mixin utility
  GenericReader.mixin = function(proto) {
    var exports = ['read'];
    if(typeof proto !== "object"){
      proto = proto.prototype;
    }
    exports.forEach(function(name) {
      proto[name] = GenericReader[name];
    }, this);
    return proto;
  };

  return GenericReader;

})();

},{"request":4,"vow":3}],3:[function(require,module,exports){
(function (process,global){
/**
 * @module vow
 * @author Filatov Dmitry <dfilatov@yandex-team.ru>
 * @version 0.4.11
 * @license
 * Dual licensed under the MIT and GPL licenses:
 *   * http://www.opensource.org/licenses/mit-license.php
 *   * http://www.gnu.org/licenses/gpl.html
 */

(function(global) {

var undef,
    nextTick = (function() {
        var fns = [],
            enqueueFn = function(fn) {
                return fns.push(fn) === 1;
            },
            callFns = function() {
                var fnsToCall = fns, i = 0, len = fns.length;
                fns = [];
                while(i < len) {
                    fnsToCall[i++]();
                }
            };

        if(typeof setImmediate === 'function') { // ie10, nodejs >= 0.10
            return function(fn) {
                enqueueFn(fn) && setImmediate(callFns);
            };
        }

        if(typeof process === 'object' && process.nextTick) { // nodejs < 0.10
            return function(fn) {
                enqueueFn(fn) && process.nextTick(callFns);
            };
        }

        var MutationObserver = global.MutationObserver || global.WebKitMutationObserver; // modern browsers
        if(MutationObserver) {
            var num = 1,
                node = document.createTextNode('');

            new MutationObserver(callFns).observe(node, { characterData : true });

            return function(fn) {
                enqueueFn(fn) && (node.data = (num *= -1));
            };
        }

        if(global.postMessage) {
            var isPostMessageAsync = true;
            if(global.attachEvent) {
                var checkAsync = function() {
                        isPostMessageAsync = false;
                    };
                global.attachEvent('onmessage', checkAsync);
                global.postMessage('__checkAsync', '*');
                global.detachEvent('onmessage', checkAsync);
            }

            if(isPostMessageAsync) {
                var msg = '__promise' + Math.random() + '_' +new Date,
                    onMessage = function(e) {
                        if(e.data === msg) {
                            e.stopPropagation && e.stopPropagation();
                            callFns();
                        }
                    };

                global.addEventListener?
                    global.addEventListener('message', onMessage, true) :
                    global.attachEvent('onmessage', onMessage);

                return function(fn) {
                    enqueueFn(fn) && global.postMessage(msg, '*');
                };
            }
        }

        var doc = global.document;
        if('onreadystatechange' in doc.createElement('script')) { // ie6-ie8
            var createScript = function() {
                    var script = doc.createElement('script');
                    script.onreadystatechange = function() {
                        script.parentNode.removeChild(script);
                        script = script.onreadystatechange = null;
                        callFns();
                };
                (doc.documentElement || doc.body).appendChild(script);
            };

            return function(fn) {
                enqueueFn(fn) && createScript();
            };
        }

        return function(fn) { // old browsers
            enqueueFn(fn) && setTimeout(callFns, 0);
        };
    })(),
    throwException = function(e) {
        nextTick(function() {
            throw e;
        });
    },
    isFunction = function(obj) {
        return typeof obj === 'function';
    },
    isObject = function(obj) {
        return obj !== null && typeof obj === 'object';
    },
    toStr = Object.prototype.toString,
    isArray = Array.isArray || function(obj) {
        return toStr.call(obj) === '[object Array]';
    },
    getArrayKeys = function(arr) {
        var res = [],
            i = 0, len = arr.length;
        while(i < len) {
            res.push(i++);
        }
        return res;
    },
    getObjectKeys = Object.keys || function(obj) {
        var res = [];
        for(var i in obj) {
            obj.hasOwnProperty(i) && res.push(i);
        }
        return res;
    },
    defineCustomErrorType = function(name) {
        var res = function(message) {
            this.name = name;
            this.message = message;
        };

        res.prototype = new Error();

        return res;
    },
    wrapOnFulfilled = function(onFulfilled, idx) {
        return function(val) {
            onFulfilled.call(this, val, idx);
        };
    };

/**
 * @class Deferred
 * @exports vow:Deferred
 * @description
 * The `Deferred` class is used to encapsulate newly-created promise object along with functions that resolve, reject or notify it.
 */

/**
 * @constructor
 * @description
 * You can use `vow.defer()` instead of using this constructor.
 *
 * `new vow.Deferred()` gives the same result as `vow.defer()`.
 */
var Deferred = function() {
    this._promise = new Promise();
};

Deferred.prototype = /** @lends Deferred.prototype */{
    /**
     * Returns the corresponding promise.
     *
     * @returns {vow:Promise}
     */
    promise : function() {
        return this._promise;
    },

    /**
     * Resolves the corresponding promise with the given `value`.
     *
     * @param {*} value
     *
     * @example
     * ```js
     * var defer = vow.defer(),
     *     promise = defer.promise();
     *
     * promise.then(function(value) {
     *     // value is "'success'" here
     * });
     *
     * defer.resolve('success');
     * ```
     */
    resolve : function(value) {
        this._promise.isResolved() || this._promise._resolve(value);
    },

    /**
     * Rejects the corresponding promise with the given `reason`.
     *
     * @param {*} reason
     *
     * @example
     * ```js
     * var defer = vow.defer(),
     *     promise = defer.promise();
     *
     * promise.fail(function(reason) {
     *     // reason is "'something is wrong'" here
     * });
     *
     * defer.reject('something is wrong');
     * ```
     */
    reject : function(reason) {
        if(this._promise.isResolved()) {
            return;
        }

        if(vow.isPromise(reason)) {
            reason = reason.then(function(val) {
                var defer = vow.defer();
                defer.reject(val);
                return defer.promise();
            });
            this._promise._resolve(reason);
        }
        else {
            this._promise._reject(reason);
        }
    },

    /**
     * Notifies the corresponding promise with the given `value`.
     *
     * @param {*} value
     *
     * @example
     * ```js
     * var defer = vow.defer(),
     *     promise = defer.promise();
     *
     * promise.progress(function(value) {
     *     // value is "'20%'", "'40%'" here
     * });
     *
     * defer.notify('20%');
     * defer.notify('40%');
     * ```
     */
    notify : function(value) {
        this._promise.isResolved() || this._promise._notify(value);
    }
};

var PROMISE_STATUS = {
    PENDING   : 0,
    RESOLVED  : 1,
    FULFILLED : 2,
    REJECTED  : 3
};

/**
 * @class Promise
 * @exports vow:Promise
 * @description
 * The `Promise` class is used when you want to give to the caller something to subscribe to,
 * but not the ability to resolve or reject the deferred.
 */

/**
 * @constructor
 * @param {Function} resolver See https://github.com/domenic/promises-unwrapping/blob/master/README.md#the-promise-constructor for details.
 * @description
 * You should use this constructor directly only if you are going to use `vow` as DOM Promises implementation.
 * In other case you should use `vow.defer()` and `defer.promise()` methods.
 * @example
 * ```js
 * function fetchJSON(url) {
 *     return new vow.Promise(function(resolve, reject, notify) {
 *         var xhr = new XMLHttpRequest();
 *         xhr.open('GET', url);
 *         xhr.responseType = 'json';
 *         xhr.send();
 *         xhr.onload = function() {
 *             if(xhr.response) {
 *                 resolve(xhr.response);
 *             }
 *             else {
 *                 reject(new TypeError());
 *             }
 *         };
 *     });
 * }
 * ```
 */
var Promise = function(resolver) {
    this._value = undef;
    this._status = PROMISE_STATUS.PENDING;

    this._fulfilledCallbacks = [];
    this._rejectedCallbacks = [];
    this._progressCallbacks = [];

    if(resolver) { // NOTE: see https://github.com/domenic/promises-unwrapping/blob/master/README.md
        var _this = this,
            resolverFnLen = resolver.length;

        resolver(
            function(val) {
                _this.isResolved() || _this._resolve(val);
            },
            resolverFnLen > 1?
                function(reason) {
                    _this.isResolved() || _this._reject(reason);
                } :
                undef,
            resolverFnLen > 2?
                function(val) {
                    _this.isResolved() || _this._notify(val);
                } :
                undef);
    }
};

Promise.prototype = /** @lends Promise.prototype */ {
    /**
     * Returns the value of the fulfilled promise or the reason in case of rejection.
     *
     * @returns {*}
     */
    valueOf : function() {
        return this._value;
    },

    /**
     * Returns `true` if the promise is resolved.
     *
     * @returns {Boolean}
     */
    isResolved : function() {
        return this._status !== PROMISE_STATUS.PENDING;
    },

    /**
     * Returns `true` if the promise is fulfilled.
     *
     * @returns {Boolean}
     */
    isFulfilled : function() {
        return this._status === PROMISE_STATUS.FULFILLED;
    },

    /**
     * Returns `true` if the promise is rejected.
     *
     * @returns {Boolean}
     */
    isRejected : function() {
        return this._status === PROMISE_STATUS.REJECTED;
    },

    /**
     * Adds reactions to the promise.
     *
     * @param {Function} [onFulfilled] Callback that will be invoked with a provided value after the promise has been fulfilled
     * @param {Function} [onRejected] Callback that will be invoked with a provided reason after the promise has been rejected
     * @param {Function} [onProgress] Callback that will be invoked with a provided value after the promise has been notified
     * @param {Object} [ctx] Context of the callbacks execution
     * @returns {vow:Promise} A new promise, see https://github.com/promises-aplus/promises-spec for details
     */
    then : function(onFulfilled, onRejected, onProgress, ctx) {
        var defer = new Deferred();
        this._addCallbacks(defer, onFulfilled, onRejected, onProgress, ctx);
        return defer.promise();
    },

    /**
     * Adds only a rejection reaction. This method is a shorthand for `promise.then(undefined, onRejected)`.
     *
     * @param {Function} onRejected Callback that will be called with a provided 'reason' as argument after the promise has been rejected
     * @param {Object} [ctx] Context of the callback execution
     * @returns {vow:Promise}
     */
    'catch' : function(onRejected, ctx) {
        return this.then(undef, onRejected, ctx);
    },

    /**
     * Adds only a rejection reaction. This method is a shorthand for `promise.then(null, onRejected)`. It's also an alias for `catch`.
     *
     * @param {Function} onRejected Callback to be called with the value after promise has been rejected
     * @param {Object} [ctx] Context of the callback execution
     * @returns {vow:Promise}
     */
    fail : function(onRejected, ctx) {
        return this.then(undef, onRejected, ctx);
    },

    /**
     * Adds a resolving reaction (for both fulfillment and rejection).
     *
     * @param {Function} onResolved Callback that will be invoked with the promise as an argument, after the promise has been resolved.
     * @param {Object} [ctx] Context of the callback execution
     * @returns {vow:Promise}
     */
    always : function(onResolved, ctx) {
        var _this = this,
            cb = function() {
                return onResolved.call(this, _this);
            };

        return this.then(cb, cb, ctx);
    },

    /**
     * Adds a progress reaction.
     *
     * @param {Function} onProgress Callback that will be called with a provided value when the promise has been notified
     * @param {Object} [ctx] Context of the callback execution
     * @returns {vow:Promise}
     */
    progress : function(onProgress, ctx) {
        return this.then(undef, undef, onProgress, ctx);
    },

    /**
     * Like `promise.then`, but "spreads" the array into a variadic value handler.
     * It is useful with the `vow.all` and the `vow.allResolved` methods.
     *
     * @param {Function} [onFulfilled] Callback that will be invoked with a provided value after the promise has been fulfilled
     * @param {Function} [onRejected] Callback that will be invoked with a provided reason after the promise has been rejected
     * @param {Object} [ctx] Context of the callbacks execution
     * @returns {vow:Promise}
     *
     * @example
     * ```js
     * var defer1 = vow.defer(),
     *     defer2 = vow.defer();
     *
     * vow.all([defer1.promise(), defer2.promise()]).spread(function(arg1, arg2) {
     *     // arg1 is "1", arg2 is "'two'" here
     * });
     *
     * defer1.resolve(1);
     * defer2.resolve('two');
     * ```
     */
    spread : function(onFulfilled, onRejected, ctx) {
        return this.then(
            function(val) {
                return onFulfilled.apply(this, val);
            },
            onRejected,
            ctx);
    },

    /**
     * Like `then`, but terminates a chain of promises.
     * If the promise has been rejected, this method throws it's "reason" as an exception in a future turn of the event loop.
     *
     * @param {Function} [onFulfilled] Callback that will be invoked with a provided value after the promise has been fulfilled
     * @param {Function} [onRejected] Callback that will be invoked with a provided reason after the promise has been rejected
     * @param {Function} [onProgress] Callback that will be invoked with a provided value after the promise has been notified
     * @param {Object} [ctx] Context of the callbacks execution
     *
     * @example
     * ```js
     * var defer = vow.defer();
     * defer.reject(Error('Internal error'));
     * defer.promise().done(); // exception to be thrown
     * ```
     */
    done : function(onFulfilled, onRejected, onProgress, ctx) {
        this
            .then(onFulfilled, onRejected, onProgress, ctx)
            .fail(throwException);
    },

    /**
     * Returns a new promise that will be fulfilled in `delay` milliseconds if the promise is fulfilled,
     * or immediately rejected if the promise is rejected.
     *
     * @param {Number} delay
     * @returns {vow:Promise}
     */
    delay : function(delay) {
        var timer,
            promise = this.then(function(val) {
                var defer = new Deferred();
                timer = setTimeout(
                    function() {
                        defer.resolve(val);
                    },
                    delay);

                return defer.promise();
            });

        promise.always(function() {
            clearTimeout(timer);
        });

        return promise;
    },

    /**
     * Returns a new promise that will be rejected in `timeout` milliseconds
     * if the promise is not resolved beforehand.
     *
     * @param {Number} timeout
     * @returns {vow:Promise}
     *
     * @example
     * ```js
     * var defer = vow.defer(),
     *     promiseWithTimeout1 = defer.promise().timeout(50),
     *     promiseWithTimeout2 = defer.promise().timeout(200);
     *
     * setTimeout(
     *     function() {
     *         defer.resolve('ok');
     *     },
     *     100);
     *
     * promiseWithTimeout1.fail(function(reason) {
     *     // promiseWithTimeout to be rejected in 50ms
     * });
     *
     * promiseWithTimeout2.then(function(value) {
     *     // promiseWithTimeout to be fulfilled with "'ok'" value
     * });
     * ```
     */
    timeout : function(timeout) {
        var defer = new Deferred(),
            timer = setTimeout(
                function() {
                    defer.reject(new vow.TimedOutError('timed out'));
                },
                timeout);

        this.then(
            function(val) {
                defer.resolve(val);
            },
            function(reason) {
                defer.reject(reason);
            });

        defer.promise().always(function() {
            clearTimeout(timer);
        });

        return defer.promise();
    },

    _vow : true,

    _resolve : function(val) {
        if(this._status > PROMISE_STATUS.RESOLVED) {
            return;
        }

        if(val === this) {
            this._reject(TypeError('Can\'t resolve promise with itself'));
            return;
        }

        this._status = PROMISE_STATUS.RESOLVED;

        if(val && !!val._vow) { // shortpath for vow.Promise
            val.isFulfilled()?
                this._fulfill(val.valueOf()) :
                val.isRejected()?
                    this._reject(val.valueOf()) :
                    val.then(
                        this._fulfill,
                        this._reject,
                        this._notify,
                        this);
            return;
        }

        if(isObject(val) || isFunction(val)) {
            var then;
            try {
                then = val.then;
            }
            catch(e) {
                this._reject(e);
                return;
            }

            if(isFunction(then)) {
                var _this = this,
                    isResolved = false;

                try {
                    then.call(
                        val,
                        function(val) {
                            if(isResolved) {
                                return;
                            }

                            isResolved = true;
                            _this._resolve(val);
                        },
                        function(err) {
                            if(isResolved) {
                                return;
                            }

                            isResolved = true;
                            _this._reject(err);
                        },
                        function(val) {
                            _this._notify(val);
                        });
                }
                catch(e) {
                    isResolved || this._reject(e);
                }

                return;
            }
        }

        this._fulfill(val);
    },

    _fulfill : function(val) {
        if(this._status > PROMISE_STATUS.RESOLVED) {
            return;
        }

        this._status = PROMISE_STATUS.FULFILLED;
        this._value = val;

        this._callCallbacks(this._fulfilledCallbacks, val);
        this._fulfilledCallbacks = this._rejectedCallbacks = this._progressCallbacks = undef;
    },

    _reject : function(reason) {
        if(this._status > PROMISE_STATUS.RESOLVED) {
            return;
        }

        this._status = PROMISE_STATUS.REJECTED;
        this._value = reason;

        this._callCallbacks(this._rejectedCallbacks, reason);
        this._fulfilledCallbacks = this._rejectedCallbacks = this._progressCallbacks = undef;
    },

    _notify : function(val) {
        this._callCallbacks(this._progressCallbacks, val);
    },

    _addCallbacks : function(defer, onFulfilled, onRejected, onProgress, ctx) {
        if(onRejected && !isFunction(onRejected)) {
            ctx = onRejected;
            onRejected = undef;
        }
        else if(onProgress && !isFunction(onProgress)) {
            ctx = onProgress;
            onProgress = undef;
        }

        var cb;

        if(!this.isRejected()) {
            cb = { defer : defer, fn : isFunction(onFulfilled)? onFulfilled : undef, ctx : ctx };
            this.isFulfilled()?
                this._callCallbacks([cb], this._value) :
                this._fulfilledCallbacks.push(cb);
        }

        if(!this.isFulfilled()) {
            cb = { defer : defer, fn : onRejected, ctx : ctx };
            this.isRejected()?
                this._callCallbacks([cb], this._value) :
                this._rejectedCallbacks.push(cb);
        }

        if(this._status <= PROMISE_STATUS.RESOLVED) {
            this._progressCallbacks.push({ defer : defer, fn : onProgress, ctx : ctx });
        }
    },

    _callCallbacks : function(callbacks, arg) {
        var len = callbacks.length;
        if(!len) {
            return;
        }

        var isResolved = this.isResolved(),
            isFulfilled = this.isFulfilled();

        nextTick(function() {
            var i = 0, cb, defer, fn;
            while(i < len) {
                cb = callbacks[i++];
                defer = cb.defer;
                fn = cb.fn;

                if(fn) {
                    var ctx = cb.ctx,
                        res;
                    try {
                        res = ctx? fn.call(ctx, arg) : fn(arg);
                    }
                    catch(e) {
                        defer.reject(e);
                        continue;
                    }

                    isResolved?
                        defer.resolve(res) :
                        defer.notify(res);
                }
                else {
                    isResolved?
                        isFulfilled?
                            defer.resolve(arg) :
                            defer.reject(arg) :
                        defer.notify(arg);
                }
            }
        });
    }
};

/** @lends Promise */
var staticMethods = {
    /**
     * Coerces the given `value` to a promise, or returns the `value` if it's already a promise.
     *
     * @param {*} value
     * @returns {vow:Promise}
     */
    cast : function(value) {
        return vow.cast(value);
    },

    /**
     * Returns a promise, that will be fulfilled only after all the items in `iterable` are fulfilled.
     * If any of the `iterable` items gets rejected, then the returned promise will be rejected.
     *
     * @param {Array|Object} iterable
     * @returns {vow:Promise}
     */
    all : function(iterable) {
        return vow.all(iterable);
    },

    /**
     * Returns a promise, that will be fulfilled only when any of the items in `iterable` are fulfilled.
     * If any of the `iterable` items gets rejected, then the returned promise will be rejected.
     *
     * @param {Array} iterable
     * @returns {vow:Promise}
     */
    race : function(iterable) {
        return vow.anyResolved(iterable);
    },

    /**
     * Returns a promise that has already been resolved with the given `value`.
     * If `value` is a promise, the returned promise will have `value`'s state.
     *
     * @param {*} value
     * @returns {vow:Promise}
     */
    resolve : function(value) {
        return vow.resolve(value);
    },

    /**
     * Returns a promise that has already been rejected with the given `reason`.
     *
     * @param {*} reason
     * @returns {vow:Promise}
     */
    reject : function(reason) {
        return vow.reject(reason);
    }
};

for(var prop in staticMethods) {
    staticMethods.hasOwnProperty(prop) &&
        (Promise[prop] = staticMethods[prop]);
}

var vow = /** @exports vow */ {
    Deferred : Deferred,

    Promise : Promise,

    /**
     * Creates a new deferred. This method is a factory method for `vow:Deferred` class.
     * It's equivalent to `new vow.Deferred()`.
     *
     * @returns {vow:Deferred}
     */
    defer : function() {
        return new Deferred();
    },

    /**
     * Static equivalent to `promise.then`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Function} [onFulfilled] Callback that will be invoked with a provided value after the promise has been fulfilled
     * @param {Function} [onRejected] Callback that will be invoked with a provided reason after the promise has been rejected
     * @param {Function} [onProgress] Callback that will be invoked with a provided value after the promise has been notified
     * @param {Object} [ctx] Context of the callbacks execution
     * @returns {vow:Promise}
     */
    when : function(value, onFulfilled, onRejected, onProgress, ctx) {
        return vow.cast(value).then(onFulfilled, onRejected, onProgress, ctx);
    },

    /**
     * Static equivalent to `promise.fail`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Function} onRejected Callback that will be invoked with a provided reason after the promise has been rejected
     * @param {Object} [ctx] Context of the callback execution
     * @returns {vow:Promise}
     */
    fail : function(value, onRejected, ctx) {
        return vow.when(value, undef, onRejected, ctx);
    },

    /**
     * Static equivalent to `promise.always`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Function} onResolved Callback that will be invoked with the promise as an argument, after the promise has been resolved.
     * @param {Object} [ctx] Context of the callback execution
     * @returns {vow:Promise}
     */
    always : function(value, onResolved, ctx) {
        return vow.when(value).always(onResolved, ctx);
    },

    /**
     * Static equivalent to `promise.progress`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Function} onProgress Callback that will be invoked with a provided value after the promise has been notified
     * @param {Object} [ctx] Context of the callback execution
     * @returns {vow:Promise}
     */
    progress : function(value, onProgress, ctx) {
        return vow.when(value).progress(onProgress, ctx);
    },

    /**
     * Static equivalent to `promise.spread`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Function} [onFulfilled] Callback that will be invoked with a provided value after the promise has been fulfilled
     * @param {Function} [onRejected] Callback that will be invoked with a provided reason after the promise has been rejected
     * @param {Object} [ctx] Context of the callbacks execution
     * @returns {vow:Promise}
     */
    spread : function(value, onFulfilled, onRejected, ctx) {
        return vow.when(value).spread(onFulfilled, onRejected, ctx);
    },

    /**
     * Static equivalent to `promise.done`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Function} [onFulfilled] Callback that will be invoked with a provided value after the promise has been fulfilled
     * @param {Function} [onRejected] Callback that will be invoked with a provided reason after the promise has been rejected
     * @param {Function} [onProgress] Callback that will be invoked with a provided value after the promise has been notified
     * @param {Object} [ctx] Context of the callbacks execution
     */
    done : function(value, onFulfilled, onRejected, onProgress, ctx) {
        vow.when(value).done(onFulfilled, onRejected, onProgress, ctx);
    },

    /**
     * Checks whether the given `value` is a promise-like object
     *
     * @param {*} value
     * @returns {Boolean}
     *
     * @example
     * ```js
     * vow.isPromise('something'); // returns false
     * vow.isPromise(vow.defer().promise()); // returns true
     * vow.isPromise({ then : function() { }); // returns true
     * ```
     */
    isPromise : function(value) {
        return isObject(value) && isFunction(value.then);
    },

    /**
     * Coerces the given `value` to a promise, or returns the `value` if it's already a promise.
     *
     * @param {*} value
     * @returns {vow:Promise}
     */
    cast : function(value) {
        return value && !!value._vow?
            value :
            vow.resolve(value);
    },

    /**
     * Static equivalent to `promise.valueOf`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @returns {*}
     */
    valueOf : function(value) {
        return value && isFunction(value.valueOf)? value.valueOf() : value;
    },

    /**
     * Static equivalent to `promise.isFulfilled`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @returns {Boolean}
     */
    isFulfilled : function(value) {
        return value && isFunction(value.isFulfilled)? value.isFulfilled() : true;
    },

    /**
     * Static equivalent to `promise.isRejected`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @returns {Boolean}
     */
    isRejected : function(value) {
        return value && isFunction(value.isRejected)? value.isRejected() : false;
    },

    /**
     * Static equivalent to `promise.isResolved`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @returns {Boolean}
     */
    isResolved : function(value) {
        return value && isFunction(value.isResolved)? value.isResolved() : true;
    },

    /**
     * Returns a promise that has already been resolved with the given `value`.
     * If `value` is a promise, the returned promise will have `value`'s state.
     *
     * @param {*} value
     * @returns {vow:Promise}
     */
    resolve : function(value) {
        var res = vow.defer();
        res.resolve(value);
        return res.promise();
    },

    /**
     * Returns a promise that has already been fulfilled with the given `value`.
     * If `value` is a promise, the returned promise will be fulfilled with the fulfill/rejection value of `value`.
     *
     * @param {*} value
     * @returns {vow:Promise}
     */
    fulfill : function(value) {
        var defer = vow.defer(),
            promise = defer.promise();

        defer.resolve(value);

        return promise.isFulfilled()?
            promise :
            promise.then(null, function(reason) {
                return reason;
            });
    },

    /**
     * Returns a promise that has already been rejected with the given `reason`.
     * If `reason` is a promise, the returned promise will be rejected with the fulfill/rejection value of `reason`.
     *
     * @param {*} reason
     * @returns {vow:Promise}
     */
    reject : function(reason) {
        var defer = vow.defer();
        defer.reject(reason);
        return defer.promise();
    },

    /**
     * Invokes the given function `fn` with arguments `args`
     *
     * @param {Function} fn
     * @param {...*} [args]
     * @returns {vow:Promise}
     *
     * @example
     * ```js
     * var promise1 = vow.invoke(function(value) {
     *         return value;
     *     }, 'ok'),
     *     promise2 = vow.invoke(function() {
     *         throw Error();
     *     });
     *
     * promise1.isFulfilled(); // true
     * promise1.valueOf(); // 'ok'
     * promise2.isRejected(); // true
     * promise2.valueOf(); // instance of Error
     * ```
     */
    invoke : function(fn, args) {
        var len = Math.max(arguments.length - 1, 0),
            callArgs;
        if(len) { // optimization for V8
            callArgs = Array(len);
            var i = 0;
            while(i < len) {
                callArgs[i++] = arguments[i];
            }
        }

        try {
            return vow.resolve(callArgs?
                fn.apply(global, callArgs) :
                fn.call(global));
        }
        catch(e) {
            return vow.reject(e);
        }
    },

    /**
     * Returns a promise, that will be fulfilled only after all the items in `iterable` are fulfilled.
     * If any of the `iterable` items gets rejected, the promise will be rejected.
     *
     * @param {Array|Object} iterable
     * @returns {vow:Promise}
     *
     * @example
     * with array:
     * ```js
     * var defer1 = vow.defer(),
     *     defer2 = vow.defer();
     *
     * vow.all([defer1.promise(), defer2.promise(), 3])
     *     .then(function(value) {
     *          // value is "[1, 2, 3]" here
     *     });
     *
     * defer1.resolve(1);
     * defer2.resolve(2);
     * ```
     *
     * @example
     * with object:
     * ```js
     * var defer1 = vow.defer(),
     *     defer2 = vow.defer();
     *
     * vow.all({ p1 : defer1.promise(), p2 : defer2.promise(), p3 : 3 })
     *     .then(function(value) {
     *          // value is "{ p1 : 1, p2 : 2, p3 : 3 }" here
     *     });
     *
     * defer1.resolve(1);
     * defer2.resolve(2);
     * ```
     */
    all : function(iterable) {
        var defer = new Deferred(),
            isPromisesArray = isArray(iterable),
            keys = isPromisesArray?
                getArrayKeys(iterable) :
                getObjectKeys(iterable),
            len = keys.length,
            res = isPromisesArray? [] : {};

        if(!len) {
            defer.resolve(res);
            return defer.promise();
        }

        var i = len;
        vow._forEach(
            iterable,
            function(value, idx) {
                res[keys[idx]] = value;
                if(!--i) {
                    defer.resolve(res);
                }
            },
            defer.reject,
            defer.notify,
            defer,
            keys);

        return defer.promise();
    },

    /**
     * Returns a promise, that will be fulfilled only after all the items in `iterable` are resolved.
     *
     * @param {Array|Object} iterable
     * @returns {vow:Promise}
     *
     * @example
     * ```js
     * var defer1 = vow.defer(),
     *     defer2 = vow.defer();
     *
     * vow.allResolved([defer1.promise(), defer2.promise()]).spread(function(promise1, promise2) {
     *     promise1.isRejected(); // returns true
     *     promise1.valueOf(); // returns "'error'"
     *     promise2.isFulfilled(); // returns true
     *     promise2.valueOf(); // returns "'ok'"
     * });
     *
     * defer1.reject('error');
     * defer2.resolve('ok');
     * ```
     */
    allResolved : function(iterable) {
        var defer = new Deferred(),
            isPromisesArray = isArray(iterable),
            keys = isPromisesArray?
                getArrayKeys(iterable) :
                getObjectKeys(iterable),
            i = keys.length,
            res = isPromisesArray? [] : {};

        if(!i) {
            defer.resolve(res);
            return defer.promise();
        }

        var onResolved = function() {
                --i || defer.resolve(iterable);
            };

        vow._forEach(
            iterable,
            onResolved,
            onResolved,
            defer.notify,
            defer,
            keys);

        return defer.promise();
    },

    allPatiently : function(iterable) {
        return vow.allResolved(iterable).then(function() {
            var isPromisesArray = isArray(iterable),
                keys = isPromisesArray?
                    getArrayKeys(iterable) :
                    getObjectKeys(iterable),
                rejectedPromises, fulfilledPromises,
                len = keys.length, i = 0, key, promise;

            if(!len) {
                return isPromisesArray? [] : {};
            }

            while(i < len) {
                key = keys[i++];
                promise = iterable[key];
                if(vow.isRejected(promise)) {
                    rejectedPromises || (rejectedPromises = isPromisesArray? [] : {});
                    isPromisesArray?
                        rejectedPromises.push(promise.valueOf()) :
                        rejectedPromises[key] = promise.valueOf();
                }
                else if(!rejectedPromises) {
                    (fulfilledPromises || (fulfilledPromises = isPromisesArray? [] : {}))[key] = vow.valueOf(promise);
                }
            }

            if(rejectedPromises) {
                throw rejectedPromises;
            }

            return fulfilledPromises;
        });
    },

    /**
     * Returns a promise, that will be fulfilled if any of the items in `iterable` is fulfilled.
     * If all of the `iterable` items get rejected, the promise will be rejected (with the reason of the first rejected item).
     *
     * @param {Array} iterable
     * @returns {vow:Promise}
     */
    any : function(iterable) {
        var defer = new Deferred(),
            len = iterable.length;

        if(!len) {
            defer.reject(Error());
            return defer.promise();
        }

        var i = 0, reason;
        vow._forEach(
            iterable,
            defer.resolve,
            function(e) {
                i || (reason = e);
                ++i === len && defer.reject(reason);
            },
            defer.notify,
            defer);

        return defer.promise();
    },

    /**
     * Returns a promise, that will be fulfilled only when any of the items in `iterable` is fulfilled.
     * If any of the `iterable` items gets rejected, the promise will be rejected.
     *
     * @param {Array} iterable
     * @returns {vow:Promise}
     */
    anyResolved : function(iterable) {
        var defer = new Deferred(),
            len = iterable.length;

        if(!len) {
            defer.reject(Error());
            return defer.promise();
        }

        vow._forEach(
            iterable,
            defer.resolve,
            defer.reject,
            defer.notify,
            defer);

        return defer.promise();
    },

    /**
     * Static equivalent to `promise.delay`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Number} delay
     * @returns {vow:Promise}
     */
    delay : function(value, delay) {
        return vow.resolve(value).delay(delay);
    },

    /**
     * Static equivalent to `promise.timeout`.
     * If `value` is not a promise, then `value` is treated as a fulfilled promise.
     *
     * @param {*} value
     * @param {Number} timeout
     * @returns {vow:Promise}
     */
    timeout : function(value, timeout) {
        return vow.resolve(value).timeout(timeout);
    },

    _forEach : function(promises, onFulfilled, onRejected, onProgress, ctx, keys) {
        var len = keys? keys.length : promises.length,
            i = 0;

        while(i < len) {
            vow.when(
                promises[keys? keys[i] : i],
                wrapOnFulfilled(onFulfilled, i),
                onRejected,
                onProgress,
                ctx);
            ++i;
        }
    },

    TimedOutError : defineCustomErrorType('TimedOut')
};

var defineAsGlobal = true;
if(typeof module === 'object' && typeof module.exports === 'object') {
    module.exports = vow;
    defineAsGlobal = false;
}

if(typeof modules === 'object' && isFunction(modules.define)) {
    modules.define('vow', function(provide) {
        provide(vow);
    });
    defineAsGlobal = false;
}

if(typeof define === 'function') {
    define(function(require, exports, module) {
        module.exports = vow;
    });
    defineAsGlobal = false;
}

defineAsGlobal && (global.vow = vow);

})(typeof window !== 'undefined'? window : global);

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":1}],4:[function(require,module,exports){
"use strict";
var window = require("global/window")
var once = require("once")
var isFunction = require("is-function")
var parseHeaders = require("parse-headers")
var xtend = require("xtend")

module.exports = createXHR
createXHR.XMLHttpRequest = window.XMLHttpRequest || noop
createXHR.XDomainRequest = "withCredentials" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest

forEachArray(["get", "put", "post", "patch", "head", "delete"], function(method) {
    createXHR[method === "delete" ? "del" : method] = function(uri, options, callback) {
        options = initParams(uri, options, callback)
        options.method = method.toUpperCase()
        return _createXHR(options)
    }
})

function forEachArray(array, iterator) {
    for (var i = 0; i < array.length; i++) {
        iterator(array[i])
    }
}

function isEmpty(obj){
    for(var i in obj){
        if(obj.hasOwnProperty(i)) return false
    }
    return true
}

function initParams(uri, options, callback) {
    var params = uri

    if (isFunction(options)) {
        callback = options
        if (typeof uri === "string") {
            params = {uri:uri}
        }
    } else {
        params = xtend(options, {uri: uri})
    }

    params.callback = callback
    return params
}

function createXHR(uri, options, callback) {
    options = initParams(uri, options, callback)
    return _createXHR(options)
}

function _createXHR(options) {
    var callback = options.callback
    if(typeof callback === "undefined"){
        throw new Error("callback argument missing")
    }
    callback = once(callback)

    function readystatechange() {
        if (xhr.readyState === 4) {
            loadFunc()
        }
    }

    function getBody() {
        // Chrome with requestType=blob throws errors arround when even testing access to responseText
        var body = undefined

        if (xhr.response) {
            body = xhr.response
        } else if (xhr.responseType === "text" || !xhr.responseType) {
            body = xhr.responseText || xhr.responseXML
        }

        if (isJson) {
            try {
                body = JSON.parse(body)
            } catch (e) {}
        }

        return body
    }

    var failureResponse = {
                body: undefined,
                headers: {},
                statusCode: 0,
                method: method,
                url: uri,
                rawRequest: xhr
            }

    function errorFunc(evt) {
        clearTimeout(timeoutTimer)
        if(!(evt instanceof Error)){
            evt = new Error("" + (evt || "Unknown XMLHttpRequest Error") )
        }
        evt.statusCode = 0
        callback(evt, failureResponse)
    }

    // will load the data & process the response in a special response object
    function loadFunc() {
        if (aborted) return
        var status
        clearTimeout(timeoutTimer)
        if(options.useXDR && xhr.status===undefined) {
            //IE8 CORS GET successful response doesn't have a status field, but body is fine
            status = 200
        } else {
            status = (xhr.status === 1223 ? 204 : xhr.status)
        }
        var response = failureResponse
        var err = null

        if (status !== 0){
            response = {
                body: getBody(),
                statusCode: status,
                method: method,
                headers: {},
                url: uri,
                rawRequest: xhr
            }
            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE
                response.headers = parseHeaders(xhr.getAllResponseHeaders())
            }
        } else {
            err = new Error("Internal XMLHttpRequest Error")
        }
        callback(err, response, response.body)

    }

    var xhr = options.xhr || null

    if (!xhr) {
        if (options.cors || options.useXDR) {
            xhr = new createXHR.XDomainRequest()
        }else{
            xhr = new createXHR.XMLHttpRequest()
        }
    }

    var key
    var aborted
    var uri = xhr.url = options.uri || options.url
    var method = xhr.method = options.method || "GET"
    var body = options.body || options.data || null
    var headers = xhr.headers = options.headers || {}
    var sync = !!options.sync
    var isJson = false
    var timeoutTimer

    if ("json" in options) {
        isJson = true
        headers["accept"] || headers["Accept"] || (headers["Accept"] = "application/json") //Don't override existing accept header declared by user
        if (method !== "GET" && method !== "HEAD") {
            headers["content-type"] || headers["Content-Type"] || (headers["Content-Type"] = "application/json") //Don't override existing accept header declared by user
            body = JSON.stringify(options.json)
        }
    }

    xhr.onreadystatechange = readystatechange
    xhr.onload = loadFunc
    xhr.onerror = errorFunc
    // IE9 must have onprogress be set to a unique function.
    xhr.onprogress = function () {
        // IE must die
    }
    xhr.ontimeout = errorFunc
    xhr.open(method, uri, !sync, options.username, options.password)
    //has to be after open
    if(!sync) {
        xhr.withCredentials = !!options.withCredentials
    }
    // Cannot set timeout with sync request
    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly
    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent
    if (!sync && options.timeout > 0 ) {
        timeoutTimer = setTimeout(function(){
            aborted=true//IE9 may still call readystatechange
            xhr.abort("timeout")
            var e = new Error("XMLHttpRequest timeout")
            e.code = "ETIMEDOUT"
            errorFunc(e)
        }, options.timeout )
    }

    if (xhr.setRequestHeader) {
        for(key in headers){
            if(headers.hasOwnProperty(key)){
                xhr.setRequestHeader(key, headers[key])
            }
        }
    } else if (options.headers && !isEmpty(options.headers)) {
        throw new Error("Headers cannot be set on an XDomainRequest object")
    }

    if ("responseType" in options) {
        xhr.responseType = options.responseType
    }

    if ("beforeSend" in options &&
        typeof options.beforeSend === "function"
    ) {
        options.beforeSend(xhr)
    }

    xhr.send(body)

    return xhr


}

function noop() {}

},{"global/window":5,"is-function":6,"once":7,"parse-headers":10,"xtend":11}],5:[function(require,module,exports){
(function (global){
if (typeof window !== "undefined") {
    module.exports = window;
} else if (typeof global !== "undefined") {
    module.exports = global;
} else if (typeof self !== "undefined"){
    module.exports = self;
} else {
    module.exports = {};
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],6:[function(require,module,exports){
module.exports = isFunction

var toString = Object.prototype.toString

function isFunction (fn) {
  var string = toString.call(fn)
  return string === '[object Function]' ||
    (typeof fn === 'function' && string !== '[object RegExp]') ||
    (typeof window !== 'undefined' &&
     // IE8 and below
     (fn === window.setTimeout ||
      fn === window.alert ||
      fn === window.confirm ||
      fn === window.prompt))
};

},{}],7:[function(require,module,exports){
module.exports = once

once.proto = once(function () {
  Object.defineProperty(Function.prototype, 'once', {
    value: function () {
      return once(this)
    },
    configurable: true
  })
})

function once (fn) {
  var called = false
  return function () {
    if (called) return
    called = true
    return fn.apply(this, arguments)
  }
}

},{}],8:[function(require,module,exports){
var isFunction = require('is-function')

module.exports = forEach

var toString = Object.prototype.toString
var hasOwnProperty = Object.prototype.hasOwnProperty

function forEach(list, iterator, context) {
    if (!isFunction(iterator)) {
        throw new TypeError('iterator must be a function')
    }

    if (arguments.length < 3) {
        context = this
    }

    if (toString.call(list) === '[object Array]')
        forEachArray(list, iterator, context)
    else if (typeof list === 'string')
        forEachString(list, iterator, context)
    else
        forEachObject(list, iterator, context)
}

function forEachArray(array, iterator, context) {
    for (var i = 0, len = array.length; i < len; i++) {
        if (hasOwnProperty.call(array, i)) {
            iterator.call(context, array[i], i, array)
        }
    }
}

function forEachString(string, iterator, context) {
    for (var i = 0, len = string.length; i < len; i++) {
        // no such thing as a sparse string.
        iterator.call(context, string.charAt(i), i, string)
    }
}

function forEachObject(object, iterator, context) {
    for (var k in object) {
        if (hasOwnProperty.call(object, k)) {
            iterator.call(context, object[k], k, object)
        }
    }
}

},{"is-function":6}],9:[function(require,module,exports){

exports = module.exports = trim;

function trim(str){
  return str.replace(/^\s*|\s*$/g, '');
}

exports.left = function(str){
  return str.replace(/^\s*/, '');
};

exports.right = function(str){
  return str.replace(/\s*$/, '');
};

},{}],10:[function(require,module,exports){
var trim = require('trim')
  , forEach = require('for-each')
  , isArray = function(arg) {
      return Object.prototype.toString.call(arg) === '[object Array]';
    }

module.exports = function (headers) {
  if (!headers)
    return {}

  var result = {}

  forEach(
      trim(headers).split('\n')
    , function (row) {
        var index = row.indexOf(':')
          , key = trim(row.slice(0, index)).toLowerCase()
          , value = trim(row.slice(index + 1))

        if (typeof(result[key]) === 'undefined') {
          result[key] = value
        } else if (isArray(result[key])) {
          result[key].push(value)
        } else {
          result[key] = [ result[key], value ]
        }
      }
  )

  return result
}
},{"for-each":8,"trim":9}],11:[function(require,module,exports){
module.exports = extend

var hasOwnProperty = Object.prototype.hasOwnProperty;

function extend() {
    var target = {}

    for (var i = 0; i < arguments.length; i++) {
        var source = arguments[i]

        for (var key in source) {
            if (hasOwnProperty.call(source, key)) {
                target[key] = source[key]
            }
        }
    }

    return target
}

},{}],12:[function(require,module,exports){
/*
 * msa-seqtools
 * https://github.com/greenify/msa-seqtools
 *
 * Copyright (c) 2014 greenify
 * Licensed under the MIT license.
 */

var st = {};
module.exports = st;

// extract IDs and push them to the meta dict
st.getMeta = function(label) {
  if (st.contains(label, "|")) {
    var identifiers = label.split("|");
    var k = 0;
    var database, databaseID;
    var meta = {};
    while (k < identifiers.length - 1) {
      database = identifiers[k];
      databaseID = identifiers[k + 1];
      meta[database] = databaseID;
      k += 2;
    }
    // assume the last entry is the label
    var name = identifiers[identifiers.length - 1];
    // check whether there is a uniprot id
    if (name.indexOf("=") >= 0 && name.indexOf("OS") >= 0) {
      var ds = {};
      var details = name.split(" ");
      ds.en = details[0];
      details = details.splice(1);
      var nameLength = findSepInArr(details, "=");
      var detailsTmp = details.splice(nameLength - 1);
      name = details.join(" ");
      details = detailsTmp;
      k = 0;
      var block = [];
      details.forEach(function(item) {
        block.push(item);
        if (item.indexOf("=") >= 0) {
          strToDict(block.join(" "), "=", ds);
          block = [];
        }
      });
      return {
        name: name,
        ids: meta,
        details: ds
      };
    }
    return {
      name: name,
      ids: meta
    };
  }
  return {
    name: label
  };
};

var findSepInArr = function(arr, sep) {
  for (var i = 0; i < arr.lenght; i++) {
    if (arr[i].indexOf(i)) {
      return i;
    }
  }
  return arr.length - 1;
};

var strToDict = function(str, sep, toJoin) {
  toJoin = toJoin || {};
  var entries = str.split(sep);
  toJoin[entries[0].toLowerCase()] = entries[1];
  return toJoin;
};

var identDB = {
  "sp": {
    link: "http://www.uniprot.org/%s",
    name: "Uniprot"
  },
  "tr": {
    link: "http://www.uniprot.org/%s",
    name: "Trembl"
  },
  "gb": {
    link: "http://www.ncbi.nlm.nih.gov/nuccore/%s",
    name: "Genbank"
  },
  "pdb": {
    link: "http://www.rcsb.org/pdb/explore/explore.do?structureId=%s",
    name: "PDB"
  }
};

st.buildLinks = function(meta) {
  var links = {};
  meta = meta || {};
  Object.keys(meta).forEach(function(id) {
    if (id in identDB) {
      var entry = identDB[id];
      var link = entry.link.replace("%s", meta[id]);
      links[entry.name] = link;
    }
  });
  return links;
};


// search for a text
st.contains = function(text, search) {
  return ''.indexOf.call(text, search, 0) !== -1;
};

// split after e.g. 80 chars
st.splitNChars = function(txt, num) {
  var i, _ref;
  num = num || 80;
  var result = [];
  for (i = 0, _ref = txt.length - 1; i <= _ref; i += num) {
    result.push(txt.substr(i, num));
  }
  return result;
};

st.reverse = function(seq) {
  return seq.split('').reverse().join('');
}

st.complement = function(seq) {
  var newSeq = seq + "";
  var replacements = [
    // cg
    [/g/g, "0"],
    [/c/g, "1"],
    [/0/g, "c"],
    [/1/g, "g"],
    // CG
    [/G/g, "0"],
    [/C/g, "1"],
    [/0/g, "C"],
    [/1/g, "G"],
    // at
    [/a/g, "0"],
    [/t/g, "1"],
    [/0/g, "t"],
    [/1/g, "a"],
    // AT
    [/A/g, "0"],
    [/T/g, "1"],
    [/0/g, "T"],
    [/1/g, "A"],
  ];

  for(var rep in replacements){
    newSeq = newSeq.replace(replacements[rep][0], replacements[rep][1]);
  }
  return newSeq;
}

st.reverseComplement = function(seq){
  return st.reverse(st.complement(seq));
}

st.model = function Seq(seq, name, id) {
  this.seq = seq;
  this.name = name;
  this.id = id;
  this.ids = {};
};

},{}],"biojs-io-fasta":[function(require,module,exports){
// Generated by CoffeeScript 1.9.0
var Fasta, GenericReader, st;

GenericReader = require("biojs-io-parser");

st = require("msa-seqtools");

module.exports = Fasta = {
  parse: function(text) {
    var currentSeq, keys, label, line, obj, seqs, _i, _len;
    seqs = [];
    if (!text || text.length === 0) {
      return [];
    }
    if (Object.prototype.toString.call(text) !== '[object Array]') {
      text = text.split("\n");
    }
    for (_i = 0, _len = text.length; _i < _len; _i++) {
      line = text[_i];
      if (line[0] === ">" || line[0] === ";") {
        label = line.slice(1);
        obj = st.getMeta(label);
        label = obj.name;
        currentSeq = new st.model("", label, seqs.length);
        currentSeq.ids = obj.ids || {};
        keys = Object.keys(currentSeq.ids);
        if (keys.length > 0) {
          currentSeq.id = currentSeq.ids[keys[0]];
        }
        currentSeq.details = obj.details || {};
        seqs.push(currentSeq);
      } else {
        currentSeq.seq += line;
      }
    }
    return seqs;
  },
  write: function(seqs, access) {
    var seq, text, _i, _len;
    text = "";
    for (_i = 0, _len = seqs.length; _i < _len; _i++) {
      seq = seqs[_i];
      if (access != null) {
        seq = access(seq);
      }
      text += ">" + seq.name + "\n";
      text += (st.splitNChars(seq.seq, 80)).join("\n");
      text += "\n";
    }
    return text;
  }
};

GenericReader.mixin(Fasta);

},{"biojs-io-parser":2,"msa-seqtools":12}]},{},[]);
</script>
<script>var m;

HTMLWidgets.widget({

  name: 'msaR',

  type: 'output',

  initialize: function(el, width, height) {

    var rootDiv = el;

    return {
      msa: msa,
      el: rootDiv
    };
  },

  renderValue: function(el, x, instance) {
    var opts = x.config;
    opts.el = instance.el;
    opts.seqs = x.sequences;

    // init msa
    var m = instance.msa(opts);
    
    var cscheme = opts.colorscheme.scheme;
    var test = m.g.colorscheme.set("scheme", cscheme);

    if(x.menu){
      // the menu is independent to the MSA container
      var menuOpts = {};
      menuOpts.el = document.getElementById('div');
      menuOpts.msa = m;
      menuOpts.menu = "small";
      var defMenu = new msa.menu.defaultmenu(menuOpts);
      m.addView("menu", defMenu);
    }

    // save msa instance to window object so it can be hacked using shinyjs
    if(x.features){
      var features = {
        config: {
          type: "gff3"
        },
        seqs: {}
      };

      for(var i=0; i<x.features.length; i++){
        if(features.seqs[x.features[i].seqName] === undefined || features.seqs[x.features[i].seqName] === null){
          features.seqs[x.features[i].seqName] = [];
        }
        features.seqs[x.features[i].seqName].push({
          attributes: {
            Color: "#4285f4",
            Name: "sgRNA"
          },
          end: x.features[i].end,
          feature: "gene",
          start: x.features[i].start
        });
      }

      m.seqs.addFeatures(features);
    }

    // call render at the end to display the whole MSA
    m.render();
  },

  resize: function(el, width, height, instance) {

  }

});
</script>

</head>
<body style="background-color: white;">
<div id="htmlwidget_container">
  <div class="msaR html-widget html-fill-item" id="htmlwidget-6eee180367db3d4ed632" style="width:960px;height:500px;"></div>
</div>
<script type="application/json" data-for="htmlwidget-6eee180367db3d4ed632">{"x":{"sequences":[{"id":"Hmel203003o_7514658_7515355_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel203003o_7514658_7515355_Heliconius_melpomene_Heliconius_melpomene","seq":"YFTRYLAQLNGTLVNSAAHLYGTRPYDK---------IIFFLF-AIELCLHLVSRPTSPSLLRYRCRPPQ---FQ----------KRILLQPRRVVD"},{"id":"Hdem.Herato0310_6125543_6127103_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato0310_6125543_6127103_Heliconius_erato_Heliconius_erato","seq":"YFARYLAQLNGTLVNSAAHLYGTRPYDKFF-----LELCLYLVSGSSPSSSLLRYRRPSQLQKRIFLQPRRMV------------------------"},{"id":"5_6627228_6628458_Danaus_plexippus_Danaus_plexippus","name":"5_6627228_6628458_Danaus_plexippus_Danaus_plexippus","seq":"-VQRRIIQTGDGHYANAVTCIGKHPINPKLQPVESWFVSFISFEGWHNYHHAFPWDKAAELS-MHFNQSAKFIFELAYDLCCDNPSTILLFRRIPKE"},{"id":"3_9907807_9909865_Heliconius_sara_Heliconius_sara","name":"3_9907807_9909865_Heliconius_sara_Heliconius_sara","seq":"AILRLCFKFAISLAISSINIFIKHIIYRKLQPVESWFVSFISLEGWHNYHHAFPWDKAAELS-MHFNSSATFWFELAYDLKSASS------------"},{"id":"4_2910901_2917348_Danaus_plexippus_Danaus_plexippus","name":"4_2910901_2917348_Danaus_plexippus_Danaus_plexippus","seq":"----------------------------FIKSVENRIVSLAALEGWHNYHHVFPWDRTSELG--MINISTTFAFAWAYDIICTTEPTDRLHQQFRVE"},{"id":"Hmel219001o_12794124_12797499_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel219001o_12794124_12797499_Heliconius_melpomene_Heliconius_melpomene","seq":"----------------------------FIKPVENSVVSLAALEGWHNYHHVFPWDRTSELG--RLNLSTKFTFAWAYDILHTSFTECAGTSGRSCI"},{"id":"Hdem.Herato1910_471485_475096_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato1910_471485_475096_Heliconius_erato_Heliconius_erato","seq":"----------------------------FIKPVENPVVSLAALEG--------PWDRTSELG--RLNLSTIFTFAWAYDCKVFHIGRSITLRNEIYD"},{"id":"9_11893838_11906109_Bicyclus_anynana_Bicyclus_anynana","name":"9_11893838_11906109_Bicyclus_anynana_Bicyclus_anynana","seq":"AVCRYVYVLNVTLINSAAHKWGTKPYNKSIYPVESKLVAFLVLEGFHNFHHMFPWDKTSELGNYAFNFTNIFVMAWGYDFRTASRDLVLKTVKNLGD"},{"id":"9_11976956_11979833_Bicyclus_anynana_Bicyclus_anynana","name":"9_11976956_11979833_Bicyclus_anynana_Bicyclus_anynana","seq":"AILKYVYTLHGTLVNSAAHMWGMKPYDKHINPVENLTVSFITSEGFHNYHHTFPWDKTAELGNYSLNWTKLFIMALAYDLKTASPEIIEKRIKRTGD"},{"id":"4_3035137_3035556_Danaus_plexippus_Danaus_plexippus","name":"4_3035137_3035556_Danaus_plexippus_Danaus_plexippus","seq":"AIFRYVYVLNVTLVNSAAHKWGDKPYDKNINPVETKPVSLVVLEGFHNYHHTFPWDKTAELGHYQLNFSKLFFMAWAYDLKTVSTDVIEKRVKRTGD"},{"id":"19_16088965_16222519_Heliconius_sara_Heliconius_sara","name":"19_16088965_16222519_Heliconius_sara_Heliconius_sara","seq":"LPLQIILMSGFASGQDSVLDWAHKYSETDADPHNATRGFFFSHEGFHNYHHTFPWDKTAELGEYSLNFSKLFAMSWAYDLKTVSR------------"},{"id":"9_11911587_11959553_Bicyclus_anynana_Bicyclus_anynana","name":"9_11911587_11959553_Bicyclus_anynana_Bicyclus_anynana","seq":"AIFRYVYVLNVTLVNSAAHKWGSKPYDKFINPVETKSVSLVVLEGFHNYHHTFPWDKTAELGNYSLNFSKLFTMAWAYDLKTVSPDVIEKRVKRTGD"},{"id":"19_14542867_14544187_Heliconius_sara_Heliconius_sara","name":"19_14542867_14544187_Heliconius_sara_Heliconius_sara","seq":"A--RYAFILNVTLVN-AAHKWG----DKNIQPSENISVSVFALEGFHNYHFRNRLGRSSHASQVLGN------------------------------"},{"id":"Hdem.Herato1908_1594398_1597449_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato1908_1594398_1597449_Heliconius_erato_Heliconius_erato","seq":"AMFRYAFILNVTLVNSAAHKWGDKPYDKNIQPSENISVSVFALEG--------PWDKTAELGNNRLNFTTNFFFAWAYDLKTVSKETDADPHNATRG"},{"id":"Hmel219001o_11482073_11485032_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel219001o_11482073_11485032_Heliconius_melpomene_Heliconius_melpomene","seq":"AMFRYAFILNVTLVNSAAHKWGDKPYDKNIQPSENISVSVFALEGFHNYHHTFPWDKTAELGNNRLNFTTNFFFAWAYDLKTVSDEIVQKRVKRTGD"},{"id":"9_9009342_9017866_Bicyclus_anynana_Bicyclus_anynana","name":"9_9009342_9017866_Bicyclus_anynana_Bicyclus_anynana","seq":"AMFRYAFILNVTLVNSAAHKWGDKPYDKNIQPSENISVSVFALEGFHNYHHTFPWDKTAELGNNRLNFTTNFFFAWAYDLKTVSDEIIQNRVKRTGD"},{"id":"26_1782282_1782689_Bicyclus_anynana_Bicyclus_anynana","name":"26_1782282_1782689_Bicyclus_anynana_Bicyclus_anynana","seq":"NILRYTLNLHMSFINSAAHLWGKRPYDVNIQPVQNLFVSLVAFEGFHNYHHTYPWDKAAELGNNRLNLSTLFLFAWAYDLKTVPHDKVQARMIKTGD"},{"id":"JAEQBL010000033.1_829243_833250_Danaus_plexippus_Danaus_plexippus","name":"JAEQBL010000033.1_829243_833250_Danaus_plexippus_Danaus_plexippus","seq":"TVLRYILNLNGTLVNSAAHMFGNKPYEEHIKPSQNLFVSFVSFEGFHNYHHVFPWDRTAELGNNYLNLTTKFFFAWAYDRKTIPDDLIRSRSKRTGD"},{"id":"26_1761318_1761704_Bicyclus_anynana_Bicyclus_anynana","name":"26_1761318_1761704_Bicyclus_anynana_Bicyclus_anynana","seq":"TIMRYVFNLHITLVNSAAHLWGNKPYDKNMLAAQNLPVSFIAFEGFHNYHHAFPWDKTAELGNNWLNFSTKFFFAWAYDLKEVP-EVARARAERTGD"},{"id":"26_1770472_1770858_Bicyclus_anynana_Bicyclus_anynana","name":"26_1770472_1770858_Bicyclus_anynana_Bicyclus_anynana","seq":"TIMRYVFNLHITLVNSAAHLWGNKPYDKNMLPAQNLPVSFIAFEGFHNYHHAFPWDKTAELGNNWLNFSTKFFFAWAYDLKEVPLEVARARAERTGD"},{"id":"Hmel219001o_9225653_9226926_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel219001o_9225653_9226926_Heliconius_melpomene_Heliconius_melpomene","seq":"AILRYVCNLHNTFVNSLAHLWGNKPYDKSIKPSENLVISFLTLEGFHNYHHVFPWDKTGELGNNFLNVTTYFFFAWAYDLKSVSEEHIQSRSSRCGD"},{"id":"Hdem.Herato1905_119138_121616_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato1905_119138_121616_Heliconius_erato_Heliconius_erato","seq":"AVLRYVCNLHNTLVNSAAHLWGNKPYDKSIKPAQNLAVSFFAFEG--------PWDKTAELGNNYLNVTTYFFFAWAYDLKSVSDGFKVQPQRDARI"},{"id":"Hmel217001o_13896244_13900156_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel217001o_13896244_13900156_Heliconius_melpomene_Heliconius_melpomene","seq":"AVLRYVCNLHNALVNSAAHMWGNKPYDKSIQPAQNLAVSILAFEGFHNYHHVFPWDKTAELGNNYLNATTYFFFSWAYDLKSVSEDHIQSRSSRCGD"},{"id":"17_17619722_17623137_Heliconius_sara_Heliconius_sara","name":"17_17619722_17623137_Heliconius_sara_Heliconius_sara","seq":"-AIRYVCNLHSTLVN-AAHMWG----NKSIQPAQNLAASFLAFEGFHNYHHVFPWDKTAELGNNYLNLTTYFFFAWAYDLKSVSE------------"},{"id":"Hdem.Herato1708_1468951_1476399_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato1708_1468951_1476399_Heliconius_erato_Heliconius_erato","seq":"AILRYVCNLHNTLVNSAAHMWGNKPYDKSIQPAQNLAVSFFAFEG--------PWDKTAELGNNYLNLTTYFFFAWAYDLKSVSDDTDADPHNAARG"},{"id":"Hmel219001o_12473769_12791778_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel219001o_12473769_12791778_Heliconius_melpomene_Heliconius_melpomene","seq":"IIYIQTCVICAELVDSKQQQQQLGSSETSADPHNAHRGFFFSHVGWKKHPHVISEGNKIDMSVTNGNTNL-----RKCSRLVNHNTVYVGPTYDLGS"},{"id":"17_9940091_10139416_Bicyclus_anynana_Bicyclus_anynana","name":"17_9940091_10139416_Bicyclus_anynana_Bicyclus_anynana","seq":"--------------QNSLYQWVHKYSDTDADPHNANRGLFFSHIVHETWQCVVAWQFLRFLITFHSELTVNSFYG-------YRPKYCAQRKSFCGN"},{"id":"10_4647969_4650067_Bicyclus_anynana_Bicyclus_anynana","name":"10_4647969_4650067_Bicyclus_anynana_Bicyclus_anynana","seq":"--------------QNSVFIWSHRYADTDGDPHNSKRGFFFCHMGWKKHPYVLGLGKRIDMSDLQADWMVMLLLL----ILCIRRSRVRAMLLFRGD"},{"id":"14_9790506_9795341_Bicyclus_anynana_Bicyclus_anynana","name":"14_9790506_9795341_Bicyclus_anynana_Bicyclus_anynana","seq":"--------------QDCIFEWAHKYADTDADPHNAERGLFYSHMGWKKLPEVVEGGKRIDLTDLYEDPVVMFLHEGTVLLVTNGYLLLE--------"},{"id":"Hmel212001o_12442158_12444063_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel212001o_12442158_12444063_Heliconius_melpomene_Heliconius_melpomene","seq":"TPLRTLLMIWQTGFQDCIFEWAHRTADTDADPHNAERGLFYSHMGWKKSPEVIEGGRRIDV---------CFYYSRNLVKRIFHSTTVHWNKRCMEC"},{"id":"Hdem.Herato1202_15814310_15816301_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato1202_15814310_15816301_Heliconius_erato_Heliconius_erato","seq":"TPLRTLLMIWQTGFQDSIFEWAHKYADTDADPHNAERGLFYSHMGWKKSPEVIEGGRRIDVSDLYDDPVV---------------------------"},{"id":"12_15302160_15303779_Heliconius_sara_Heliconius_sara","name":"12_15302160_15303779_Heliconius_sara_Heliconius_sara","seq":"TPLRTLLMIWQTGFQDCIFEWAHKYADTDADPHNAERGLFYSHMGWKKSPEVIEGGRRIDVSDLYDDPVVMFLHENAIALFCFANSCILLGRNLVKC"},{"id":"25_5192027_5193183_Bicyclus_anynana_Bicyclus_anynana","name":"25_5192027_5193183_Bicyclus_anynana_Bicyclus_anynana","seq":"-----------------------RYCDTDADPHNASRGFFFSHIGWKRHPEAMRRGKAIDISDALANPVLRFRSANVFPRPTDACVFLRREPQHCMA"},{"id":"4_2949442_2950575_Danaus_plexippus_Danaus_plexippus","name":"4_2949442_2950575_Danaus_plexippus_Danaus_plexippus","seq":"------------------------FTETDADPHNAKRGFFFSHMGWRKHKAVFEKGASVDMSDLEKDPIVMFIFSFTLLRCARVVSFVERKVVRGFH"},{"id":"4_4514840_4519652_Danaus_plexippus_Danaus_plexippus","name":"4_4514840_4519652_Danaus_plexippus_Danaus_plexippus","seq":"WP-RVILVIFNTAFQDSHRMH-HKYSETDADPHNATRGFFFSHIGWRKHPELKRKGKGLDLSDLYADPILRFVLP-PPNANQLFHDDVDERLLRGGH"},{"id":"19_16219686_16222573_Heliconius_sara_Heliconius_sara","name":"19_16219686_16222573_Heliconius_sara_Heliconius_sara","seq":"LPLRILLTIFNTAFQDSVLDWAHKYSETDADPHNATRGFFFSHVGWRKHPEIKSKGHTIDMNDLWSDPILRFLFALLYSPIIYSPRIIMERLFRLRR"},{"id":"Hmel219001o_12886927_12890226_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel219001o_12886927_12890226_Heliconius_melpomene_Heliconius_melpomene","seq":"LPLRILLTIFNTAFQDSVLDWAHRMSETDADPHNATRGFFFSHVGWRKHPEIKSKGHTIDMLHSAIIYSH-----RIVMERIFCSFPLRVRTKCYMA"},{"id":"Hdem.Herato1910_598751_601898_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato1910_598751_601898_Heliconius_erato_Heliconius_erato","seq":"LPLRILLTIFNTAFQDSVLDWAHKYSETDADPHNATRGFFFSHIGWRKHPEIKSKGHTIDMNDLWSDPIL---------------------------"},{"id":"Hdem.Herato1910_447828_521981_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato1910_447828_521981_Heliconius_erato_Heliconius_erato","seq":"LELRIFLMLCQTAGHNNIYNWVHKLSETSADPHNAHRGFFFSHVGWKKHPDVISEGNKIDMTDILNDTVV---------------------------"},{"id":"Hmel204001o_5259657_5261873_Heliconius_melpomene_Heliconius_melpomene","name":"Hmel204001o_5259657_5261873_Heliconius_melpomene_Heliconius_melpomene","seq":"RCLSSYFYLCVFALVNSLEQWVHRVSDTDADPHNSNRGLFFSHIGWKKNAQVRNSGKLIDMTVCFIVNSQ---------------------------"},{"id":"17_10136128_10138102_Bicyclus_anynana_Bicyclus_anynana","name":"17_10136128_10138102_Bicyclus_anynana_Bicyclus_anynana","seq":"--------------QNSIEQWVHKFSDTDSDPHNANRGLFFSHIGWKKNDQVLEAGKLIDMSDITGDPVLRYLHQTILLRSTAAHVYTGRELAVRGG"},{"id":"Hdem.Herato0411_2654010_2658804_Heliconius_erato_Heliconius_erato","name":"Hdem.Herato0411_2654010_2658804_Heliconius_erato_Heliconius_erato","seq":"TASQLFLLMCFSAGQNSLEQWVHKFSDTDADPHNSNRGLFFSHIGWKKNAQVRNSGKLIDMTDITNDPLL---------------------------"},{"id":"4_7088664_7091110_Heliconius_sara_Heliconius_sara","name":"4_7088664_7091110_Heliconius_sara_Heliconius_sara","seq":"LPLKLFLLMCFSAGQNSLEQWVHKFSDTDADPHNSNRGLFFSHIGWKKNAQVRNSGKLIDMTDITNDPLLKFIF-WLL-------------------"}],"config":{"vis":{"conserv":false,"overviewbox":true,"seqlogo":true,"sequences":true,"markers":true,"metacell":false,"gapHeader":false,"leftHeader":true,"labels":true,"labelName":true,"labelId":false,"labelPartition":false,"labelCheckbox":false,"metaGaps":true,"metaIdentity":true,"metaLinks":true},"conf":{"dropImport":true,"registerMouseHover":false,"registerMouseClicks":true,"eventBus":true,"alphabetSize":20,"debug":false,"hasRef":false,"manualRendering":false},"colorscheme":{"scheme":"nucleotide","colorBackground":true,"showLowerCase":true,"opacity":0.6},"zoomer":{"menuFontsize":"12px","autoResize":true,"alignmentWidth":"auto","alignmentHeight":225,"columnWidth":15,"rowHeight":15,"textVisible":true,"labelIdLength":30,"labelNameLength":100,"labelPartLength":15,"labelCheckLength":15,"labelFontsize":13,"labelLineHeight":"13px","markerFontsize":"10px","stepSize":1,"markerStepSize":2,"markerHeight":20,"residueFont":"13","canvasEventScale":1,"boxRectHeight":2,"boxRectWidth":2,"overviewboxPaddingTop":10,"overviewboxWidth":"auto","overviewboxHeight":"fixed","metaGapWidth":35,"metaIdentWidth":40,"metaLinksWidth":25},"menu":{"menuFontsize":"14px","menuItemFontsize":"14px","menuItemLineHeight":"14px","menuMarginLeft":"3px","menuPadding":"3px 4px 3px 4px"}},"menu":true,"features":null},"evals":[],"jsHooks":[]}</script>
<script type="application/htmlwidget-sizing" data-for="htmlwidget-6eee180367db3d4ed632">{"viewer":{"width":450,"height":350,"padding":15,"fill":true},"browser":{"width":960,"height":500,"padding":40,"fill":false}}</script>
</body>
</html>
